{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_fcc8164c33ab268660e3819796c9f485/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/踏月寻仙-测试版/schema.ts","src://tavern_helper_template/src/踏月寻仙-测试版/character-assets.ts","src://tavern_helper_template/src/踏月寻仙-测试版/themes.ts","src://tavern_helper_template/src/踏月寻仙-测试版/store.ts","webpack://tavern_helper_template/./src/踏月寻仙-测试版/app.vue?3d78","webpack://tavern_helper_template/src/踏月寻仙-测试版/app.vue?43c3","src://tavern_helper_template/src/踏月寻仙-测试版/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","const __WEBPACK_NAMESPACE_OBJECT__ = z;","// ============================================================================\n// 踏月寻仙 - MVU 变量结构定义 (Zod Schema for MVU Variables)\n// ============================================================================\n// 修炼境界等级与境界描述映射\n// 等级 1-4:   练气（初期、中期、后期、大圆满）\n// 等级 5-8:   筑基（初期、中期、后期、大圆满）\n// 等级 9-12:  金丹（初期、中期、后期、大圆满）\n// 等级 13-16: 元婴（初期、中期、后期、大圆满）\n// 等级 17-20: 化神（初期、中期、后期、大圆满）\n// 等级 21-24: 炼虚（初期、中期、后期、大圆满）\n// 等级 25-28: 合体（初期、中期、后期、大圆满）\n// 等级 29-32: 大乘（初期、中期、后期、大圆满）\n// 等级 33-36: 渡劫（初期、中期、后期、大圆满）\nconst REALM_NAMES = ['练气', '筑基', '金丹', '元婴', '化神', '炼虚', '合体', '大乘', '渡劫'];\nconst REALM_STAGES = ['初期', '中期', '后期', '大圆满'];\n// 修炼境界等级与突破阈值映射\nconst REALM_THRESHOLDS = [100, 100, 100, 100, 200, 200, 200, 200, 400, 400, 400, 400, 800, 800, 800, 800, 1600, 1600, 1600, 1600, 3200, 3200, 3200, 3200, 6400, 6400, 6400, 6400, 12800, 12800, 12800, 12800, 25600, 25600, 25600, 25600];\n// 修炼境界等级与寿元上限映射\nconst REALM_LIFESPANS = [100, 100, 100, 100, 200, 200, 200, 200, 500, 500, 500, 500, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 5000, 5000, 5000, 5000, 10000, 10000, 10000, 10000, 50000, 50000, 50000, 50000, 100000, 100000, 100000, 100000];\n// 物品 Schema\nconst ItemSchema = z.object({\n    名称: z.string().prefault(''),\n    描述: z.string().prefault(''),\n    品阶: z.string().prefault(''),\n    数量: z.coerce.number().transform(v => Math.max(1, v)).prefault(1), // 默认为 1 且最小为 1，避免被过滤\n});\n// 宗门势力 Schema\nconst FactionSchema = z.object({\n    所在地: z.string(),\n    核心特点: z.string(),\n    最高战力: z.string(),\n    阵营: z.enum(['正道', '魔道', '中立']),\n    规模: z.enum(['超大宗门', '大宗门', '小宗门', '微型宗门', '特殊势力']),\n    备注: z.string().optional(),\n});\n// 功法 Schema\nconst TechniqueSchema = z.object({\n    品阶: z.enum(['凡阶', '黄阶', '玄阶', '地阶', '天阶', '仙阶', '圣阶']),\n    属性: z.string().describe('如:金系、木系、火系等'),\n    效果描述: z.string(),\n    修炼要求: z.string().optional(),\n});\n// 法宝兵器 Schema\nconst TreasureSchema = z.object({\n    品阶: z.enum(['凡器', '法器', '灵器', '法宝', '灵宝', '仙器', '圣器', '道器']),\n    类型: z.string().describe('如:剑、刀、枪、防御、飞行、储物等'),\n    特性: z.string(),\n    当前持有者: z.string().optional(),\n});\n// 地点 Schema\nconst LocationSchema = z.object({\n    所属区域: z.enum(['天层', '神州', '东苍', '南炎', '西庚', '北冥', '下层', '四海']),\n    类型: z.enum(['秘境', '城镇', '宗门', '禁地', '遗迹', '自然地形']),\n    危险度: z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n    特点: z.string(),\n    可获得资源: z.array(z.string()).prefault([]),\n});\n// 灵根 Schema\nconst SpiritRootSchema = z.object({\n    品质: z.enum(['劣等', '下品', '中品', '上品', '极品', '天灵根', '变异']),\n    属性: z.string().describe('如:金、木、水、火、土、冰、雷、风、光、暗等'),\n    修炼速度: z.string().describe('如:0.5倍、1倍、2倍、5倍等'),\n    特性描述: z.string(),\n    稀有度: z.enum(['常见', '少见', '罕见', '稀有', '传说']),\n});\n// 体质 Schema\nconst PhysiqueSchema = z.object({\n    品质: z.enum(['凡体', '灵体', '道体', '圣体', '神体']),\n    特性描述: z.string(),\n    优势: z.string(),\n    劣势: z.string().optional(),\n    稀有度: z.enum(['常见', '少见', '罕见', '稀有', '传说']),\n});\n// 完整的 MVU 变量结构 - 完全参考角色卡示例的结构\nexport const Schema = z.object({\n    世界时钟: z.object({\n        纪元: z.string().prefault('末法时代'),\n        年份: z.coerce.number().prefault(1),\n        月份: z.coerce.number().transform(v => _.clamp(v, 1, 12)).prefault(1),\n        日期: z.coerce.number().transform(v => _.clamp(v, 1, 30)).prefault(1),\n        时辰: z.string().prefault('子时'),\n    }),\n    世界地图: z.record(z.string().describe('区域名'), z.object({\n        layer: z.enum(['天层', '地层', '下层']).prefault('地层'),\n        danger: z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n        desc: z.string().prefault(''),\n        connections: z.array(z.string()).prefault([]),\n    })).prefault({}),\n    世界图志: z.record(z.string().describe('事件名'), z.object({\n        状态: z.string().prefault(''),\n        事件: z.string().prefault(''),\n    })).prefault({}),\n    宗门势力库: z.record(z.string().describe('宗门名'), FactionSchema).prefault({\n        // 正道超大宗门\n        剑阁: { 所在地: '神州·剑门关', 核心特点: '剑修圣地，天下剑道源头', 最高战力: '剑仙·南宫秋水（渡劫后期）', 阵营: '正道', 规模: '超大宗门', 备注: '宗门悬空于万仞天堑之上，非剑心通明者不可登门，与魔道抗衡千年' },\n        万法宗: { 所在地: '神州·问道峰', 核心特点: '包容并蓄，研究万法本源', 最高战力: '道主·尘微散人（渡劫初期）', 阵营: '正道', 规模: '超大宗门', 备注: '坐拥天下第一藏经阁，不论出身皆可入内求法，号称万流归宗，是修仙界理论与知识的最高殿堂，与剑宗交好' },\n        // 正道大宗门\n        金刚寺: { 所在地: '神州·西天佛山', 核心特点: '佛修圣地，炼体神通', 最高战力: '方丈·玄悲（大乘中期）', 阵营: '正道', 规模: '大宗门', 备注: '佛门魁首，镇压魔道' },\n        药王谷: { 所在地: '神农架', 核心特点: '医修圣地，炼丹术独步天下', 最高战力: '药王·孙思邈（大乘初期）', 阵营: '正道', 规模: '大宗门', 备注: '人脉极广，正魔皆求其丹药' },\n        儒门: { 所在地: '神州·文圣山', 核心特点: '修浩然正气，以文入道', 最高战力: '文圣·孔夫子（大乘中期）', 阵营: '正道', 规模: '大宗门', 备注: '影响力巨大，掌控世俗文脉' },\n        青龙殿: { 所在地: '东苍·青龙山脉', 核心特点: '守护青龙遗脉，镇守青帝陵', 最高战力: '青龙使·敖广（大乘初期）', 阵营: '正道', 规模: '大宗门', 备注: '半人半妖，与妖族关系微妙' },\n        玄武宗: { 所在地: '北冥·玄冰山', 核心特点: '镇守北冥，守护玄武圣兽', 最高战力: '宗主·玄冥子（大乘后期）', 阵营: '正道', 规模: '大宗门', 备注: '常年镇守归墟，极少外出' },\n        // 正道小宗门\n        建木宗: { 所在地: '东苍·建木神树', 核心特点: '崇拜建木，擅木系道法', 最高战力: '木长老（合体中期）', 阵营: '正道', 规模: '小宗门', 备注: '东苍实际管理者之一' },\n        百花谷: { 所在地: '百花秘境', 核心特点: '全为女修，以花入道', 最高战力: '花主·牡丹（合体后期）', 阵营: '正道', 规模: '小宗门', 备注: '与各大宗门联姻众多' },\n        // 魔道超大宗门\n        血神教: { 所在地: '血魔渊', 核心特点: '修炼血道，以血炼法', 最高战力: '血神老祖（渡劫中期）', 阵营: '魔道', 规模: '超大宗门', 备注: '与剑阁对峙千年，死敌' },\n        // 魔道大宗门\n        天魔宗: { 所在地: '天魔山', 核心特点: '正统魔修，修炼天魔大道', 最高战力: '天魔宗主（大乘中期）', 阵营: '魔道', 规模: '大宗门', 备注: '魔道中相对守规矩的一派' },\n        // 中立超大宗门\n        妖盟: { 所在地: '万妖森林', 核心特点: '妖族联盟，与人类和平共处', 最高战力: '妖王·白泽（渡劫中期）', 阵营: '中立', 规模: '超大宗门', 备注: '维护妖族利益，不参与人族内斗' },\n        // 中立大宗门\n        大夏王朝: { 所在地: '神州·中州皇城', 核心特点: '世俗统治，皇室修仙', 最高战力: '夏皇（大乘初期）', 阵营: '中立', 规模: '大宗门', 备注: '名义上统御神州，实际受宗门制约' },\n        九州商会: { 所在地: '神州九大主城', 核心特点: '商业联盟，掌控经济命脉', 最高战力: '财神爷（大乘初期）', 阵营: '中立', 规模: '大宗门', 备注: '只做生意，不问正魔' },\n        // 中立小宗门\n        离火宫: { 所在地: '南炎·不灭火山', 核心特点: '供奉朱雀圣兽，亦正亦邪', 最高战力: '宫主·离天火（合体大圆满）', 阵营: '中立', 规模: '小宗门', 备注: '态度摇摆，谁给好处帮谁' },\n        铸剑山庄: { 所在地: '南炎·地火熔炉', 核心特点: '天下第一炼器宗门', 最高战力: '庄主·欧冶子（合体后期）', 阵营: '中立', 规模: '小宗门', 备注: '只认材料不认人，正魔客户都接' },\n    }),\n    功法库: z.record(z.string().describe('功法名'), TechniqueSchema).prefault({\n        // 通用基础功法\n        引气诀: { 品阶: '凡阶', 属性: '通用', 效果描述: '基础引气，各宗门入门功法' },\n        五行诀: { 品阶: '黄阶', 属性: '五行', 效果描述: '平衡五行，稳扎稳打' },\n        筑基真解: { 品阶: '玄阶', 属性: '通用', 效果描述: '完美筑基之法' },\n        金丹大道: { 品阶: '地阶', 属性: '通用', 效果描述: '凝结金丹的秘法' },\n        // 金系功法\n        万剑归宗诀: { 品阶: '天阶', 属性: '金系·剑道', 效果描述: '剑阁镇宗功法，御万剑', 修炼要求: '剑心通明' },\n        庚金神雷: { 品阶: '天阶', 属性: '金系·雷系', 效果描述: '金雷双修，威力巨大' },\n        // 木系功法\n        百花真经: { 品阶: '地阶', 属性: '木系', 效果描述: '百花谷核心，以花入道' },\n        建木通天诀: { 品阶: '天阶', 属性: '木系', 效果描述: '建木宗镇宗，直达天听' },\n        万木朝宗: { 品阶: '仙阶', 属性: '木系', 效果描述: '青帝遗留，掌控万木', 修炼要求: '残卷，需特殊传承' },\n        // 水系功法\n        玄冰诀: { 品阶: '地阶', 属性: '水系·冰系', 效果描述: '万法宗冰系基础功法，心如冰清' },\n        北冥真经: { 品阶: '天阶', 属性: '水系', 效果描述: '玄武宗镇宗，吞噬转化' },\n        海纳百川: { 品阶: '仙阶', 属性: '水系', 效果描述: '归墟感悟，容纳万物', 修炼要求: '残卷' },\n        // 火系功法\n        朱雀涅槃经: { 品阶: '天阶', 属性: '火系', 效果描述: '离火宫镇宫，涅槃重生' },\n        太阳真火: { 品阶: '天阶', 属性: '火系', 效果描述: '极致阳火，焚尽万物' },\n        祝融神火: { 品阶: '仙阶', 属性: '火系', 效果描述: '火神遗留，威力无穷', 修炼要求: '残卷' },\n        // 土系功法\n        不动明王身: { 品阶: '天阶', 属性: '土系·佛门', 效果描述: '金刚寺镇寺，防御无敌' },\n        // 变异属性功法\n        九天雷神诀: { 品阶: '天阶', 属性: '雷系', 效果描述: '雷系顶级，代天行罚' },\n        虚空经: { 品阶: '天阶', 属性: '空间', 效果描述: '空间属性，罕见难修' },\n        轮回经: { 品阶: '仙阶', 属性: '轮回', 效果描述: '涉及轮回，因果重大', 修炼要求: '残卷，{{user}}专属' },\n        // 特殊功法\n        万法归宗: { 品阶: '天阶', 属性: '通用', 效果描述: '万法宗镇宗，模拟万法' },\n        医仙宝典: { 品阶: '天阶', 属性: '医道', 效果描述: '药王谷镇谷，活死人肉白骨' },\n        天魔策: { 品阶: '天阶', 属性: '魔道', 效果描述: '魔道至高，速成但隐患大' },\n        // 剑道专属\n        斩轮回剑典: { 品阶: '仙阶', 属性: '剑道·轮回', 效果描述: '{{user}}前世所创，斩断因果', 修炼要求: '残卷，{{user}}专属' },\n        剑意通神: { 品阶: '仙阶', 属性: '剑道', 效果描述: '剑道至高，意即为剑', 修炼要求: '剑道顿悟' },\n    }),\n    法宝库: z.record(z.string().describe('法宝名'), TreasureSchema).prefault({\n        // 剑类\n        青锋剑: { 品阶: '法器', 类型: '剑', 特性: '制式长剑，锋利耐用', 当前持有者: '各宗门弟子标配' },\n        秋水剑: { 品阶: '灵器', 类型: '剑', 特性: '剑身如水，适合水系剑修', 当前持有者: '玄武宗内门弟子' },\n        离火剑: { 品阶: '法宝', 类型: '剑', 特性: '蕴含离火，挥出火焰剑气', 当前持有者: '离火宫真传弟子' },\n        寒镜剑: { 品阶: '法宝', 类型: '剑', 特性: '心镜能力，可映照人心', 当前持有者: '凌寒镜' },\n        红绡枪: { 品阶: '法宝', 类型: '枪', 特性: '红绡舞天，破军杀阵', 当前持有者: '战红绡' },\n        青龙剑: { 品阶: '灵宝', 类型: '剑', 特性: '蕴含青龙之魂，木属性', 当前持有者: '青龙殿镇殿之宝' },\n        白虎剑: { 品阶: '灵宝', 类型: '剑', 特性: '杀伐之气冲天，金属性', 当前持有者: '白虎圣殿镇殿' },\n        朱雀剑: { 品阶: '灵宝', 类型: '剑', 特性: '火焰化形，火属性', 当前持有者: '离火宫镇宫之宝' },\n        玄武剑: { 品阶: '灵宝', 类型: '剑', 特性: '厚重防御，水属性', 当前持有者: '玄武宗镇宗之宝' },\n        斩轮回: { 品阶: '仙器', 类型: '剑', 特性: '可斩因果（残破）', 当前持有者: '{{user}}（需重铸）' },\n        镇渊剑: { 品阶: '仙器', 类型: '剑', 特性: '{{user}}本命剑，可随修为成长（未完成）', 当前持有者: '{{user}}需自行炼制' },\n        双鱼佩: { 品阶: '仙器', 类型: '法宝·护身', 特性: '稳定时空法则，内藏小世界，可庇护神魂', 当前持有者: '{{user}}（需认主）' },\n        // 特殊兵器\n        绯月神弓: { 品阶: '法宝', 类型: '弓', 特性: '朱雀之力，远程攻击极强', 当前持有者: '焰绯月' },\n        碧玉瑶琴: { 品阶: '法宝', 类型: '琴', 特性: '天籁之音，可治愈心魔', 当前持有者: '叶挽歌' },\n        千丝罗网: { 品阶: '灵宝', 类型: '法器', 特性: '织梦控心，幻术神器', 当前持有者: '幻千丝' },\n        雪魄琉璃炉: { 品阶: '灵宝', 类型: '丹炉', 特性: '冰雪之力加持，炼丹神器', 当前持有者: '苏雪魄' },\n        龙鳞护甲: { 品阶: '灵宝', 类型: '防御', 特性: '真龙鳞片，防御极强', 当前持有者: '敖清霜' },\n        // 储物类\n        储物袋: { 品阶: '法器', 类型: '储物', 特性: '基础储物，空间较小' },\n        储物戒指: { 品阶: '灵器', 类型: '储物', 特性: '空间较大，便于携带' },\n        乾坤袋: { 品阶: '法宝', 类型: '储物', 特性: '空间巨大，可装活物' },\n        洞天法宝: { 品阶: '灵宝', 类型: '储物', 特性: '内含小世界，可居住修炼' },\n    }),\n    地点库: z.record(z.string().describe('地点名'), LocationSchema).prefault({\n        // 天层\n        天渊: { 所属区域: '天层', 类型: '禁地', 危险度: 95, 特点: '悬浮裂隙，星辰坠落，连接域外', 可获得资源: ['星辰碎片', '域外陨铁'] },\n        九天罡风带: { 所属区域: '天层', 类型: '禁地', 危险度: 90, 特点: '狂暴罡风，元婴以下无法穿越', 可获得资源: ['罡风精华'] },\n        // 神州\n        问道峰: { 所属区域: '神州', 类型: '宗门', 危险度: 10, 特点: '万法宗所在，天下问道大会举办地，高九千丈', 可获得资源: ['功法典籍', '灵药'] },\n        剑门关: { 所属区域: '神州', 类型: '宗门', 危险度: 15, 特点: '剑阁山门，悬空于万仞天堑之上', 可获得资源: ['剑意感悟', '飞剑'] },\n        藏书阁: { 所属区域: '神州', 类型: '宗门', 危险度: 5, 特点: '万法宗九层古籍收藏，每层有守护灵', 可获得资源: ['功法', '典籍', '秘术'] },\n        酆都城: { 所属区域: '神州', 类型: '城镇', 危险度: 30, 特点: '引魂司总部，阴阳交汇，白日人市夜晚鬼市', 可获得资源: ['幽冥材料', '鬼修功法'] },\n        龙门瀑布: { 所属区域: '神州', 类型: '秘境', 危险度: 40, 特点: '鲤鱼跃龙门之地，蕴含造化', 可获得资源: ['龙气', '化龙机缘'] },\n        // 东苍\n        建木森林: { 所属区域: '东苍', 类型: '自然地形', 危险度: 50, 特点: '无边原始森林，古树成精', 可获得资源: ['灵木', '木系材料', '妖兽内丹'] },\n        青帝陵: { 所属区域: '东苍', 类型: '遗迹', 危险度: 85, 特点: '青帝遗迹，内有传承考验', 可获得资源: ['青帝传承', '木系至宝'] },\n        百花秘境: { 所属区域: '东苍', 类型: '秘境', 危险度: 20, 特点: '百花谷所在，四季花开', 可获得资源: ['灵花', '花粉', '花系功法'] },\n        // 南炎\n        不灭火山: { 所属区域: '南炎', 类型: '自然地形', 危险度: 80, 特点: '中央火山，朱雀涅槃处', 可获得资源: ['朱雀真火', '火系至宝'] },\n        地火窟: { 所属区域: '南炎', 类型: '自然地形', 危险度: 60, 特点: '地火喷涌，适合炼器', 可获得资源: ['地心火', '炼器材料'] },\n        涅槃台: { 所属区域: '南炎', 类型: '遗迹', 危险度: 70, 特点: '朱雀涅槃留下的石台，蕴含涅槃真意', 可获得资源: ['涅槃感悟', '不死鸟羽毛'] },\n        // 西庚\n        万剑冢: { 所属区域: '西庚', 类型: '禁地', 危险度: 85, 特点: '上古战场遗址，剑意千年不散', 可获得资源: ['剑意感悟', '古剑', '剑修传承'] },\n        庚金矿脉: { 所属区域: '西庚', 类型: '自然地形', 危险度: 40, 特点: '盛产庚金之精，炼制飞剑最佳', 可获得资源: ['庚金', '金属矿石'] },\n        // 北冥\n        玄冰山: { 所属区域: '北冥', 类型: '宗门', 危险度: 50, 特点: '玄武宗所在，黑色冰山永不融化', 可获得资源: ['玄冰', '寒冰材料'] },\n        归墟海眼: { 所属区域: '北冥', 类型: '禁地', 危险度: 99, 特点: '吞噬一切的漩涡，万物终结', 可获得资源: ['归墟感悟', '混沌之力'] },\n        // 下层\n        黄泉古迹: { 所属区域: '下层', 类型: '遗迹', 危险度: 90, 特点: '九曲天河源头，通往幽冥', 可获得资源: ['黄泉水', '幽冥宝物'] },\n        无尽炎渊: { 所属区域: '下层', 类型: '禁地', 危险度: 95, 特点: '南炎地心火狱，火焰分层', 可获得资源: ['地心火', '炎魔材料'] },\n    }),\n    灵根库: z.record(z.string().describe('灵根名'), SpiritRootSchema).prefault({\n        // ===== 五行灵根 =====\n        // 单灵根（天灵根）\n        金天灵根: { 品质: '天灵根', 属性: '金', 修炼速度: '5倍', 特性描述: '纯粹金属性，锋锐无双，攻击力极强', 稀有度: '传说' },\n        木天灵根: { 品质: '天灵根', 属性: '木', 修炼速度: '5倍', 特性描述: '纯粹木属性，生生不息，恢复力极强', 稀有度: '传说' },\n        水天灵根: { 品质: '天灵根', 属性: '水', 修炼速度: '5倍', 特性描述: '纯粹水属性，柔韧包容，适应力极强', 稀有度: '传说' },\n        火天灵根: { 品质: '天灵根', 属性: '火', 修炼速度: '5倍', 特性描述: '纯粹火属性，爆发力极强，威力巨大', 稀有度: '传说' },\n        土天灵根: { 品质: '天灵根', 属性: '土', 修炼速度: '5倍', 特性描述: '纯粹土属性，厚重稳固，防御力极强', 稀有度: '传说' },\n        // 双灵根（极品）\n        金木双灵根: { 品质: '极品', 属性: '金木', 修炼速度: '3倍', 特性描述: '金木相克又相生，适合修炼特殊功法', 稀有度: '稀有' },\n        水火双灵根: { 品质: '极品', 属性: '水火', 修炼速度: '3倍', 特性描述: '水火既济，阴阳调和，平衡发展', 稀有度: '稀有' },\n        金火双灵根: { 品质: '极品', 属性: '金火', 修炼速度: '3倍', 特性描述: '火炼真金，适合炼器和战斗', 稀有度: '稀有' },\n        木水双灵根: { 品质: '极品', 属性: '木水', 修炼速度: '3倍', 特性描述: '水生木，生机勃勃，恢复力强', 稀有度: '稀有' },\n        // 三灵根（上品）\n        金木水三灵根: { 品质: '上品', 属性: '金木水', 修炼速度: '2倍', 特性描述: '三属性均衡，可修炼多种功法', 稀有度: '罕见' },\n        火土金三灵根: { 品质: '上品', 属性: '火土金', 修炼速度: '2倍', 特性描述: '火生土、土生金，攻守兼备', 稀有度: '罕见' },\n        // 四灵根（中品）\n        金木水火四灵根: { 品质: '中品', 属性: '金木水火', 修炼速度: '1倍', 特性描述: '四属性修炼，进度较慢但全面', 稀有度: '少见' },\n        // 五行杂灵根（下品）\n        五行杂灵根: { 品质: '下品', 属性: '金木水火土', 修炼速度: '0.5倍', 特性描述: '五行俱全但杂乱，修炼缓慢', 稀有度: '常见' },\n        // ===== 变异灵根 =====\n        变异冰灵根: { 品质: '变异', 属性: '冰', 修炼速度: '4倍', 特性描述: '水属性变异，极寒之力，冻结万物', 稀有度: '传说' },\n        变异雷灵根: { 品质: '变异', 属性: '雷', 修炼速度: '4倍', 特性描述: '金属性变异，雷霆之力，毁灭一切', 稀有度: '传说' },\n        变异风灵根: { 品质: '变异', 属性: '风', 修炼速度: '4倍', 特性描述: '木属性变异，御风而行，速度无双', 稀有度: '传说' },\n        变异暗灵根: { 品质: '变异', 属性: '暗', 修炼速度: '4倍', 特性描述: '水属性变异，幽暗侵蚀，诡异莫测', 稀有度: '传说' },\n        变异光灵根: { 品质: '变异', 属性: '光', 修炼速度: '4倍', 特性描述: '火属性变异，圣光净化，克制邪祟', 稀有度: '传说' },\n        变异离火灵根: { 品质: '变异', 属性: '离火', 修炼速度: '4倍', 特性描述: '火属性变异，朱雀之火，涅槃重生', 稀有度: '传说' },\n        变异空间灵根: { 品质: '变异', 属性: '空间', 修炼速度: '5倍', 特性描述: '至高变异，掌控空间，极为稀有', 稀有度: '传说' },\n        变异时间灵根: { 品质: '变异', 属性: '时间', 修炼速度: '5倍', 特性描述: '至高变异，操控时间，万古难遇', 稀有度: '传说' },\n        变异混沌灵根: { 品质: '变异', 属性: '混沌', 修炼速度: '5倍', 特性描述: '至高变异，回归混沌，包容万物', 稀有度: '传说' },\n        变异轮回灵根: { 品质: '变异', 属性: '轮回', 修炼速度: '5倍', 特性描述: '至高变异，轮回之力，{{user}}专属', 稀有度: '传说' },\n        // 复合变异\n        冰火双灵根: { 品质: '变异', 属性: '冰火', 修炼速度: '3.5倍', 特性描述: '冰火两极，极致对立又统一', 稀有度: '传说' },\n        冰雷双灵根: { 品质: '变异', 属性: '冰雷', 修炼速度: '3.5倍', 特性描述: '寒冰与雷霆，冻结后粉碎', 稀有度: '传说' },\n        暗幻双灵根: { 品质: '变异', 属性: '暗幻', 修炼速度: '3.5倍', 特性描述: '暗影与幻术，诡异莫测', 稀有度: '传说' },\n        水龙双灵根: { 品质: '变异', 属性: '水龙', 修炼速度: '4倍', 特性描述: '蕴含龙族血脉，掌控水系', 稀有度: '传说' },\n        冰丹双灵根: { 品质: '变异', 属性: '冰丹', 修炼速度: '3.5倍', 特性描述: '冰系与丹道，独特组合', 稀有度: '传说' },\n    }),\n    体质库: z.record(z.string().describe('体质名'), PhysiqueSchema).prefault({\n        // ===== 凡体 =====\n        凡体: { 品质: '凡体', 特性描述: '普通凡人体质，无特殊之处', 优势: '无', 稀有度: '常见' },\n        // ===== 灵体 =====\n        玄冰灵体: { 品质: '灵体', 特性描述: '天生亲近冰属性，修炼冰系功法事半功倍', 优势: '冰系法术威力+50%，冰系抗性+80%', 劣势: '火系抗性-30%', 稀有度: '罕见' },\n        离火之体: { 品质: '灵体', 特性描述: '天生火焰体质，修炼火系功法速度极快', 优势: '火系法术威力+50%，火系抗性+80%', 劣势: '水系抗性-30%', 稀有度: '罕见' },\n        木灵之体: { 品质: '灵体', 特性描述: '亲近草木，拥有强大恢复能力', 优势: '恢复速度+100%，木系法术威力+50%', 劣势: '金系抗性-30%', 稀有度: '罕见' },\n        天籁之体: { 品质: '灵体', 特性描述: '天生音律体质，可用音律治愈心魔', 优势: '音律神通，治愈心魔', 劣势: '战斗力较弱', 稀有度: '罕见' },\n        花妖之体: { 品质: '灵体', 特性描述: '花妖化形，容貌倾城，天生魅惑', 优势: '魅惑能力，控制花草', 劣势: '离开灵气充沛之地会虚弱', 稀有度: '稀有' },\n        // ===== 道体 =====\n        朱雀血脉: { 品质: '道体', 特性描述: '朱雀神兽血脉，可涅槃重生', 优势: '火系法术威力+100%，涅槃能力', 劣势: '过于骄傲容易轻敌', 稀有度: '传说' },\n        真龙血脉: { 品质: '道体', 特性描述: '真龙血脉，身体素质远超常人', 优势: '身体素质+200%，龙族神通', 劣势: '容易被龙族克制', 稀有度: '传说' },\n        先天战体: { 品质: '道体', 特性描述: '天生战斗体质，战斗天赋极高', 优势: '战斗力+100%，战意凌厉', 劣势: '不擅长其他方面', 稀有度: '传说' },\n        梦魇之体: { 品质: '道体', 特性描述: '可操控梦境，擅长幻术', 优势: '幻术神通，情报收集', 劣势: '正面战斗力一般，怕光明属性', 稀有度: '传说' },\n        雪魂之体: { 品质: '道体', 特性描述: '雪域神兽转世，冰系至强', 优势: '冰系法术威力+150%，雪域神通', 劣势: '前世道伤，修为受限', 稀有度: '传说' },\n        // ===== 圣体 =====\n        混沌圣体: { 品质: '圣体', 特性描述: '回归混沌本源，包容万物', 优势: '可修炼任何功法，无属性限制', 劣势: '修炼初期缓慢', 稀有度: '传说' },\n        先天道体: { 品质: '圣体', 特性描述: '先天与道合一，悟性无双', 优势: '悟性+300%，修炼速度+200%', 劣势: '容易遭天妒', 稀有度: '传说' },\n        不灭金身: { 品质: '圣体', 特性描述: '肉身不灭，防御无敌', 优势: '防御力+500%，几乎不死', 劣势: '速度较慢', 稀有度: '传说' },\n        // ===== 神体 =====\n        轮回之体: { 品质: '神体', 特性描述: '掌控轮回，{{user}}专属体质', 优势: '轮回神通，可斩因果', 劣势: '遭天道忌惮', 稀有度: '传说' },\n        时空之体: { 品质: '神体', 特性描述: '掌控时空，万古难遇', 优势: '时空神通，逆转因果', 劣势: '消耗极大', 稀有度: '传说' },\n    }),\n    本尊: z\n        .object({\n        等级: z.coerce.number().transform(v => _.clamp(v, 1, 36)),\n        修为: z.coerce.number().transform(v => Math.max(0, v)),\n        灵根: z.string().prefault('五行杂灵根'),\n        体质: z.string().prefault('凡体'),\n        功法: z.string().prefault('无'),\n        本命兵器: z.string().prefault('无'),\n        神通列表: z.record(z.string().describe('神通名'), z.string().describe('神通描述')).prefault({}),\n        灵石: z.coerce.number().transform(v => Math.max(0, v)),\n        已活岁月: z.coerce.number().transform(v => Math.max(0, v)),\n        尝试突破: z.boolean().prefault(false),\n        行踪: z.object({\n            当前区域: z.string().prefault('未知之地'),\n            所属层级: z.string().optional(),\n            环境描述: z.string().optional(),\n            危险度: z.coerce.number().optional(),\n            可用通道: z.array(z.string()).optional(),\n            导航信息: z.string().optional(),\n        }),\n        身份: z.object({\n            姓名: z.string().prefault('无名氏'),\n            宗门: z.string().prefault('散修'),\n            出身: z.string().prefault('凡人'),\n        }),\n        背包: z\n            .record(z.string().describe('物品名'), ItemSchema)\n            .prefault({})\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n        法宝: z\n            .record(z.string().describe('法宝名'), ItemSchema)\n            .prefault({})\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n        杂物袋: z\n            .record(z.string().describe('杂物名'), ItemSchema)\n            .prefault({})\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    })\n        .transform(data => {\n        const level = data.等级;\n        const 突破阈值 = REALM_THRESHOLDS[level - 1] ?? 100;\n        const 寿元上限 = REALM_LIFESPANS[level - 1] ?? 100;\n        const majorIdx = Math.floor((level - 1) / 4);\n        const minorIdx = (level - 1) % 4;\n        const 境界描述 = `${REALM_NAMES[majorIdx] ?? '练气'}${REALM_STAGES[minorIdx] ?? '初期'}`;\n        const 寿元状态 = `${data.已活岁月}/${寿元上限}`;\n        const 状态 = data.尝试突破 ? '突破中' : data.修为 >= 突破阈值 ? '瓶颈期' : '修炼中';\n        const 进度 = `${((data.修为 / 突破阈值) * 100).toFixed(1)}%`;\n        return {\n            ...data,\n            突破阈值,\n            寿元上限,\n            境界描述,\n            寿元状态,\n            状态,\n            进度,\n        };\n    }),\n    红颜角色库: z.record(z.string().describe('角色名'), z.object({\n        等级: z.coerce.number().transform(v => _.clamp(v, 1, 36)),\n        灵根: z.string(),\n        体质: z.string(),\n        年龄: z.string().describe('如: 24岁 或 外表26岁,实际218岁'),\n        所属: z.string(),\n        功法: z.string(),\n        本命兵器: z.string(),\n        神通: z.array(z.string()).prefault([]),\n        性格: z.string(),\n        背景: z.string(),\n        特殊设定: z.string().optional(),\n        角色类型: z.enum(['核心红颜', '重要红颜', '次要红颜']),\n    })).prefault({\n        凌寒镜: {\n            等级: 11,\n            灵根: '变异冰灵根(极品)',\n            体质: '玄冰灵体',\n            年龄: '24岁',\n            所属: '万法宗·问道峰真传弟子',\n            功法: '《玄冰诀》(地阶上品)、《心镜明悟诀》(天阶下品)',\n            本命兵器: '北冥天晶弓（灵器上品）',\n            神通: ['冰镜映心', '千里冰封', '心如明镜'],\n            性格: '清冷孤绝 | 心如明镜 | 不染尘埃 | 内心细腻 | 重情重义',\n            背景: '玄冰门世家覆灭后投奔万法宗,天生心镜能力可看穿人心虚伪,二十岁突破金丹成为问道峰百年来最年轻真传',\n            特殊设定: '心镜能力让她看透太多人心险恶导致内心孤独,心镜若被情绪波动影响会失效',\n            角色类型: '核心红颜',\n        },\n        虞汐颜: {\n            等级: 12,\n            灵根: '水/阴阳变异灵根',\n            体质: '阴阳双鱼体',\n            年龄: '化形3年(本体存在万载)',\n            所属: '散修(实为{{user}}的随身玉佩)',\n            功法: '《双生造化诀》(天阶极品)、《阴阳流转经》',\n            本命兵器: '阴阳双鱼佩(本体,可化作护盾或利刃)',\n            神通: ['枯木逢春(虞汐)', '夺命红妆(虞颜)', '双鱼游梦', '阴阳轮转'],\n            性格: '虞汐:温柔治愈|天真纯善|胆小软萌; 虞颜:腹黑毒舌|傲娇护短|杀伐果断',\n            背景: '上古大能遗留的阴阳双鱼佩,吸纳天地灵气万载化形,一体双魂(虞汐/虞颜),被{{user}}唤醒后认主',\n            特殊设定: '一体双魂可自由切换,虞汐代表生与善擅长治愈,虞颜代表死与恶擅长杀伐,本体双鱼佩是上古仙府钥匙,可在玉佩形态和人形态间切换',\n            角色类型: '核心红颜',\n        },\n        白清弦: {\n            等级: 29,\n            灵根: '金天灵根(天灵根)',\n            体质: '先天剑体',\n            年龄: '外表30岁,实际328岁',\n            所属: '散修·剑道宗师(可设定为任意宗门长老或客卿)',\n            功法: '《剑意通神》(仙阶)、《天音剑诀》(天阶上品)',\n            本命兵器: '清弦琴剑(灵宝上品,琴剑合一)',\n            神通: ['琴剑双杀', '剑意如歌', '万剑归心'],\n            性格: '清冷出尘 | 琴心剑胆 | 慈悲温柔 | 护短深情 | 暗藏执念',\n            背景: '修仙界闻名的白衣剑仙,琴剑双修的传奇人物,年少成名百岁化神,剑道天赋冠绝当代,白衣如雪抱琴持剑飘然若仙',\n            特殊设定: '真实境界为大乘初期(等级29),但隐藏实力显示为化神后期(等级19);琴剑双绝剑道造诣极高,琴音可辅助可杀敌,抚琴时眼神温柔拔剑时杀意凛然,对{{user}}有禁忌之情,身份灵活可为任意宗门长老或散修',\n            角色类型: '核心红颜',\n        },\n        焰绯月: {\n            等级: 12,\n            灵根: '变异离火灵根(极品)',\n            体质: '朱雀血脉',\n            年龄: '25岁',\n            所属: '南炎离火宫·圣女',\n            功法: '《朱雀涅槃经》(天阶上品)',\n            本命兵器: '绯月神弓(法宝上品)',\n            神通: ['离火焚天', '朱雀真身', '凤凰涅槃'],\n            性格: '骄傲自信 | 热情如火 | 直来直去 | 好胜心强 | 重视荣誉',\n            背景: '南炎离火宫圣女,朱雀血脉觉醒者,天生骄傲自视甚高,好胜心强',\n            特殊设定: '火系法术威力极强远程攻击冠绝同辈,但过于骄傲容易轻敌且防御相对较弱',\n            角色类型: '重要红颜',\n        },\n        幻千丝: {\n            等级: 13,\n            灵根: '暗幻双灵根',\n            体质: '梦魇之体',\n            年龄: '外表20岁,实际未知',\n            所属: '散修·幽冥修士',\n            功法: '《织梦天罗》(天阶中品)',\n            本命兵器: '千丝罗网(灵宝下品)',\n            神通: ['织梦为笼', '心魔幻境', '千丝束缚'],\n            性格: '神秘莫测 | 亦正亦邪 | 难以捉摸 | 玩世不恭 | 好奇心强',\n            背景: '身份神秘的幽冥修士,擅长幻术和梦境操控,行踪不定立场不明',\n            特殊设定: '擅长幻术心理战情报收集暗杀和潜入,但正面战斗力一般且怕光明属性克制',\n            角色类型: '重要红颜',\n        },\n        花想容: {\n            等级: 8,\n            灵根: '木灵根',\n            体质: '花妖之体',\n            年龄: '外表12岁',\n            所属: '建木宗·弟子',\n            功法: '《百花真经》(地阶下品)',\n            本命兵器: '牡丹花瓣(法器)',\n            神通: ['花海领域', '治愈花粉', '魅惑之香'],\n            性格: '天真烂漫 | 容色倾城 | 单纯可爱 | 好奇心强 | 依赖性强',\n            背景: '千年牡丹花妖化形因缘际会拜入建木宗,天性单纯不知人心险恶,容貌倾城',\n            特殊设定: '控制花草治愈能力容貌倾城天生魅惑,但战斗经验不足过于单纯容易被骗离开灵气充沛之地会虚弱',\n            角色类型: '次要红颜',\n        },\n        敖清霜: {\n            等级: 14,\n            灵根: '水龙双灵根',\n            体质: '真龙血脉',\n            年龄: '150岁(外表20岁)',\n            所属: '北冥龙宫·三公主',\n            功法: '《沧海龙吟》(天阶上品)',\n            本命兵器: '龙鳞护甲(灵宝中品)',\n            神通: ['龙族变化', '呼风唤雨', '龙威震慑'],\n            性格: '高贵优雅 | 腹黑狡黠 | 好奇心强 | 向往自由 | 喜欢冒险',\n            背景: '北冥龙宫三公主真龙血脉,厌倦宫廷生活化名敖灵儿混入人间历练',\n            特殊设定: '龙族神通水系法术身体素质远超人类寿元极长,但害怕身份暴露且不擅长隐藏情绪容易露馅',\n            角色类型: '次要红颜',\n        },\n    }),\n    红颜: z.record(z.string().describe('红颜名'), z.object({\n        等级: z.coerce.number().transform(v => _.clamp(v, 1, 36)).prefault(1),\n        修为: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        灵根: z.string().prefault('五行杂灵根'),\n        体质: z.string().prefault('凡体'),\n        功法: z.string().prefault('无'),\n        本命兵器: z.string().prefault('无'),\n        神通列表: z.record(z.string().describe('神通名'), z.string().describe('神通描述')).prefault({}),\n        灵石: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        已活岁月: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        尝试突破: z.boolean().prefault(false),\n        好感度: z.coerce.number().transform(v => _.clamp(v, -100, 100)).prefault(0),\n        关系: z.string().prefault('陌生人'),\n        重要性: z.string().prefault('路人'),\n    })\n        .transform(data => {\n        const level = data.等级;\n        const 突破阈值 = REALM_THRESHOLDS[level - 1] ?? 100;\n        const 寿元上限 = REALM_LIFESPANS[level - 1] ?? 100;\n        const majorIdx = Math.floor((level - 1) / 4);\n        const minorIdx = (level - 1) % 4;\n        const 境界描述 = `${REALM_NAMES[majorIdx] ?? '练气'}${REALM_STAGES[minorIdx] ?? '初期'}`;\n        const 寿元状态 = `${data.已活岁月}/${寿元上限}`;\n        const 状态 = data.尝试突破 ? '突破中' : data.修为 >= 突破阈值 ? '瓶颈期' : '修炼中';\n        const 进度 = `${((data.修为 / 突破阈值) * 100).toFixed(1)}%`;\n        return {\n            ...data,\n            突破阈值,\n            寿元上限,\n            境界描述,\n            寿元状态,\n            状态,\n            进度,\n        };\n    })).prefault({}),\n    NPC图鉴: z.record(z.string().describe('NPC名'), z.object({\n        等级: z.coerce.number().transform(v => _.clamp(v, 1, 36)).prefault(1),\n        修为: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        灵根: z.string().prefault('五行杂灵根'),\n        体质: z.string().prefault('凡体'),\n        功法: z.string().prefault('无'),\n        本命兵器: z.string().prefault('无'),\n        神通列表: z.record(z.string().describe('神通名'), z.string().describe('神通描述')).prefault({}),\n        灵石: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        已活岁月: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        尝试突破: z.boolean().prefault(false),\n        所在宗门: z.string().prefault('散修'),\n    })).prefault({}),\n    任务列表: z.record(z.string().describe('任务名'), z.object({\n        类型: z.enum(['主线', '支线', '每日', '临危受命']),\n        说明: z.string().describe('面向{{user}}的任务背景或细则'),\n        目标: z.string().describe('明确可执行的目标描述'),\n        奖励: z.string(),\n        惩罚: z.string().describe('失败后触发的负面效果'),\n        状态: z.enum(['进行中', '已完成', '已失败']).prefault('进行中'),\n    })).prefault({}),\n    声望系统: z.record(z.string().describe('势力名'), z.object({\n        声望值: z.coerce.number().transform(v => _.clamp(v, -100, 100)),\n        称号: z.string().optional(),\n        关系描述: z.string(),\n    })).prefault({}),\n});\n// 配置常量\nexport const CONFIG = {\n    REALMS: {\n        MAJOR: REALM_NAMES,\n        MINOR: REALM_STAGES,\n    },\n    ELEMENTS: {\n        火: { effect: '灼烧', visual: '烈焰', nature: '爆裂', color: '#ff4444' },\n        水: { effect: '缠绕', visual: '激流', nature: '柔韧', color: '#4488ff' },\n        冰: { effect: '冻结', visual: '寒霜', nature: '极寒', color: '#88ddff' },\n        雷: { effect: '麻痹', visual: '紫电', nature: '狂暴', color: '#aa44ff' },\n        风: { effect: '切割', visual: '罡风', nature: '无形', color: '#88ff88' },\n        土: { effect: '镇压', visual: '岩铠', nature: '厚重', color: '#aa8844' },\n        木: { effect: '寄生', visual: '藤蔓', nature: '生生不息', color: '#44aa44' },\n        金: { effect: '穿透', visual: '锐金', nature: '锋利', color: '#ffdd44' },\n        暗: { effect: '腐蚀', visual: '黑雾', nature: '诡谲', color: '#442244' },\n        光: { effect: '净化', visual: '圣辉', nature: '神圣', color: '#ffffaa' },\n        混沌: { effect: '湮灭', visual: '灰光', nature: '虚无', color: '#888888' },\n    },\n};\n// 获取灵根元素颜色\nexport function getRootColor(root) {\n    for (const [elem, data] of Object.entries(CONFIG.ELEMENTS)) {\n        if (root.includes(elem)) {\n            return data.color;\n        }\n    }\n    return '#aaaaaa'; // 默认灰色\n}\n// 获取境界等级颜色\nexport function getRealmColor(level) {\n    const majorIdx = Math.floor((level - 1) / 4);\n    const colors = [\n        '#888888', // 练气 - 灰色\n        '#44aa44', // 筑基 - 绿色\n        '#4488ff', // 金丹 - 蓝色\n        '#aa44ff', // 元婴 - 紫色\n        '#ff4444', // 化神 - 红色\n        '#ffaa00', // 炼虚 - 橙色\n        '#ffdd44', // 合体 - 金色\n        '#ffffff', // 大乘 - 白色\n        '#ff88ff', // 渡劫 - 粉色\n    ];\n    return colors[majorIdx] || '#888888';\n}\n// 获取危险度颜色\nexport function getDangerColor(danger) {\n    if (danger >= 90)\n        return '#ff0000';\n    if (danger >= 70)\n        return '#ff4400';\n    if (danger >= 50)\n        return '#ff8800';\n    if (danger >= 30)\n        return '#ffcc00';\n    return '#44aa44';\n}\n","// ============================================================================\n// 角色图片资源配置 (Character Assets Configuration)\n// 在这里配置所有角色的图片资源（正面和背面）\n// ============================================================================\n\n/**\n * 单个表情的图片配置\n */\nexport interface ExpressionImages {\n    /** 正面图片 URL */\n    front: string;\n    /** 背面图片 URL（可选，如果不填则使用正面图片） */\n    back?: string;\n}\n\n/**\n * 角色图片资源配置\n * 格式: { 角色名: { 表情代号: { front: 正面URL, back: 背面URL } } }\n *\n * 使用方法:\n * 1. 为每个角色创建一个对象\n * 2. 为每个表情/状态配置对应的正面和背面图片URL\n * 3. AI 输出时会根据 img_code 自动匹配对应的图片\n * 4. 如果不需要不同的背面图片，可以只填写 front，或使用简写形式\n */\nexport const CHARACTER_ASSETS: Record<string, Record<string, ExpressionImages | string>> = {\n    // ============================================================================\n    // 示例角色：孟十七\n    // ============================================================================\n    孟十七: {\n        // 完整配置示例（有不同的正面和背面）\n        normal: {\n            front: 'https://files.catbox.moe/c1su29.jpg', // 日常/平静 - 正面\n            back: 'https://files.catbox.moe/c1su29.jpg', // 日常/平静 - 背面（可以是不同的图片）\n        },\n        // 简写形式（正面和背面使用相同图片）\n        shy: 'https://files.catbox.moe/8doe0f.jpg', // 害羞/脸红\n        smile: 'https://files.catbox.moe/8doe0f.jpg', // 微笑/开心\n        angry: 'https://files.catbox.moe/c1su29.jpg', // 生气/鼓嘴\n        cry: 'https://files.catbox.moe/c1su29.jpg', // 哭泣/委屈\n        surprise: 'https://files.catbox.moe/8doe0f.jpg', // 惊讶/瞪眼\n    },\n\n    // ============================================================================\n    // 白清弦 - 剑道宗师\n    // ============================================================================\n    白清弦: {\n        // 随机选择正面和背面图片\n        normal: {\n            front: 'random_front', // 特殊标记，表示从正面图片池中随机选择\n            back: 'random_back',   // 特殊标记，表示从背面图片池中随机选择\n        },\n    },\n\n    // ============================================================================\n    // 虞汐颜 - 一体双魂（虞汐白头发/虞颜黑头发）\n    // ============================================================================\n    虞汐颜: {\n        // 随机选择正面和背面图片\n        // 特殊逻辑：正面虞汐时背面虞颜，正面虞颜时背面虞汐\n        normal: {\n            front: 'random_dual_front', // 特殊标记，随机选择虞汐或虞颜的正面\n            back: 'random_dual_back',   // 特殊标记，自动选择另一个魂体的背面\n        },\n    },\n\n    // ============================================================================\n    // 添加更多角色示例\n    // ============================================================================\n    // 角色名2: {\n    //   // 完整配置（不同的正面和背面）\n    //   normal: {\n    //     front: '正面图片URL',\n    //     back: '背面图片URL',\n    //   },\n    //   // 简写配置（正面和背面相同）\n    //   happy: '图片URL',\n    //   sad: '图片URL',\n    //   // ... 更多表情\n    // },\n};\n\n/**\n * 角色图片池 - 用于随机选择\n * 格式: { 角色名: { front: [正面图片URL列表], back: [背面图片URL列表] } }\n */\nexport const CHARACTER_IMAGE_POOLS: Record<string, { front: string[]; back: string[] }> = {\n    白清弦: {\n        front: [\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦1.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦2.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦3.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦4.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦5.png',\n        ],\n        back: [\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦6.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦7.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦8.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦9.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦10.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦11.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦12.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦13.png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/白清弦14.png',\n        ],\n    },\n    虞汐颜: {\n        // 虞汐的图片（白头发）\n        虞汐_front: [\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞汐 (1).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞汐 (15).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞汐 (16).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞汐 (6).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞汐 (5).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞汐 (3).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞汐 (2).png',\n        ],\n        虞汐_back: [\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞汐 (17).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞汐 (8).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞汐 (7).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞汐 (4).png',\n        ],\n        // 虞颜的图片（黑头发）\n        虞颜_front: [\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (15).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (14).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (13).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (12).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (11).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (10).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (9).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (8).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (7).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (6).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (1).png',\n        ],\n        虞颜_back: [\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (5).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (4).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (3).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (2).png',\n            'https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/虞颜 (18).png',\n        ],\n    } as any,\n};\n\n/**\n * 默认表情 - 当 AI 输出的 img_code 不存在时使用\n */\nexport const DEFAULT_EXPRESSION = 'normal';\n\n/**\n * 默认卡片背景 - 当角色没有配置图片时使用的占位图\n */\nexport const DEFAULT_PLACEHOLDER = 'https://files.catbox.moe/placeholder.jpg';\n\n/**\n * 从图片池中随机选择一张图片\n * 虞汐颜专用：缓存当前选择的魂体，以便正面和背面使用不同的魂体\n */\nlet cachedDualSoul: '虞汐' | '虞颜' | null = null;\n\n/**\n * 会话缓存：记录已经为虞汐颜生成过的卡片\n * 避免在同一个消息楼层中生成多张虞汐颜卡片\n */\nlet dualSoulSessionUsed = false;\n\nfunction getRandomImage(characterName: string, type: 'front' | 'back'): string {\n    const pool = CHARACTER_IMAGE_POOLS[characterName];\n    if (!pool) {\n        console.warn(`[图鉴] 未找到角色 \"${characterName}\" 的图片池`);\n        return DEFAULT_PLACEHOLDER;\n    }\n\n    const images = pool[type];\n    if (!images || images.length === 0) {\n        console.warn(`[图鉴] 角色 \"${characterName}\" 的 ${type} 图片池为空`);\n        return DEFAULT_PLACEHOLDER;\n    }\n\n    // 随机选择一张图片\n    const randomIndex = Math.floor(Math.random() * images.length);\n    return images[randomIndex];\n}\n\n/**\n * 虞汐颜专用：获取一体双魂的图片和名字\n * 正面虞汐时背面虞颜，正面虞颜时背面虞汐\n *\n * 重要：每次调用此函数时，只会生成一对卡片（正面+背面）\n * 如果已经生成过，则返回 null，避免重复生成\n */\nfunction getDualSoulImage(type: 'front' | 'back'): { url: string; soulName: string } | null {\n    const pool = CHARACTER_IMAGE_POOLS['虞汐颜'] as any;\n    if (!pool) {\n        console.warn(`[图鉴] 未找到虞汐颜的图片池`);\n        return { url: DEFAULT_PLACEHOLDER, soulName: '虞汐颜' };\n    }\n\n    if (type === 'front') {\n        // 如果已经生成过虞汐颜卡片，返回 null\n        if (dualSoulSessionUsed) {\n            console.info(`[图鉴] 虞汐颜卡片已生成，跳过重复生成`);\n            return null;\n        }\n\n        // 标记为已使用\n        dualSoulSessionUsed = true;\n\n        // 正面：随机选择虞汐或虞颜\n        const soul = Math.random() < 0.5 ? '虞汐' : '虞颜';\n        cachedDualSoul = soul;\n        const images = pool[`${soul}_front`];\n        if (!images || images.length === 0) {\n            console.warn(`[图鉴] 虞汐颜的 ${soul} 正面图片池为空`);\n            return { url: DEFAULT_PLACEHOLDER, soulName: soul };\n        }\n        const randomIndex = Math.floor(Math.random() * images.length);\n        console.info(`[图鉴] 虞汐颜正面选择: ${soul}`);\n        return { url: images[randomIndex], soulName: soul };\n    } else {\n        // 背面：使用另一个魂体\n        const soul = cachedDualSoul === '虞汐' ? '虞颜' : '虞汐';\n        const images = pool[`${soul}_back`];\n        if (!images || images.length === 0) {\n            console.warn(`[图鉴] 虞汐颜的 ${soul} 背面图片池为空`);\n            return { url: DEFAULT_PLACEHOLDER, soulName: soul };\n        }\n        const randomIndex = Math.floor(Math.random() * images.length);\n        console.info(`[图鉴] 虞汐颜背面选择: ${soul}`);\n        return { url: images[randomIndex], soulName: soul };\n    }\n}\n\n/**\n * 标准化表情配置（将简写形式转换为完整形式）\n * 对于虞汐颜，还会返回对应的魂体名字\n *\n * 如果虞汐颜已经生成过卡片，则返回 null\n */\nfunction normalizeExpressionImages(config: ExpressionImages | string, characterName: string): (ExpressionImages & { frontName?: string; backName?: string }) | null {\n    if (typeof config === 'string') {\n        return { front: config, back: config };\n    }\n\n    // 处理虞汐颜的特殊逻辑\n    if (characterName === '虞汐颜') {\n        if (config.front === 'random_dual_front') {\n            const frontResult = getDualSoulImage('front');\n\n            // 如果返回 null，说明已经生成过了\n            if (frontResult === null) {\n                return null;\n            }\n\n            const backResult = getDualSoulImage('back');\n            if (backResult === null) {\n                return null;\n            }\n\n            return {\n                front: frontResult.url,\n                back: backResult.url,\n                frontName: frontResult.soulName,\n                backName: backResult.soulName\n            };\n        }\n    }\n\n    // 处理普通随机图片\n    let front = config.front;\n    let back = config.back ?? config.front;\n\n    if (front === 'random_front') {\n        front = getRandomImage(characterName, 'front');\n    }\n    if (back === 'random_back') {\n        back = getRandomImage(characterName, 'back');\n    }\n\n    return { front, back };\n}\n\n\n/**\n * 获取角色正面图片URL\n * @param characterName 角色名\n * @param imgCode 表情代号\n * @returns 正面图片URL\n */\nexport function getCharacterImage(characterName: string, imgCode: string): string {\n    const character = CHARACTER_ASSETS[characterName];\n    if (!character) {\n        console.warn(`[图鉴] 未找到角色 \"${characterName}\" 的图片配置`);\n        return DEFAULT_PLACEHOLDER;\n    }\n\n    const config = character[imgCode] ?? character[DEFAULT_EXPRESSION];\n    if (!config) {\n        console.warn(`[图鉴] 角色 \"${characterName}\" 没有表情 \"${imgCode}\" 的图片`);\n        return DEFAULT_PLACEHOLDER;\n    }\n\n    const normalized = normalizeExpressionImages(config, characterName);\n    return normalized ? normalized.front : DEFAULT_PLACEHOLDER;\n}\n\n/**\n * 获取角色背面图片URL\n * @param characterName 角色名\n * @param imgCode 表情代号\n * @returns 背面图片URL\n */\nexport function getCharacterBackImage(characterName: string, imgCode: string): string {\n    const character = CHARACTER_ASSETS[characterName];\n    if (!character) {\n        console.warn(`[图鉴] 未找到角色 \"${characterName}\" 的图片配置`);\n        return DEFAULT_PLACEHOLDER;\n    }\n\n    const config = character[imgCode] ?? character[DEFAULT_EXPRESSION];\n    if (!config) {\n        console.warn(`[图鉴] 角色 \"${characterName}\" 没有表情 \"${imgCode}\" 的图片`);\n        return DEFAULT_PLACEHOLDER;\n    }\n\n    const normalized = normalizeExpressionImages(config, characterName);\n    return normalized ? normalized.back! : DEFAULT_PLACEHOLDER;\n}\n\n/**\n * 获取角色正面和背面图片URL\n * 对于虞汐颜，会返回对应的魂体名字\n *\n * 重要：每次页面加载时，虞汐颜只会生成一张卡片\n * @param characterName 角色名\n * @param frontImgCode 正面表情代号\n * @param backImgCode 背面表情代号（可选，默认与正面相同）\n * @returns { front: 正面URL, back: 背面URL, frontName?: 正面名字, backName?: 背面名字 } 或 null（如果虞汐颜已生成）\n */\nexport function getCharacterImages(\n    characterName: string,\n    frontImgCode: string,\n    backImgCode?: string,\n): { front: string; back: string; frontName?: string; backName?: string } | null {\n    const character = CHARACTER_ASSETS[characterName];\n    if (!character) {\n        return { front: DEFAULT_PLACEHOLDER, back: DEFAULT_PLACEHOLDER };\n    }\n\n    const config = character[frontImgCode] ?? character[DEFAULT_EXPRESSION];\n    if (!config) {\n        return { front: DEFAULT_PLACEHOLDER, back: DEFAULT_PLACEHOLDER };\n    }\n\n    const normalized = normalizeExpressionImages(config, characterName);\n\n    // 如果返回 null（虞汐颜已生成），则返回 null\n    if (normalized === null) {\n        return null;\n    }\n\n    return {\n        front: normalized.front,\n        back: normalized.back!,\n        frontName: normalized.frontName,\n        backName: normalized.backName\n    };\n}\n\n/**\n * 重置虞汐颜的会话缓存\n * 在新的消息楼层或页面重新加载时调用\n */\nexport function resetDualSoulSession() {\n    dualSoulSessionUsed = false;\n    cachedDualSoul = null;\n    console.info('[图鉴] 虞汐颜会话缓存已重置');\n}\n\n/**\n * 获取角色所有可用的表情列表\n * @param characterName 角色名\n * @returns 表情代号列表\n */\nexport function getAvailableExpressions(characterName: string): string[] {\n    const character = CHARACTER_ASSETS[characterName];\n    return character ? Object.keys(character) : [];\n}\n\n/**\n * 检查角色是否已配置\n * @param characterName 角色名\n * @returns 是否已配置\n */\nexport function isCharacterConfigured(characterName: string): boolean {\n    return characterName in CHARACTER_ASSETS;\n}","// ============================================================================\r\n// 踏月寻仙 - 主题配置系统 (Theme Configuration System)\r\n// 版本: 1.0\r\n// ============================================================================\r\n\r\n/**\r\n * 主题配置接口\r\n */\r\nexport interface Theme {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    colors: {\r\n        // 主要背景色\r\n        bgPrimary: string;\r\n        bgSecondary: string;\r\n        // 边框颜色\r\n        border: string;\r\n        borderActive: string;\r\n        // 文字颜色\r\n        textPrimary: string;\r\n        textSecondary: string;\r\n        textAccent: string;\r\n        // 强调色\r\n        accent: string;\r\n        accentGlow: string;\r\n        // 按钮颜色\r\n        buttonBg: string;\r\n        buttonHover: string;\r\n        buttonActive: string;\r\n        // 进度条颜色\r\n        progressBg: string;\r\n        // 头部颜色\r\n        headerBg: string;\r\n        // 标签颜色\r\n        tabBg: string;\r\n        tabActive: string;\r\n        // 底部颜色\r\n        footerBg: string;\r\n    };\r\n    patterns: {\r\n        // 背景图案 (CSS background-image)\r\n        overlay?: string;\r\n        // 装饰图案类名\r\n        decoration?: string;\r\n    };\r\n}\r\n\r\n/**\r\n * CSS 图案生成器\r\n */\r\nexport const patterns = {\r\n    // 祥云图片 - 用于主要装饰\r\n    cloudImage: `url(https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/古风祥云云朵85.png)`,\r\n\r\n    // 祥云图案（多层叠加）- 用于丰富背景层次\r\n    cloudsMulti: `\r\n    url(https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/古风祥云云朵85.png),\r\n    url(https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/古风祥云云朵85.png),\r\n    url(https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/古风祥云云朵85.png),\r\n    url(https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/古风祥云云朵85.png),\r\n    url(https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/古风祥云云朵85.png)\r\n  `,\r\n\r\n    // 祥云 + 星辰组合\r\n    cloudsWithStars: `\r\n    url(https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/古风祥云云朵85.png),\r\n    url(https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/古风祥云云朵85.png),\r\n    url(https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/古风祥云云朵85.png),\r\n    url(https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/古风祥云云朵85.png),\r\n    url(https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/古风祥云云朵85.png),\r\n    radial-gradient(circle at 25% 20%, rgba(255, 255, 255, 0.15) 1px, transparent 1px),\r\n    radial-gradient(circle at 75% 35%, rgba(255, 255, 255, 0.12) 1.5px, transparent 1.5px),\r\n    radial-gradient(circle at 35% 75%, rgba(255, 255, 255, 0.1) 1px, transparent 1px)\r\n  `,\r\n\r\n    // 星辰图案\r\n    stars: `\r\n    radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.3) 1px, transparent 1px),\r\n    radial-gradient(circle at 80% 60%, rgba(255, 255, 255, 0.25) 1.5px, transparent 1.5px),\r\n    radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.2) 1px, transparent 1px),\r\n    radial-gradient(circle at 60% 20%, rgba(255, 255, 255, 0.15) 2px, transparent 2px)\r\n  `,\r\n\r\n    // 纹理图案\r\n    texture: `\r\n    repeating-linear-gradient(\r\n      45deg,\r\n      transparent,\r\n      transparent 10px,\r\n      rgba(255, 255, 255, 0.03) 10px,\r\n      rgba(255, 255, 255, 0.03) 20px\r\n    )\r\n  `,\r\n\r\n    // 山水图案\r\n    landscape: `\r\n    linear-gradient(180deg,\r\n      transparent 0%,\r\n      rgba(255, 255, 255, 0.02) 30%,\r\n      rgba(255, 255, 255, 0.05) 50%,\r\n      rgba(255, 255, 255, 0.02) 70%,\r\n      transparent 100%\r\n    )\r\n  `,\r\n\r\n    // 莲花图案\r\n    lotus: `\r\n    radial-gradient(ellipse 120px 80px at 50% 50%, rgba(255, 255, 255, 0.08) 0%, transparent 50%)\r\n  `,\r\n};\r\n\r\n/**\r\n * 预设主题列表\r\n */\r\nexport const themes: Theme[] = [\r\n    // 默认主题 - 玄青\r\n    {\r\n        id: 'default',\r\n        name: '玄青仙境',\r\n        description: '深邃玄青，如夜空星辰',\r\n        colors: {\r\n            bgPrimary: 'linear-gradient(180deg, rgba(49, 66, 117, 0.95) 0%, rgba(15, 20, 35, 0.98) 100%)',\r\n            bgSecondary: 'rgba(30, 40, 60, 0.5)',\r\n            border: 'rgba(100, 150, 200, 0.3)',\r\n            borderActive: 'rgba(100, 150, 200, 0.6)',\r\n            textPrimary: '#e0e8f0',\r\n            textSecondary: '#8090a0',\r\n            textAccent: '#a0b8d0',\r\n            accent: '#88aacc',\r\n            accentGlow: 'rgba(100, 150, 255, 0.3)',\r\n            buttonBg: 'rgba(100, 150, 200, 0.2)',\r\n            buttonHover: 'rgba(100, 150, 200, 0.3)',\r\n            buttonActive: 'linear-gradient(135deg, rgba(80, 120, 180, 0.3) 0%, rgba(100, 80, 160, 0.3) 100%)',\r\n            progressBg: 'rgba(50, 60, 80, 0.8)',\r\n            headerBg: 'linear-gradient(90deg, rgba(60, 80, 120, 0.4) 0%, rgba(80, 60, 100, 0.4) 100%)',\r\n            tabBg: 'rgba(30, 40, 60, 0.5)',\r\n            tabActive: 'linear-gradient(135deg, rgba(80, 120, 180, 0.3) 0%, rgba(100, 80, 160, 0.3) 100%)',\r\n            footerBg: 'rgba(20, 30, 45, 0.8)',\r\n        },\r\n        patterns: {\r\n            overlay: patterns.cloudsWithStars,\r\n        },\r\n    },\r\n\r\n    // 紫霞主题\r\n    {\r\n        id: 'purple',\r\n        name: '紫霞仙踪',\r\n        description: '紫气东来，霞光万道',\r\n        colors: {\r\n            bgPrimary: 'linear-gradient(180deg, rgba(80, 40, 100, 0.95) 0%, rgba(30, 15, 40, 0.98) 100%)',\r\n            bgSecondary: 'rgba(50, 30, 70, 0.5)',\r\n            border: 'rgba(150, 100, 200, 0.3)',\r\n            borderActive: 'rgba(180, 120, 220, 0.6)',\r\n            textPrimary: '#f0e0f8',\r\n            textSecondary: '#a080b0',\r\n            textAccent: '#c0a0d0',\r\n            accent: '#aa88cc',\r\n            accentGlow: 'rgba(150, 100, 255, 0.4)',\r\n            buttonBg: 'rgba(150, 100, 200, 0.2)',\r\n            buttonHover: 'rgba(150, 100, 200, 0.3)',\r\n            buttonActive: 'linear-gradient(135deg, rgba(120, 80, 160, 0.3) 0%, rgba(140, 60, 180, 0.3) 100%)',\r\n            progressBg: 'rgba(60, 40, 80, 0.8)',\r\n            headerBg: 'linear-gradient(90deg, rgba(80, 50, 100, 0.4) 0%, rgba(100, 40, 120, 0.4) 100%)',\r\n            tabBg: 'rgba(50, 30, 70, 0.5)',\r\n            tabActive: 'linear-gradient(135deg, rgba(120, 80, 160, 0.3) 0%, rgba(140, 60, 180, 0.3) 100%)',\r\n            footerBg: 'rgba(30, 20, 50, 0.8)',\r\n        },\r\n        patterns: {\r\n            overlay: patterns.cloudsMulti,\r\n        },\r\n    },\r\n\r\n    // 赤炎主题\r\n    {\r\n        id: 'red',\r\n        name: '赤炎烈焰',\r\n        description: '烈火焚天，赤炎千里',\r\n        colors: {\r\n            bgPrimary: 'linear-gradient(180deg, rgba(100, 40, 40, 0.95) 0%, rgba(40, 15, 15, 0.98) 100%)',\r\n            bgSecondary: 'rgba(70, 30, 30, 0.5)',\r\n            border: 'rgba(200, 100, 100, 0.3)',\r\n            borderActive: 'rgba(220, 120, 120, 0.6)',\r\n            textPrimary: '#f8e0e0',\r\n            textSecondary: '#b08080',\r\n            textAccent: '#d0a0a0',\r\n            accent: '#cc8888',\r\n            accentGlow: 'rgba(255, 100, 100, 0.4)',\r\n            buttonBg: 'rgba(200, 100, 100, 0.2)',\r\n            buttonHover: 'rgba(200, 100, 100, 0.3)',\r\n            buttonActive: 'linear-gradient(135deg, rgba(160, 80, 80, 0.3) 0%, rgba(180, 60, 60, 0.3) 100%)',\r\n            progressBg: 'rgba(80, 40, 40, 0.8)',\r\n            headerBg: 'linear-gradient(90deg, rgba(100, 50, 50, 0.4) 0%, rgba(120, 40, 40, 0.4) 100%)',\r\n            tabBg: 'rgba(70, 30, 30, 0.5)',\r\n            tabActive: 'linear-gradient(135deg, rgba(160, 80, 80, 0.3) 0%, rgba(180, 60, 60, 0.3) 100%)',\r\n            footerBg: 'rgba(50, 20, 20, 0.8)',\r\n        },\r\n        patterns: {\r\n            overlay: patterns.cloudsMulti,\r\n        },\r\n    },\r\n\r\n    // 碧海主题\r\n    {\r\n        id: 'cyan',\r\n        name: '碧海青天',\r\n        description: '碧波荡漾，海天一色',\r\n        colors: {\r\n            bgPrimary: 'linear-gradient(180deg, rgba(40, 80, 100, 0.95) 0%, rgba(15, 30, 40, 0.98) 100%)',\r\n            bgSecondary: 'rgba(30, 60, 70, 0.5)',\r\n            border: 'rgba(100, 180, 200, 0.3)',\r\n            borderActive: 'rgba(120, 200, 220, 0.6)',\r\n            textPrimary: '#e0f0f8',\r\n            textSecondary: '#80a0b0',\r\n            textAccent: '#a0c0d0',\r\n            accent: '#88ccdd',\r\n            accentGlow: 'rgba(100, 200, 255, 0.4)',\r\n            buttonBg: 'rgba(100, 180, 200, 0.2)',\r\n            buttonHover: 'rgba(100, 180, 200, 0.3)',\r\n            buttonActive: 'linear-gradient(135deg, rgba(80, 140, 160, 0.3) 0%, rgba(60, 160, 180, 0.3) 100%)',\r\n            progressBg: 'rgba(40, 60, 80, 0.8)',\r\n            headerBg: 'linear-gradient(90deg, rgba(50, 80, 100, 0.4) 0%, rgba(40, 100, 120, 0.4) 100%)',\r\n            tabBg: 'rgba(30, 60, 70, 0.5)',\r\n            tabActive: 'linear-gradient(135deg, rgba(80, 140, 160, 0.3) 0%, rgba(60, 160, 180, 0.3) 100%)',\r\n            footerBg: 'rgba(20, 40, 50, 0.8)',\r\n        },\r\n        patterns: {\r\n            overlay: patterns.cloudsWithStars,\r\n        },\r\n    },\r\n\r\n    // 金辉主题\r\n    {\r\n        id: 'gold',\r\n        name: '金辉灿烂',\r\n        description: '金光璀璨，辉映九天',\r\n        colors: {\r\n            bgPrimary: 'linear-gradient(180deg, rgba(80, 70, 40, 0.95) 0%, rgba(30, 25, 15, 0.98) 100%)',\r\n            bgSecondary: 'rgba(60, 50, 30, 0.5)',\r\n            border: 'rgba(200, 180, 100, 0.3)',\r\n            borderActive: 'rgba(220, 200, 120, 0.6)',\r\n            textPrimary: '#f8f0e0',\r\n            textSecondary: '#b0a080',\r\n            textAccent: '#d0c0a0',\r\n            accent: '#ccaa88',\r\n            accentGlow: 'rgba(255, 200, 100, 0.4)',\r\n            buttonBg: 'rgba(200, 180, 100, 0.2)',\r\n            buttonHover: 'rgba(200, 180, 100, 0.3)',\r\n            buttonActive: 'linear-gradient(135deg, rgba(160, 140, 80, 0.3) 0%, rgba(180, 160, 60, 0.3) 100%)',\r\n            progressBg: 'rgba(60, 50, 40, 0.8)',\r\n            headerBg: 'linear-gradient(90deg, rgba(80, 70, 50, 0.4) 0%, rgba(100, 80, 40, 0.4) 100%)',\r\n            tabBg: 'rgba(60, 50, 30, 0.5)',\r\n            tabActive: 'linear-gradient(135deg, rgba(160, 140, 80, 0.3) 0%, rgba(180, 160, 60, 0.3) 100%)',\r\n            footerBg: 'rgba(40, 35, 20, 0.8)',\r\n        },\r\n        patterns: {\r\n            overlay: patterns.cloudsMulti,\r\n        },\r\n    },\r\n\r\n    // 翠竹主题\r\n    {\r\n        id: 'green',\r\n        name: '翠竹清风',\r\n        description: '竹影婆娑，清风徐来',\r\n        colors: {\r\n            bgPrimary: 'linear-gradient(180deg, rgba(40, 80, 60, 0.95) 0%, rgba(15, 30, 25, 0.98) 100%)',\r\n            bgSecondary: 'rgba(30, 60, 50, 0.5)',\r\n            border: 'rgba(100, 180, 150, 0.3)',\r\n            borderActive: 'rgba(120, 200, 170, 0.6)',\r\n            textPrimary: '#e0f8f0',\r\n            textSecondary: '#80b0a0',\r\n            textAccent: '#a0d0c0',\r\n            accent: '#88ccaa',\r\n            accentGlow: 'rgba(100, 255, 200, 0.4)',\r\n            buttonBg: 'rgba(100, 180, 150, 0.2)',\r\n            buttonHover: 'rgba(100, 180, 150, 0.3)',\r\n            buttonActive: 'linear-gradient(135deg, rgba(80, 140, 120, 0.3) 0%, rgba(60, 160, 140, 0.3) 100%)',\r\n            progressBg: 'rgba(40, 60, 50, 0.8)',\r\n            headerBg: 'linear-gradient(90deg, rgba(50, 80, 70, 0.4) 0%, rgba(40, 100, 80, 0.4) 100%)',\r\n            tabBg: 'rgba(30, 60, 50, 0.5)',\r\n            tabActive: 'linear-gradient(135deg, rgba(80, 140, 120, 0.3) 0%, rgba(60, 160, 140, 0.3) 100%)',\r\n            footerBg: 'rgba(20, 40, 35, 0.8)',\r\n        },\r\n        patterns: {\r\n            overlay: patterns.cloudsMulti,\r\n        },\r\n    },\r\n];\r\n\r\n/**\r\n * 根据ID获取主题\r\n */\r\nexport function getThemeById(id: string): Theme | undefined {\r\n    return themes.find(t => t.id === id);\r\n}\r\n\r\n/**\r\n * 获取默认主题\r\n */\r\nexport function getDefaultTheme(): Theme {\r\n    return themes[0];\r\n}","import { getCharacterImages, resetDualSoulSession } from './character-assets';\nimport { Schema } from './schema';\nimport { getDefaultTheme, getThemeById, themes } from './themes';\n/**\n * 从消息内容中解析 <visual_cards> 标签\n * @param content 消息内容\n * @returns 解析出的视觉卡片数组\n */\nfunction parseVisualCards(content) {\n    try {\n        // 匹配 <visual_cards>...</visual_cards> 标签\n        const match = content.match(/<visual_cards>\\s*([\\s\\S]*?)\\s*<\\/visual_cards>/);\n        if (!match) {\n            return [];\n        }\n        const jsonStr = match[1].trim();\n        if (!jsonStr) {\n            return [];\n        }\n        // 解析 JSON 数组\n        const cards = JSON.parse(jsonStr);\n        // 验证数据结构\n        if (!Array.isArray(cards)) {\n            console.warn('[图鉴] visual_cards 不是数组');\n            return [];\n        }\n        return cards.filter(card => card.name &&\n            card.img_code &&\n            typeof card.back_text === 'string');\n    }\n    catch (e) {\n        console.error('[图鉴] 解析 visual_cards 失败', e);\n        return [];\n    }\n}\n/**\n * 将 AI 输出的视觉卡片转换为图鉴卡片\n * @param visualCards AI 输出的视觉卡片\n * @returns 图鉴卡片数组\n */\nfunction convertToGalleryCards(visualCards) {\n    // 重置虞汐颜会话缓存\n    resetDualSoulSession();\n    const result = [];\n    for (const card of visualCards) {\n        // 使用新的 getCharacterImages 函数获取正面和背面图片\n        const images = getCharacterImages(card.name, card.img_code, card.back_img_code);\n        // 如果返回 null（虞汐颜重复），则跳过\n        if (images === null) {\n            console.info(`[图鉴] 跳过重复的 ${card.name} 卡片`);\n            continue;\n        }\n        result.push({\n            name: card.name,\n            front: images.front,\n            back: images.back,\n            backText: card.back_text || '',\n            isFlipped: false,\n            frontName: images.frontName,\n            backName: images.backName,\n        });\n    }\n    return result;\n}\nexport const useDataStore = defineStore('data', errorCatched(() => {\n    const message_id = getCurrentMessageId();\n    // 从 MVU 变量中获取 stat_data\n    const rawData = ref(null);\n    // 图鉴卡片数据\n    const galleryCards = ref([]);\n    // 卡片缓存 - 避免重复解析\n    const cardCache = new Map();\n    // 初始化数据（带重试机制）\n    const initData = (retryCount = 0) => {\n        try {\n            const variables = getVariables({ type: 'message', message_id });\n            const statData = _.get(variables, 'stat_data', null);\n            if (statData && Object.keys(statData).length > 0) {\n                // 使用 Schema.parse 来解析和验证数据\n                rawData.value = Schema.parse(statData);\n                console.info('[踏月寻仙] 成功加载变量数据', {\n                    等级: rawData.value.本尊.等级,\n                    灵根: rawData.value.本尊.灵根,\n                    体质: rawData.value.本尊.体质,\n                    功法: rawData.value.本尊.功法,\n                });\n                // 解析当前楼层消息中的 visual_cards\n                parseCurrentMessageCards();\n            }\n            else if (retryCount < 10) {\n                // 数据还没准备好，重试（增加重试次数到10次，总计最多等待约16.5秒）\n                console.info(`[踏月寻仙] 数据未就绪，${300 * (retryCount + 1)}ms后第${retryCount + 1}次重试`);\n                setTimeout(() => {\n                    initData(retryCount + 1);\n                }, 300 * (retryCount + 1)); // 递增延迟：300ms, 600ms, 900ms...\n            }\n            else {\n                console.warn('[踏月寻仙] 重试次数已用完，尝试手动触发MVU解析');\n                // 尝试手动触发MVU解析当前消息\n                tryManualParseMvuMessage();\n            }\n        }\n        catch (e) {\n            console.error('[踏月寻仙] 加载变量数据失败', e);\n            toastr.error(`加载状态栏数据失败: ${e instanceof Error ? e.message : '未知错误'}`, '踏月寻仙');\n        }\n    };\n    // 手动触发MVU解析当前消息（用于初始楼层）\n    const tryManualParseMvuMessage = async () => {\n        try {\n            // 检查MVU是否已初始化\n            await waitGlobalInitialized('Mvu');\n            // 获取当前消息内容\n            const messages = getChatMessages(message_id);\n            if (messages.length === 0) {\n                console.warn('[踏月寻仙] 无法获取当前消息内容');\n                fallbackToInheritOrDefault();\n                return;\n            }\n            const content = messages[0].message || '';\n            console.info('[踏月寻仙] 尝试手动触发MVU解析，消息长度:', content.length);\n            // 获取当前的MVU数据（可能为空）\n            const currentMvuData = Mvu.getMvuData({ type: 'message', message_id });\n            // 手动解析消息中的MVU指令\n            const newMvuData = await Mvu.parseMessage(content, currentMvuData);\n            // 将解析结果写回当前楼层\n            await Mvu.replaceMvuData(newMvuData, { type: 'message', message_id });\n            console.info('[踏月寻仙] MVU手动解析完成，重新加载数据');\n            // 延迟后重新加载数据\n            setTimeout(() => {\n                const variables = getVariables({ type: 'message', message_id });\n                const statData = _.get(variables, 'stat_data', null);\n                if (statData && Object.keys(statData).length > 0) {\n                    rawData.value = Schema.parse(statData);\n                    console.info('[踏月寻仙] ✅ 手动解析后成功加载数据');\n                    toastr.success('已成功初始化状态数据', '踏月寻仙');\n                    parseCurrentMessageCards();\n                }\n                else {\n                    console.warn('[踏月寻仙] 手动解析后仍无数据，使用备用方案');\n                    fallbackToInheritOrDefault();\n                }\n            }, 500);\n        }\n        catch (e) {\n            console.error('[踏月寻仙] 手动触发MVU解析失败', e);\n            fallbackToInheritOrDefault();\n        }\n    };\n    // 备用方案：继承或使用默认值\n    const fallbackToInheritOrDefault = () => {\n        console.warn('[踏月寻仙] 启用备用方案');\n        // 尝试从上一楼层继承数据\n        const inheritedData = tryInheritFromPreviousFloor();\n        if (inheritedData) {\n            // 成功继承数据，保存到当前楼层\n            rawData.value = inheritedData;\n            updateVariablesWith(vars => {\n                _.set(vars, 'stat_data', klona(inheritedData));\n                return vars;\n            }, { type: 'message', message_id });\n            console.info('[踏月寻仙] 成功继承上一楼层数据并保存到当前楼层');\n            toastr.success('已自动继承上一楼层的状态数据', '踏月寻仙');\n        }\n        else {\n            // 无法继承，使用默认值\n            console.warn('[踏月寻仙] 无法继承数据，使用默认值');\n            rawData.value = Schema.parse({});\n            toastr.info('使用默认状态数据', '踏月寻仙');\n        }\n        // 解析当前楼层消息中的 visual_cards\n        parseCurrentMessageCards();\n    };\n    // 尝试从上一楼层继承数据\n    const tryInheritFromPreviousFloor = () => {\n        try {\n            // 从当前楼层往前查找最近的有效数据\n            // 获取所有聊天消息（从第0楼到最后一楼）\n            const chatMessages = getChatMessages('0-{{lastMessageId}}');\n            const currentIndex = chatMessages.findIndex(msg => msg.message_id === message_id);\n            if (currentIndex === -1) {\n                console.warn('[踏月寻仙] 无法找到当前楼层索引');\n                return null;\n            }\n            // 从当前楼层往前遍历，查找最近的有效 stat_data\n            for (let i = currentIndex - 1; i >= 0; i--) {\n                const prevMessageId = chatMessages[i].message_id;\n                const prevVariables = getVariables({ type: 'message', message_id: prevMessageId });\n                const prevStatData = _.get(prevVariables, 'stat_data', null);\n                if (prevStatData) {\n                    // 找到有效数据，解析并返回\n                    const parsedData = Schema.parse(prevStatData);\n                    console.info(`[踏月寻仙] 从第 ${prevMessageId} 楼继承数据`);\n                    return parsedData;\n                }\n            }\n            console.warn('[踏月寻仙] 前面的楼层都没有有效数据');\n            return null;\n        }\n        catch (e) {\n            console.error('[踏月寻仙] 继承数据时出错', e);\n            return null;\n        }\n    };\n    // 解析当前楼层消息中的 visual_cards\n    const parseCurrentMessageCards = () => {\n        try {\n            // 获取当前消息内容\n            const messages = getChatMessages(message_id);\n            if (messages.length > 0) {\n                const content = messages[0].message || '';\n                // 检查缓存\n                const cacheKey = `${message_id}_${content.length}`;\n                if (cardCache.has(cacheKey)) {\n                    galleryCards.value = cardCache.get(cacheKey);\n                    console.info('[图鉴] 使用缓存的角色卡片');\n                    return;\n                }\n                const visualCards = parseVisualCards(content);\n                if (visualCards.length > 0) {\n                    const cards = convertToGalleryCards(visualCards);\n                    galleryCards.value = cards;\n                    // 缓存结果\n                    cardCache.set(cacheKey, cards);\n                    // 预加载图片\n                    preloadImages(cards);\n                    console.info('[图鉴] 解析到角色卡片', cards.length, '张');\n                }\n                else {\n                    galleryCards.value = [];\n                }\n            }\n        }\n        catch (e) {\n            console.error('[图鉴] 解析消息卡片失败', e);\n            toastr.warning(`解析角色卡片失败: ${e instanceof Error ? e.message : '未知错误'}`, '图鉴');\n        }\n    };\n    // 预加载图片\n    const preloadImages = (cards) => {\n        cards.forEach(card => {\n            // 预加载正面图片\n            const frontImg = new Image();\n            frontImg.src = card.front;\n            // 预加载背面图片\n            const backImg = new Image();\n            backImg.src = card.back;\n        });\n        console.info('[图鉴] 开始预加载', cards.length * 2, '张图片');\n    };\n    // 翻转卡片\n    const toggleCardFlip = (index) => {\n        if (galleryCards.value[index]) {\n            galleryCards.value[index].isFlipped = !galleryCards.value[index].isFlipped;\n        }\n    };\n    // 等待MVU框架初始化后再加载数据\n    waitGlobalInitialized('Mvu').then(() => {\n        console.info('[踏月寻仙] MVU 框架已初始化，开始加载数据');\n        // 延迟500ms后开始初始化，给MVU足够时间处理开局消息\n        setTimeout(() => {\n            initData();\n        }, 500);\n    }).catch(() => {\n        console.warn('[踏月寻仙] MVU 框架未加载，直接初始化');\n        setTimeout(() => initData(), 300);\n    });\n    // 监听消息更新事件，实时刷新数据\n    eventOn(tavern_events.MESSAGE_UPDATED, (id) => {\n        if (id === message_id) {\n            console.info('[踏月寻仙] 检测到消息更新，重新加载数据');\n            setTimeout(() => initData(), 200);\n        }\n    });\n    // 监听消息删除事件（重新roll时会触发）\n    eventOn(tavern_events.MESSAGE_DELETED, (id) => {\n        console.info('[踏月寻仙] 检测到消息删除（可能是重新roll），准备重新初始化');\n    });\n    // 监听消息接收事件（新消息生成完成）\n    eventOn(tavern_events.MESSAGE_RECEIVED, (id) => {\n        if (id === message_id) {\n            console.info('[踏月寻仙] 检测到新消息接收，重新加载数据');\n            setTimeout(() => initData(), 500);\n        }\n    });\n    // 监听 MVU 变量更新事件\n    waitGlobalInitialized('Mvu').then(() => {\n        console.info('[踏月寻仙] 开始监听 MVU 变量更新事件');\n        // 监听 MVU 变量更新结束事件\n        eventOn(Mvu.events.VARIABLE_UPDATE_ENDED, (new_variables, old_variables, update_info) => {\n            try {\n                // 检查 update_info 是否存在且包含有效的 message_id\n                if (!update_info || typeof update_info.message_id !== 'number') {\n                    console.warn('[踏月寻仙] MVU 变量更新事件缺少有效的 message_id');\n                    return;\n                }\n                const update_message_id = update_info.message_id;\n                console.info('[踏月寻仙] MVU 变量更新事件触发', {\n                    update_message_id,\n                    current_message_id: message_id,\n                    is_current_floor: update_message_id === message_id,\n                    new_stat_data: _.get(new_variables, 'stat_data')\n                });\n                // 只处理当前楼层的更新\n                if (update_message_id === message_id) {\n                    const statData = _.get(new_variables, 'stat_data', null);\n                    if (statData && Object.keys(statData).length > 0) {\n                        // 强制更新：先清空再设置，确保Vue检测到变化\n                        rawData.value = null;\n                        nextTick(() => {\n                            rawData.value = Schema.parse(statData);\n                            console.info('[踏月寻仙] ✅ 当前楼层 MVU 变量已强制更新', {\n                                等级: rawData.value.本尊.等级,\n                                灵根: rawData.value.本尊.灵根,\n                                体质: rawData.value.本尊.体质,\n                                功法: rawData.value.本尊.功法,\n                                本命兵器: rawData.value.本尊.本命兵器,\n                                灵石: rawData.value.本尊.灵石\n                            });\n                        });\n                    }\n                    else {\n                        console.warn('[踏月寻仙] stat_data 为空，跳过更新');\n                    }\n                }\n                else {\n                    console.info('[踏月寻仙] 忽略其他楼层的变量更新');\n                }\n            }\n            catch (e) {\n                console.error('[踏月寻仙] 处理 MVU 变量更新失败', e);\n            }\n        });\n    }).catch(e => {\n        console.warn('[踏月寻仙] MVU 框架未加载，将仅显示静态数据', e);\n    });\n    // 计算属性：安全获取各部分数据\n    const 世界时钟 = computed(() => rawData.value?.世界时钟 ?? { 纪元: '末法时代', 年份: 1 });\n    const 世界地图 = computed(() => rawData.value?.世界地图 ?? {});\n    const 世界图志 = computed(() => rawData.value?.世界图志 ?? {});\n    const 本尊 = computed(() => rawData.value?.本尊 ?? Schema.parse({}).本尊);\n    const 红颜 = computed(() => rawData.value?.红颜 ?? {});\n    const NPC图鉴 = computed(() => rawData.value?.NPC图鉴 ?? {});\n    // 是否有数据\n    const hasData = computed(() => rawData.value !== null);\n    // 是否有图鉴卡片\n    const hasGalleryCards = computed(() => galleryCards.value.length > 0);\n    return {\n        rawData,\n        世界时钟,\n        世界地图,\n        世界图志,\n        本尊,\n        红颜,\n        NPC图鉴,\n        hasData,\n        refresh: initData,\n        // 图鉴相关\n        galleryCards,\n        hasGalleryCards,\n        toggleCardFlip,\n        parseCurrentMessageCards,\n    };\n}));\n// ============================================================================\n// 主题管理 Store (Theme Management Store)\n// ============================================================================\nexport const useThemeStore = defineStore('theme', () => {\n    // 从消息楼层变量中读取用户选择的主题ID\n    const currentThemeId = ref('default');\n    // 当前主题对象\n    const currentTheme = computed(() => {\n        return getThemeById(currentThemeId.value) || getDefaultTheme();\n    });\n    // 所有可用主题列表\n    const availableThemes = computed(() => themes);\n    // 初始化主题 - 从消息楼层变量读取\n    const initTheme = () => {\n        try {\n            const message_id = getCurrentMessageId();\n            const variables = getVariables({ type: 'message', message_id });\n            const savedThemeId = _.get(variables, 'ui_theme_id', 'default');\n            if (typeof savedThemeId === 'string' && getThemeById(savedThemeId)) {\n                currentThemeId.value = savedThemeId;\n                console.info('[主题] 加载已保存的主题:', savedThemeId);\n            }\n            else {\n                currentThemeId.value = 'default';\n                console.info('[主题] 使用默认主题');\n            }\n        }\n        catch (e) {\n            console.warn('[主题] 加载主题失败，使用默认主题', e);\n            currentThemeId.value = 'default';\n        }\n    };\n    // 切换主题\n    const setTheme = (themeId) => {\n        if (getThemeById(themeId)) {\n            currentThemeId.value = themeId;\n            // 保存到消息楼层变量\n            try {\n                const message_id = getCurrentMessageId();\n                updateVariablesWith(vars => {\n                    _.set(vars, 'ui_theme_id', themeId);\n                    return vars;\n                }, { type: 'message', message_id });\n                console.info('[主题] 主题已切换并保存:', themeId);\n                toastr.success(`已切换至「${currentTheme.value.name}」主题`, '踏月寻仙');\n            }\n            catch (e) {\n                console.error('[主题] 保存主题失败', e);\n                toastr.warning('主题切换成功，但保存失败', '踏月寻仙');\n            }\n        }\n        else {\n            console.warn('[主题] 无效的主题ID:', themeId);\n        }\n    };\n    // 初始化\n    initTheme();\n    return {\n        currentThemeId,\n        currentTheme,\n        availableThemes,\n        setTheme,\n    };\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"header\" };\nconst _hoisted_2 = { class: \"header-left\" };\nconst _hoisted_3 = [\"title\"];\nconst _hoisted_4 = { class: \"world-time\" };\nconst _hoisted_5 = { class: \"theme-selector-header\" };\nconst _hoisted_6 = { class: \"theme-list\" };\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = { class: \"theme-info\" };\nconst _hoisted_9 = { class: \"theme-name\" };\nconst _hoisted_10 = { class: \"theme-desc\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"fa-solid fa-check theme-check\"\n};\nconst _hoisted_12 = { class: \"tab-nav\" };\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = { class: \"content\" };\nconst _hoisted_15 = {\n    key: 0,\n    class: \"panel cultivation-panel\"\n};\nconst _hoisted_16 = { class: \"identity-section\" };\nconst _hoisted_17 = { class: \"identity-name\" };\nconst _hoisted_18 = { class: \"identity-info\" };\nconst _hoisted_19 = { class: \"realm-section\" };\nconst _hoisted_20 = { class: \"realm-status\" };\nconst _hoisted_21 = { class: \"progress-section\" };\nconst _hoisted_22 = { class: \"progress-label\" };\nconst _hoisted_23 = { class: \"progress-bar\" };\nconst _hoisted_24 = { class: \"progress-percent\" };\nconst _hoisted_25 = { class: \"stats-grid\" };\nconst _hoisted_26 = { class: \"stat-item\" };\nconst _hoisted_27 = { class: \"stat-item\" };\nconst _hoisted_28 = { class: \"stat-value\" };\nconst _hoisted_29 = { class: \"stat-item\" };\nconst _hoisted_30 = { class: \"stat-value\" };\nconst _hoisted_31 = { class: \"stat-item\" };\nconst _hoisted_32 = { class: \"stat-value\" };\nconst _hoisted_33 = { class: \"stat-item\" };\nconst _hoisted_34 = { class: \"stat-value gold\" };\nconst _hoisted_35 = { class: \"stat-item\" };\nconst _hoisted_36 = { class: \"stat-value\" };\nconst _hoisted_37 = { class: \"panel skills-panel\" };\nconst _hoisted_38 = { class: \"skills-list\" };\nconst _hoisted_39 = { class: \"skill-name\" };\nconst _hoisted_40 = { class: \"skill-desc\" };\nconst _hoisted_41 = {\n    key: 0,\n    class: \"empty-hint\"\n};\nconst _hoisted_42 = { class: \"panel inventory-panel\" };\nconst _hoisted_43 = { class: \"inventory-section\" };\nconst _hoisted_44 = { class: \"items-grid\" };\nconst _hoisted_45 = { class: \"item-name\" };\nconst _hoisted_46 = { class: \"item-rank\" };\nconst _hoisted_47 = { class: \"item-desc\" };\nconst _hoisted_48 = {\n    key: 0,\n    class: \"empty-hint\"\n};\nconst _hoisted_49 = { class: \"inventory-section\" };\nconst _hoisted_50 = { class: \"items-grid\" };\nconst _hoisted_51 = { class: \"item-header\" };\nconst _hoisted_52 = { class: \"item-name\" };\nconst _hoisted_53 = { class: \"item-count\" };\nconst _hoisted_54 = { class: \"item-rank\" };\nconst _hoisted_55 = { class: \"item-desc\" };\nconst _hoisted_56 = {\n    key: 0,\n    class: \"empty-hint\"\n};\nconst _hoisted_57 = { class: \"panel companions-panel\" };\nconst _hoisted_58 = { class: \"companions-list\" };\nconst _hoisted_59 = { class: \"companion-header\" };\nconst _hoisted_60 = { class: \"companion-name\" };\nconst _hoisted_61 = { class: \"companion-relation\" };\nconst _hoisted_62 = { class: \"relation-value\" };\nconst _hoisted_63 = { class: \"companion-favor\" };\nconst _hoisted_64 = { class: \"favor-bar\" };\nconst _hoisted_65 = { class: \"favor-value\" };\nconst _hoisted_66 = {\n    key: 0,\n    class: \"empty-hint\"\n};\nconst _hoisted_67 = { class: \"panel map-panel\" };\nconst _hoisted_68 = { class: \"current-location\" };\nconst _hoisted_69 = { class: \"location-name\" };\nconst _hoisted_70 = { class: \"location-layer\" };\nconst _hoisted_71 = { class: \"location-desc\" };\nconst _hoisted_72 = { class: \"connections\" };\nconst _hoisted_73 = { class: \"connections-list\" };\nconst _hoisted_74 = {\n    key: 0,\n    class: \"empty-hint\",\n    style: { \"padding\": \"10px\" }\n};\nconst _hoisted_75 = { class: \"panel gallery-panel\" };\nconst _hoisted_76 = {\n    key: 0,\n    class: \"gallery-container\"\n};\nconst _hoisted_77 = [\"onClick\"];\nconst _hoisted_78 = { class: \"card-inner\" };\nconst _hoisted_79 = { class: \"card-face card-front\" };\nconst _hoisted_80 = [\"src\", \"alt\"];\nconst _hoisted_81 = { class: \"card-name-bar\" };\nconst _hoisted_82 = { class: \"card-face card-back\" };\nconst _hoisted_83 = { class: \"back-content\" };\nconst _hoisted_84 = [\"src\", \"alt\"];\nconst _hoisted_85 = { class: \"back-info-panel\" };\nconst _hoisted_86 = { class: \"back-name\" };\nconst _hoisted_87 = { class: \"back-text\" };\nconst _hoisted_88 = {\n    key: 1,\n    class: \"empty-hint\"\n};\nconst _hoisted_89 = { class: \"footer\" };\nconst _hoisted_90 = { class: \"footer-item\" };\nconst _hoisted_91 = { class: \"footer-item\" };\nimport { getDangerColor, getRealmColor, getRootColor } from './schema';\nimport { useDataStore, useThemeStore } from './store';\n\nimport { ref, computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'app',\n    setup(__props) {\n        const store = useDataStore();\n        const themeStore = useThemeStore();\n        // 标签页配置\n        const tabs = [\n            { id: 'cultivation', label: '修炼', icon: 'fa-solid fa-yin-yang' },\n            { id: 'skills', label: '神通', icon: 'fa-solid fa-hand-sparkles' },\n            { id: 'inventory', label: '储物', icon: 'fa-solid fa-box-open' },\n            { id: 'companions', label: '红颜', icon: 'fa-solid fa-heart' },\n            { id: 'map', label: '行踪', icon: 'fa-solid fa-map' },\n            { id: 'gallery', label: '图鉴', icon: 'fa-solid fa-images' },\n        ];\n        const activeTab = ref('gallery'); // 初始显示图鉴\n        const isCollapsed = ref(false);\n        const showThemeSelector = ref(false);\n        // 切换折叠状态\n        const toggleCollapse = () => {\n            isCollapsed.value = !isCollapsed.value;\n        };\n        // 切换主题选择器\n        const toggleThemeSelector = () => {\n            showThemeSelector.value = !showThemeSelector.value;\n        };\n        // 选择主题\n        const selectTheme = (themeId) => {\n            themeStore.setTheme(themeId);\n            showThemeSelector.value = false;\n        };\n        // 应用主题的CSS变量\n        const themeStyles = computed(() => {\n            const theme = themeStore.currentTheme;\n            return {\n                '--bg-primary': theme.colors.bgPrimary,\n                '--bg-secondary': theme.colors.bgSecondary,\n                '--border-color': theme.colors.border,\n                '--border-active': theme.colors.borderActive,\n                '--text-primary': theme.colors.textPrimary,\n                '--text-secondary': theme.colors.textSecondary,\n                '--text-accent': theme.colors.textAccent,\n                '--accent-color': theme.colors.accent,\n                '--accent-glow': theme.colors.accentGlow,\n                '--button-bg': theme.colors.buttonBg,\n                '--button-hover': theme.colors.buttonHover,\n                '--button-active': theme.colors.buttonActive,\n                '--progress-bg': theme.colors.progressBg,\n                '--header-bg': theme.colors.headerBg,\n                '--tab-bg': theme.colors.tabBg,\n                '--tab-active': theme.colors.tabActive,\n                '--footer-bg': theme.colors.footerBg,\n                '--pattern-overlay': theme.patterns.overlay || 'none',\n            };\n        });\n        // 计算属性\n        const realmColor = computed(() => getRealmColor(store.本尊.等级));\n        const rootColor = computed(() => getRootColor(store.本尊.灵根));\n        const dangerColor = computed(() => getDangerColor(store.本尊.行踪.危险度 ?? 10));\n        const locationColor = computed(() => {\n            const layer = store.本尊.行踪.所属层级;\n            if (layer === '天层')\n                return '#88ddff';\n            if (layer === '下层')\n                return '#ff4444';\n            return '#44aa44';\n        });\n        // 获取区域颜色\n        const getRegionColor = (region) => {\n            const map = store.世界地图;\n            const info = map[region];\n            if (!info)\n                return '#888888';\n            return getDangerColor(info.danger);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"cultivation-status\", { collapsed: _unref(isCollapsed) }]),\n                style: _normalizeStyle(_unref(themeStyles))\n            }, [\n                _createCommentVNode(\" 背景图案层 \"),\n                _cache[24] || (_cache[24] = _createElementVNode(\"div\", { class: \"pattern-overlay\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" 仙鹤装饰 - 顶部中央 \"),\n                _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"crane-decoration\" }, [\n                    _createElementVNode(\"img\", {\n                        src: \"https://pub-4d14ab94aa29488b977bc5be9f2a06ef.r2.dev/picgo/仙鹤.png\",\n                        alt: \"仙鹤\"\n                    })\n                ], -1 /* CACHED */)),\n                _createCommentVNode(\" 顶部：折叠按钮 + 世界时钟与位置 \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"button\", {\n                            class: \"collapse-btn\",\n                            onClick: toggleCollapse,\n                            title: _unref(isCollapsed) ? '展开状态栏' : '收起状态栏'\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(_unref(isCollapsed) ? 'fa-solid fa-chevron-down' : 'fa-solid fa-chevron-up')\n                            }, null, 2 /* CLASS */)\n                        ], 8 /* PROPS */, _hoisted_3),\n                        _createElementVNode(\"button\", {\n                            class: \"theme-btn\",\n                            onClick: toggleThemeSelector,\n                            title: \"切换主题\"\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-palette\" }, null, -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fa-solid fa-moon\" }, null, -1 /* CACHED */)),\n                        _createElementVNode(\"span\", null, _toDisplayString(_unref(store).世界时钟.纪元) + \" · 第\" + _toDisplayString(_unref(store).世界时钟.年份) + \"年\", 1 /* TEXT */)\n                    ]),\n                    _createElementVNode(\"div\", {\n                        class: \"location\",\n                        style: _normalizeStyle({ color: _unref(locationColor) })\n                    }, [\n                        _cache[5] || (_cache[5] = _createElementVNode(\"i\", { class: \"fa-solid fa-location-dot\" }, null, -1 /* CACHED */)),\n                        _createElementVNode(\"span\", null, _toDisplayString(_unref(store).本尊.行踪.当前区域), 1 /* TEXT */),\n                        _createElementVNode(\"span\", {\n                            class: \"danger-badge\",\n                            style: _normalizeStyle({ backgroundColor: _unref(dangerColor) })\n                        }, \" 危险度 \" + _toDisplayString(_unref(store).本尊.行踪.危险度 ?? 10), 5 /* TEXT, STYLE */)\n                    ], 4 /* STYLE */)\n                ]),\n                _createCommentVNode(\" 主题选择器弹窗 \"),\n                _createVNode(_Transition, { name: \"theme-selector-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showThemeSelector))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"theme-selector-overlay\",\n                                onClick: _cache[2] || (_cache[2] = ($event) => (showThemeSelector.value = false))\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"theme-selector\",\n                                    onClick: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"]))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_5, [\n                                        _cache[7] || (_cache[7] = _createElementVNode(\"h3\", null, [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-palette\" }),\n                                            _createTextVNode(\" 选择主题\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"button\", {\n                                            class: \"close-btn\",\n                                            onClick: _cache[0] || (_cache[0] = ($event) => (showThemeSelector.value = false))\n                                        }, [...(_cache[6] || (_cache[6] = [\n                                                _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                            ]))])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_6, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(themeStore).availableThemes, (theme) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: theme.id,\n                                                class: _normalizeClass([\"theme-item\", { active: theme.id === _unref(themeStore).currentThemeId }]),\n                                                onClick: ($event) => (selectTheme(theme.id))\n                                            }, [\n                                                _createElementVNode(\"div\", {\n                                                    class: \"theme-preview\",\n                                                    style: _normalizeStyle({ background: theme.colors.bgPrimary })\n                                                }, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"theme-preview-border\",\n                                                        style: _normalizeStyle({ borderColor: theme.colors.border })\n                                                    }, null, 4 /* STYLE */)\n                                                ], 4 /* STYLE */),\n                                                _createElementVNode(\"div\", _hoisted_8, [\n                                                    _createElementVNode(\"div\", _hoisted_9, _toDisplayString(theme.name), 1 /* TEXT */),\n                                                    _createElementVNode(\"div\", _hoisted_10, _toDisplayString(theme.description), 1 /* TEXT */)\n                                                ]),\n                                                (theme.id === _unref(themeStore).currentThemeId)\n                                                    ? (_openBlock(), _createElementBlock(\"i\", _hoisted_11))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ], 10 /* CLASS, PROPS */, _hoisted_7));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" 主体：标签页导航 \"),\n                _createElementVNode(\"div\", _hoisted_12, [\n                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(tabs, (tab) => {\n                        return _createElementVNode(\"button\", {\n                            key: tab.id,\n                            class: _normalizeClass(['tab-btn', { active: _unref(activeTab) === tab.id }]),\n                            onClick: ($event) => (activeTab.value = tab.id)\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(tab.icon)\n                            }, null, 2 /* CLASS */),\n                            _createTextVNode(\" \" + _toDisplayString(tab.label), 1 /* TEXT */)\n                        ], 10 /* CLASS, PROPS */, _hoisted_13);\n                    }), 64 /* STABLE_FRAGMENT */))\n                ]),\n                _createCommentVNode(\" 内容区域 \"),\n                _createElementVNode(\"div\", _hoisted_14, [\n                    _createCommentVNode(\" 修炼面板 \"),\n                    (_unref(activeTab) === 'cultivation')\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                            _createElementVNode(\"div\", _hoisted_16, [\n                                _createElementVNode(\"div\", _hoisted_17, _toDisplayString(_unref(store).本尊.身份.姓名), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                    _createElementVNode(\"span\", null, _toDisplayString(_unref(store).本尊.身份.宗门), 1 /* TEXT */),\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"divider\" }, \"·\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", null, _toDisplayString(_unref(store).本尊.身份.出身), 1 /* TEXT */)\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_19, [\n                                _createElementVNode(\"div\", {\n                                    class: \"realm-title\",\n                                    style: _normalizeStyle({ color: _unref(realmColor) })\n                                }, [\n                                    _cache[9] || (_cache[9] = _createElementVNode(\"i\", { class: \"fa-solid fa-yin-yang\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(_unref(store).本尊.境界描述), 1 /* TEXT */)\n                                ], 4 /* STYLE */),\n                                _createElementVNode(\"div\", _hoisted_20, _toDisplayString(_unref(store).本尊.状态), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                _createElementVNode(\"div\", _hoisted_22, [\n                                    _cache[10] || (_cache[10] = _createElementVNode(\"span\", null, \"修为进度\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", null, _toDisplayString(_unref(store).本尊.修为) + \" / \" + _toDisplayString(_unref(store).本尊.突破阈值), 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_23, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"progress-fill\",\n                                        style: _normalizeStyle({ width: _unref(store).本尊.进度, backgroundColor: _unref(realmColor) })\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_24, _toDisplayString(_unref(store).本尊.进度), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_25, [\n                                _createElementVNode(\"div\", _hoisted_26, [\n                                    _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"灵根\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", {\n                                        class: \"stat-value\",\n                                        style: _normalizeStyle({ color: _unref(rootColor) })\n                                    }, _toDisplayString(_unref(store).本尊.灵根), 5 /* TEXT, STYLE */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_27, [\n                                    _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"体质\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_28, _toDisplayString(_unref(store).本尊.体质), 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_29, [\n                                    _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"功法\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_30, _toDisplayString(_unref(store).本尊.功法), 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_31, [\n                                    _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"本命兵器\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_32, _toDisplayString(_unref(store).本尊.本命兵器), 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_33, [\n                                    _cache[15] || (_cache[15] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"灵石\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_34, _toDisplayString(_unref(store).本尊.灵石), 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_35, [\n                                    _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"寿元\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_36, _toDisplayString(_unref(store).本尊.寿元状态), 1 /* TEXT */)\n                                ])\n                            ])\n                        ]))\n                        : (_unref(activeTab) === 'skills')\n                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                _createCommentVNode(\" 神通面板 \"),\n                                _createElementVNode(\"div\", _hoisted_37, [\n                                    _createElementVNode(\"div\", _hoisted_38, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(store).本尊.神通列表, (desc, name) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: name,\n                                                class: \"skill-item\"\n                                            }, [\n                                                _createElementVNode(\"div\", _hoisted_39, _toDisplayString(name), 1 /* TEXT */),\n                                                _createElementVNode(\"div\", _hoisted_40, _toDisplayString(desc), 1 /* TEXT */)\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */)),\n                                        (!_unref(store).本尊.神通列表 || Object.keys(_unref(store).本尊.神通列表).length === 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, \" 尚未领悟任何神通 \"))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ])\n                                ])\n                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            : (_unref(activeTab) === 'inventory')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\" 储物面板 \"),\n                                    _createElementVNode(\"div\", _hoisted_42, [\n                                        _createElementVNode(\"div\", _hoisted_43, [\n                                            _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"section-title\" }, [\n                                                _createElementVNode(\"i\", { class: \"fa-solid fa-gem\" }),\n                                                _createTextVNode(\" 法宝 \")\n                                            ], -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_44, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(store).本尊.法宝, (item, key) => {\n                                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                                        key: key,\n                                                        class: \"item-card treasure\"\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_45, _toDisplayString(item.名称), 1 /* TEXT */),\n                                                        _createElementVNode(\"div\", _hoisted_46, _toDisplayString(item.品阶), 1 /* TEXT */),\n                                                        _createElementVNode(\"div\", _hoisted_47, _toDisplayString(item.描述), 1 /* TEXT */)\n                                                    ]));\n                                                }), 128 /* KEYED_FRAGMENT */)),\n                                                (Object.keys(_unref(store).本尊.法宝).length === 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_48, \"空空如也\"))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_49, [\n                                            _cache[18] || (_cache[18] = _createElementVNode(\"div\", { class: \"section-title\" }, [\n                                                _createElementVNode(\"i\", { class: \"fa-solid fa-box-open\" }),\n                                                _createTextVNode(\" 储物戒 \")\n                                            ], -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_50, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(store).本尊.背包, (item, key) => {\n                                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                                        key: key,\n                                                        class: \"item-card\"\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_51, [\n                                                            _createElementVNode(\"span\", _hoisted_52, _toDisplayString(item.名称), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", _hoisted_53, \"×\" + _toDisplayString(item.数量), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_54, _toDisplayString(item.品阶), 1 /* TEXT */),\n                                                        _createElementVNode(\"div\", _hoisted_55, _toDisplayString(item.描述), 1 /* TEXT */)\n                                                    ]));\n                                                }), 128 /* KEYED_FRAGMENT */)),\n                                                (Object.keys(_unref(store).本尊.背包).length === 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_56, \"空空如也\"))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ])\n                                        ])\n                                    ])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                : (_unref(activeTab) === 'companions')\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                                        _createCommentVNode(\" 红颜面板 \"),\n                                        _createElementVNode(\"div\", _hoisted_57, [\n                                            _createElementVNode(\"div\", _hoisted_58, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(store).红颜, (companion, name) => {\n                                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                                        key: name,\n                                                        class: \"companion-card\"\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_59, [\n                                                            _createElementVNode(\"span\", _hoisted_60, _toDisplayString(name), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", {\n                                                                class: \"companion-realm\",\n                                                                style: _normalizeStyle({ color: _unref(getRealmColor)(companion.等级) })\n                                                            }, _toDisplayString(companion.境界描述), 5 /* TEXT, STYLE */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_61, [\n                                                            _cache[19] || (_cache[19] = _createElementVNode(\"span\", { class: \"relation-label\" }, \"关系:\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_62, _toDisplayString(companion.关系), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_63, [\n                                                            _cache[20] || (_cache[20] = _createElementVNode(\"div\", { class: \"favor-label\" }, \"好感度\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"div\", _hoisted_64, [\n                                                                _createElementVNode(\"div\", {\n                                                                    class: \"favor-fill\",\n                                                                    style: _normalizeStyle({\n                                                                        width: `${Math.abs(companion.好感度)}%`,\n                                                                        backgroundColor: companion.好感度 >= 0 ? '#ff6b9d' : '#6b7fff',\n                                                                    })\n                                                                }, null, 4 /* STYLE */)\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_65, _toDisplayString(companion.好感度), 1 /* TEXT */)\n                                                        ])\n                                                    ]));\n                                                }), 128 /* KEYED_FRAGMENT */)),\n                                                (Object.keys(_unref(store).红颜).length === 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_66, \"孑然一身，尚无红颜知己\"))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ])\n                                        ])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    : (_unref(activeTab) === 'map')\n                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 4 }, [\n                                            _createCommentVNode(\" 地图面板 \"),\n                                            _createElementVNode(\"div\", _hoisted_67, [\n                                                _createElementVNode(\"div\", _hoisted_68, [\n                                                    _createElementVNode(\"div\", _hoisted_69, _toDisplayString(_unref(store).本尊.行踪.当前区域), 1 /* TEXT */),\n                                                    _createElementVNode(\"div\", _hoisted_70, _toDisplayString(_unref(store).本尊.行踪.所属层级), 1 /* TEXT */),\n                                                    _createElementVNode(\"div\", _hoisted_71, _toDisplayString(_unref(store).本尊.行踪.环境描述), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_72, [\n                                                    _cache[21] || (_cache[21] = _createElementVNode(\"div\", { class: \"connections-title\" }, \"可通往：\", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_73, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(store).本尊.行踪.可用通道, (conn) => {\n                                                            return (_openBlock(), _createElementBlock(\"span\", {\n                                                                key: conn,\n                                                                class: \"connection-item\",\n                                                                style: _normalizeStyle({ borderColor: getRegionColor(conn) })\n                                                            }, _toDisplayString(conn), 5 /* TEXT, STYLE */));\n                                                        }), 128 /* KEYED_FRAGMENT */)),\n                                                        (!_unref(store).本尊.行踪.可用通道 || _unref(store).本尊.行踪.可用通道.length === 0)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_74, \" 尚未探明通道 \"))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ])\n                                                ])\n                                            ])\n                                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                        : (_unref(activeTab) === 'gallery')\n                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 5 }, [\n                                                _createCommentVNode(\" 图鉴面板 - 按比例展示卡片 \"),\n                                                _createElementVNode(\"div\", _hoisted_75, [\n                                                    (_unref(store).hasGalleryCards)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_76, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(store).galleryCards, (card, index) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: index,\n                                                                    class: _normalizeClass([\"gallery-card\", { flipped: card.isFlipped }]),\n                                                                    onClick: ($event) => (_unref(store).toggleCardFlip(index))\n                                                                }, [\n                                                                    _createElementVNode(\"div\", _hoisted_78, [\n                                                                        _createCommentVNode(\" 正面 \"),\n                                                                        _createElementVNode(\"div\", _hoisted_79, [\n                                                                            _createElementVNode(\"img\", {\n                                                                                src: card.front,\n                                                                                alt: card.frontName || card.name\n                                                                            }, null, 8 /* PROPS */, _hoisted_80),\n                                                                            _createElementVNode(\"div\", _hoisted_81, _toDisplayString(card.frontName || card.name), 1 /* TEXT */)\n                                                                        ]),\n                                                                        _createCommentVNode(\" 背面 \"),\n                                                                        _createElementVNode(\"div\", _hoisted_82, [\n                                                                            _createElementVNode(\"div\", _hoisted_83, [\n                                                                                _createElementVNode(\"img\", {\n                                                                                    src: card.back,\n                                                                                    alt: card.backName || card.name,\n                                                                                    class: \"back-image\"\n                                                                                }, null, 8 /* PROPS */, _hoisted_84),\n                                                                                _createElementVNode(\"div\", _hoisted_85, [\n                                                                                    _createElementVNode(\"div\", _hoisted_86, _toDisplayString(card.backName || card.name), 1 /* TEXT */),\n                                                                                    _createElementVNode(\"div\", _hoisted_87, \"「\" + _toDisplayString(card.backText) + \"」\", 1 /* TEXT */)\n                                                                                ])\n                                                                            ])\n                                                                        ])\n                                                                    ])\n                                                                ], 10 /* CLASS, PROPS */, _hoisted_77));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ]))\n                                                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_88, \" 当前场景暂无角色卡片 \"))\n                                                ])\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                            : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\" 底部：快捷信息 \"),\n                _createElementVNode(\"div\", _hoisted_89, [\n                    _createElementVNode(\"div\", _hoisted_90, [\n                        _cache[22] || (_cache[22] = _createElementVNode(\"i\", { class: \"fa-solid fa-coins\" }, null, -1 /* CACHED */)),\n                        _createElementVNode(\"span\", null, _toDisplayString(_unref(store).本尊.灵石) + \" 灵石\", 1 /* TEXT */)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_91, [\n                        _cache[23] || (_cache[23] = _createElementVNode(\"i\", { class: \"fa-solid fa-heart\" }, null, -1 /* CACHED */)),\n                        _createElementVNode(\"span\", null, _toDisplayString(_unref(store).本尊.寿元状态), 1 /* TEXT */)\n                    ])\n                ])\n            ], 6 /* CLASS, STYLE */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./app.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./app.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./app.vue?vue&type=style&index=0&id=7c4d25d8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_fcc8164c33ab268660e3819796c9f485/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7c4d25d8\"]])\n\nexport default __exports__","import { createPinia } from 'pinia';\nimport { createApp } from 'vue';\nimport App from './app.vue';\n\n$(() => {\n  const pinia = createPinia();\n  const app = createApp(App);\n\n  app.use(pinia);\n  app.mount('#app');\n\n  console.info('[踏月寻仙] 状态栏界面已加载');\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","z","REALM_NAMES","REALM_STAGES","REALM_THRESHOLDS","REALM_LIFESPANS","ItemSchema","object","string","prefault","coerce","number","transform","v","Math","max","FactionSchema","enum","optional","TechniqueSchema","describe","TreasureSchema","LocationSchema","_","clamp","array","SpiritRootSchema","PhysiqueSchema","Schema","record","layer","danger","desc","connections","boolean","data","pickBy","level","majorIdx","floor","toFixed","CONFIG","effect","visual","nature","color","getRealmColor","getDangerColor","CHARACTER_ASSETS","normal","front","back","shy","smile","angry","cry","surprise","CHARACTER_IMAGE_POOLS","DEFAULT_EXPRESSION","DEFAULT_PLACEHOLDER","cachedDualSoul","dualSoulSessionUsed","getRandomImage","characterName","type","pool","console","warn","images","length","random","getDualSoulImage","url","soulName","info","soul","randomIndex","normalizeExpressionImages","config","frontResult","backResult","frontName","backName","getCharacterImages","frontImgCode","backImgCode","character","normalized","patterns","cloudImage","cloudsMulti","cloudsWithStars","stars","texture","landscape","lotus","themes","id","name","description","colors","bgPrimary","bgSecondary","border","borderActive","textPrimary","textSecondary","textAccent","accent","accentGlow","buttonBg","buttonHover","buttonActive","progressBg","headerBg","tabBg","tabActive","footerBg","overlay","getThemeById","find","t","convertToGalleryCards","visualCards","result","card","img_code","back_img_code","push","backText","back_text","isFlipped","useDataStore","errorCatched","message_id","getCurrentMessageId","rawData","ref","galleryCards","cardCache","Map","initData","retryCount","variables","getVariables","statData","get","Object","keys","value","parse","parseCurrentMessageCards","setTimeout","tryManualParseMvuMessage","e","error","toastr","Error","message","async","waitGlobalInitialized","messages","getChatMessages","fallbackToInheritOrDefault","content","currentMvuData","Mvu","getMvuData","newMvuData","parseMessage","replaceMvuData","success","inheritedData","tryInheritFromPreviousFloor","updateVariablesWith","vars","set","chatMessages","currentIndex","findIndex","msg","i","prevMessageId","prevVariables","prevStatData","parsedData","cacheKey","has","match","jsonStr","trim","cards","JSON","Array","isArray","filter","parseVisualCards","preloadImages","warning","forEach","Image","src","then","catch","eventOn","tavern_events","MESSAGE_UPDATED","MESSAGE_DELETED","MESSAGE_RECEIVED","events","VARIABLE_UPDATE_ENDED","new_variables","old_variables","update_info","update_message_id","current_message_id","is_current_floor","new_stat_data","nextTick","computed","hasData","hasGalleryCards","refresh","toggleCardFlip","index","useThemeStore","currentThemeId","currentTheme","availableThemes","savedThemeId","initTheme","setTheme","themeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","style","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","__name","setup","__props","store","themeStore","tabs","label","icon","activeTab","isCollapsed","showThemeSelector","toggleCollapse","toggleThemeSelector","themeStyles","theme","realmColor","rootColor","root","elem","entries","includes","getRootColor","dangerColor","locationColor","getRegionColor","region","_ctx","_cache","collapsed","alt","onClick","title","backgroundColor","default","$event","active","background","borderColor","tab","width","item","companion","abs","conn","flipped","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","$","pinia","app","createApp","use","mount"],"ignoreList":[],"sourceRoot":""}