{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/踏月寻仙-测试版/schema.ts","src://tavern_helper_template/src/踏月寻仙-变量结构/index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = z;","// ============================================================================\n// 踏月寻仙 - MVU 变量结构定义 (Zod Schema for MVU Variables)\n// ============================================================================\n// 修炼境界等级与境界描述映射\n// 等级 1-4:   练气（初期、中期、后期、大圆满）\n// 等级 5-8:   筑基（初期、中期、后期、大圆满）\n// 等级 9-12:  金丹（初期、中期、后期、大圆满）\n// 等级 13-16: 元婴（初期、中期、后期、大圆满）\n// 等级 17-20: 化神（初期、中期、后期、大圆满）\n// 等级 21-24: 炼虚（初期、中期、后期、大圆满）\n// 等级 25-28: 合体（初期、中期、后期、大圆满）\n// 等级 29-32: 大乘（初期、中期、后期、大圆满）\n// 等级 33-36: 渡劫（初期、中期、后期、大圆满）\nconst REALM_NAMES = ['练气', '筑基', '金丹', '元婴', '化神', '炼虚', '合体', '大乘', '渡劫'];\nconst REALM_STAGES = ['初期', '中期', '后期', '大圆满'];\n// 修炼境界等级与突破阈值映射\nconst REALM_THRESHOLDS = [100, 100, 100, 100, 200, 200, 200, 200, 400, 400, 400, 400, 800, 800, 800, 800, 1600, 1600, 1600, 1600, 3200, 3200, 3200, 3200, 6400, 6400, 6400, 6400, 12800, 12800, 12800, 12800, 25600, 25600, 25600, 25600];\n// 修炼境界等级与寿元上限映射\nconst REALM_LIFESPANS = [100, 100, 100, 100, 200, 200, 200, 200, 500, 500, 500, 500, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 5000, 5000, 5000, 5000, 10000, 10000, 10000, 10000, 50000, 50000, 50000, 50000, 100000, 100000, 100000, 100000];\n// 物品 Schema\nconst ItemSchema = z.object({\n    名称: z.string().prefault(''),\n    描述: z.string().prefault(''),\n    品阶: z.string().prefault(''),\n    数量: z.coerce.number().transform(v => Math.max(0, v)).prefault(1), // 允许数量为 0，由后续 transform 过滤\n});\n// 宗门势力 Schema - 优化版\nconst FactionSchema = z.object({\n    地: z.string().describe('所在地'),\n    特: z.string().describe('核心特点'),\n    力: z.string().describe('最高战力'),\n    营: z.enum(['正', '魔', '中']),\n    模: z.enum(['超大', '大', '小', '微', '特']),\n});\n// 功法 Schema - 优化版\nconst TechniqueSchema = z.object({\n    阶: z.enum(['凡', '黄', '玄', '地', '天', '仙', '圣']),\n    性: z.string().describe('属性'),\n    效: z.string().describe('效果'),\n});\n// 法宝兵器 Schema - 极简版\nconst TreasureSchema = z.object({\n    阶: z.enum(['凡器', '法器', '灵器', '法宝', '灵宝', '仙器', '圣器', '道器']),\n    类: z.string().describe('类型'),\n}).transform(data => ({\n    ...data,\n    特: data.阶 === '仙器' ? '顶级' : data.阶 === '灵宝' ? '强' : data.阶 === '法宝' ? '中' : '普通',\n}));\n// 地点 Schema - 优化版\nconst LocationSchema = z.object({\n    域: z.enum(['天层', '神州', '东苍', '南炎', '西庚', '北冥', '下层', '四海']),\n    类: z.enum(['秘境', '城镇', '宗门', '禁地', '遗迹', '地形']),\n    危: z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n    特: z.string().describe('特点'),\n    资: z.array(z.string()).prefault([]),\n});\n// 灵根 Schema - 极简版（速度根据质自动计算）\nconst SpiritRootSchema = z.object({\n    质: z.enum(['劣', '下', '中', '上', '极', '天', '异']),\n    性: z.string().describe('属性'),\n    稀: z.enum(['常', '少', '罕', '稀', '传']),\n}).transform(data => {\n    const 速度映射 = { 劣: '0.3倍', 下: '0.5倍', 中: '1倍', 上: '2倍', 极: '3倍', 天: '5倍', 异: '4倍' };\n    return {\n        ...data,\n        速: 速度映射[data.质] || '1倍',\n        特: data.质 === '天' ? '单系顶级' : data.质 === '异' ? '变异稀有' : data.质 === '极' ? '双系优秀' : '常规',\n    };\n});\n// 体质 Schema - 优化版\nconst PhysiqueSchema = z.object({\n    质: z.enum(['凡', '灵', '道', '圣', '神']),\n    特: z.string().describe('特性'),\n    稀: z.enum(['常', '少', '罕', '稀', '传']),\n}).transform(data => ({\n    ...data,\n    优: data.质 === '神' ? '至高' : data.质 === '圣' ? '极强' : data.质 === '道' ? '强' : data.质 === '灵' ? '中' : '无',\n}));\n// 完整的 MVU 变量结构 - 完全参考角色卡示例的结构\nexport const Schema = z.object({\n    世界时钟: z.object({\n        纪元: z.string().prefault('末法时代'),\n        年份: z.coerce.number().prefault(1),\n        月份: z.coerce.number().transform(v => _.clamp(v, 1, 12)).prefault(1),\n        日期: z.coerce.number().transform(v => _.clamp(v, 1, 30)).prefault(1),\n        时辰: z.string().prefault('子时'),\n    }).prefault({\n        纪元: '末法时代',\n        年份: 1,\n        月份: 1,\n        日期: 1,\n        时辰: '子时',\n    }),\n    世界地图: z.record(z.string().describe('区域名'), z.object({\n        layer: z.enum(['天层', '地层', '下层']).prefault('地层'),\n        danger: z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n        desc: z.string().prefault(''),\n        connections: z.array(z.string()).prefault([]),\n    })).prefault({}),\n    世界图志: z.record(z.string().describe('事件名'), z.object({\n        状态: z.string().prefault(''),\n        事件: z.string().prefault(''),\n    })).prefault({}),\n    宗门势力库: z.record(z.string().describe('宗门名'), FactionSchema).prefault({\n        // 正道\n        剑阁: { 地: '神州剑门关', 特: '剑道源头', 力: '渡劫后期', 营: '正', 模: '超大' },\n        万法宗: { 地: '神州问道峰', 特: '万法本源', 力: '渡劫初期', 营: '正', 模: '超大' },\n        金刚寺: { 地: '西天佛山', 特: '佛修炼体', 力: '大乘中期', 营: '正', 模: '大' },\n        药王谷: { 地: '神农架', 特: '医炼丹药', 力: '大乘初期', 营: '正', 模: '大' },\n        儒门: { 地: '文圣山', 特: '浩然正气', 力: '大乘中期', 营: '正', 模: '大' },\n        青龙殿: { 地: '东苍青龙山', 特: '守护青帝', 力: '大乘初期', 营: '正', 模: '大' },\n        玄武宗: { 地: '北冥玄冰山', 特: '镇守归墟', 力: '大乘后期', 营: '正', 模: '大' },\n        建木宗: { 地: '东苍建木树', 特: '木系道法', 力: '合体中期', 营: '正', 模: '小' },\n        百花谷: { 地: '百花秘境', 特: '女修花道', 力: '合体后期', 营: '正', 模: '小' },\n        // 魔道\n        血神教: { 地: '血魔渊', 特: '血道炼法', 力: '渡劫中期', 营: '魔', 模: '超大' },\n        天魔宗: { 地: '天魔山', 特: '天魔大道', 力: '大乘中期', 营: '魔', 模: '大' },\n        // 中立\n        妖盟: { 地: '万妖森林', 特: '妖族联盟', 力: '渡劫中期', 营: '中', 模: '超大' },\n        大夏王朝: { 地: '中州皇城', 特: '世俗统治', 力: '大乘初期', 营: '中', 模: '大' },\n        九州商会: { 地: '九大主城', 特: '商业联盟', 力: '大乘初期', 营: '中', 模: '大' },\n        离火宫: { 地: '南炎火山', 特: '朱雀供奉', 力: '合体圆满', 营: '中', 模: '小' },\n        铸剑山庄: { 地: '南炎地火', 特: '炼器第一', 力: '合体后期', 营: '中', 模: '小' },\n    }),\n    功法库: z.record(z.string().describe('功法名'), TechniqueSchema).prefault({\n        // 基础 - 保留核心\n        引气诀: { 阶: '凡', 性: '通用', 效: '入门' },\n        筑基真解: { 阶: '玄', 性: '通用', 效: '筑基' },\n        金丹大道: { 阶: '地', 性: '通用', 效: '结丹' },\n        // 五行天阶 - 合并相似\n        万剑归宗诀: { 阶: '天', 性: '金剑', 效: '剑阁镇宗' },\n        建木通天诀: { 阶: '天', 性: '木', 效: '建木镇宗' },\n        北冥真经: { 阶: '天', 性: '水', 效: '玄武吞噬' },\n        朱雀涅槃经: { 阶: '天', 性: '火', 效: '离火涅槃' },\n        不动明王身: { 阶: '天', 性: '土佛', 效: '金刚防御' },\n        // 仙阶\n        万木朝宗: { 阶: '仙', 性: '木', 效: '青帝遗法' },\n        海纳百川: { 阶: '仙', 性: '水', 效: '归墟本源' },\n        祝融神火: { 阶: '仙', 性: '火', 效: '火神遗法' },\n        轮回经: { 阶: '仙', 性: '轮回', 效: '{{user}}专属' },\n        斩轮回剑典: { 阶: '仙', 性: '剑轮回', 效: '{{user}}前世' },\n        剑意通神: { 阶: '仙', 性: '剑道', 效: '剑意化形' },\n        // 特殊 - 保留关键\n        九天雷神诀: { 阶: '天', 性: '雷', 效: '雷霆' },\n        虚空经: { 阶: '天', 性: '空间', 效: '空间' },\n        万法归宗: { 阶: '天', 性: '通用', 效: '模拟' },\n        医仙宝典: { 阶: '天', 性: '医道', 效: '医道' },\n        天魔策: { 阶: '天', 性: '魔道', 效: '速成' },\n    }),\n    法宝库: z.record(z.string().describe('法宝名'), TreasureSchema).prefault({\n        // 核心仙器（白名单）\n        镇渊剑: { 阶: '仙器', 类: '剑' },\n        双鱼佩: { 阶: '仙器', 类: '护身' },\n        // 基础法宝\n        青锋剑: { 阶: '法器', 类: '剑' },\n        储物戒: { 阶: '灵器', 类: '储物' },\n        // 四象灵宝\n        青龙剑: { 阶: '灵宝', 类: '剑' },\n        白虎剑: { 阶: '灵宝', 类: '剑' },\n        朱雀剑: { 阶: '灵宝', 类: '剑' },\n        玄武剑: { 阶: '灵宝', 类: '剑' },\n    }),\n    地点库: z.record(z.string().describe('地点名'), LocationSchema).prefault({\n        // 天层 - 保留核心禁地\n        天渊: { 域: '天层', 类: '禁地', 危: 95, 特: '星辰裂隙', 资: ['星辰碎片', '陨铁'] },\n        罡风带: { 域: '天层', 类: '禁地', 危: 90, 特: '罡风屏障', 资: ['罡风精华'] },\n        // 神州 - 压缩描述但保留关键信息\n        问道峰: { 域: '神州', 类: '宗门', 危: 10, 特: '万法宗', 资: ['功法', '灵药'] },\n        剑门关: { 域: '神州', 类: '宗门', 危: 15, 特: '剑阁', 资: ['剑意', '飞剑'] },\n        藏书阁: { 域: '神州', 类: '宗门', 危: 5, 特: '古籍', 资: ['功法', '秘术'] },\n        酆都城: { 域: '神州', 类: '城镇', 危: 30, 特: '鬼市', 资: ['幽冥材料'] },\n        龙门瀑: { 域: '神州', 类: '秘境', 危: 40, 特: '化龙', 资: ['龙气'] },\n        // 东苍 - 保留重要遗迹和秘境\n        建木林: { 域: '东苍', 类: '地形', 危: 50, 特: '古树精', 资: ['灵木', '妖丹'] },\n        青帝陵: { 域: '东苍', 类: '遗迹', 危: 85, 特: '青帝传承', 资: ['青帝传承'] },\n        百花境: { 域: '东苍', 类: '秘境', 危: 20, 特: '花海', 资: ['灵花'] },\n        // 南炎 - 火系核心地点\n        不灭火山: { 域: '南炎', 类: '地形', 危: 80, 特: '朱雀涅槃', 资: ['朱雀火'] },\n        涅槃台: { 域: '南炎', 类: '遗迹', 危: 70, 特: '涅槃', 资: ['涅槃感悟'] },\n        // 西庚 - 剑道圣地\n        万剑冢: { 域: '西庚', 类: '禁地', 危: 85, 特: '剑意', 资: ['剑意', '古剑'] },\n        // 北冥 - 水系核心\n        玄冰山: { 域: '北冥', 类: '宗门', 危: 50, 特: '玄武宗', 资: ['玄冰'] },\n        归墟眼: { 域: '北冥', 类: '禁地', 危: 99, 特: '归墟', 资: ['归墟感悟'] },\n        // 下层 - 危险禁地\n        黄泉迹: { 域: '下层', 类: '遗迹', 危: 90, 特: '幽冥', 资: ['黄泉水'] },\n        炎渊: { 域: '下层', 类: '禁地', 危: 95, 特: '地心火', 资: ['地心火'] },\n    }),\n    灵根库: z.record(z.string().describe('灵根名'), SpiritRootSchema).prefault({\n        // 天灵根\n        金天根: { 质: '天', 性: '金', 稀: '传' },\n        木天根: { 质: '天', 性: '木', 稀: '传' },\n        水天根: { 质: '天', 性: '水', 稀: '传' },\n        火天根: { 质: '天', 性: '火', 稀: '传' },\n        土天根: { 质: '天', 性: '土', 稀: '传' },\n        // 多灵根\n        三灵根: { 质: '上', 性: '三系', 稀: '罕' },\n        四灵根: { 质: '中', 性: '四系', 稀: '少' },\n        五行杂根: { 质: '下', 性: '五行', 稀: '常' },\n        // 变异灵根\n        冰根: { 质: '异', 性: '冰', 稀: '传' },\n        雷根: { 质: '异', 性: '雷', 稀: '传' },\n        离火根: { 质: '异', 性: '离火', 稀: '传' },\n        空间根: { 质: '异', 性: '空间', 稀: '传' },\n        时间根: { 质: '异', 性: '时间', 稀: '传' },\n        混沌根: { 质: '异', 性: '混沌', 稀: '传' },\n        轮回根: { 质: '异', 性: '轮回', 稀: '传' },\n    }),\n    体质库: z.record(z.string().describe('体质名'), PhysiqueSchema).prefault({\n        凡体: { 质: '凡', 特: '普通', 稀: '常' },\n        // 灵体 - 合并相似属性体质\n        玄冰体: { 质: '灵', 特: '冰系增强', 稀: '罕' },\n        离火体: { 质: '灵', 特: '火系增强', 稀: '罕' },\n        木灵体: { 质: '灵', 特: '恢复增强', 稀: '罕' },\n        天籁体: { 质: '灵', 特: '音律神通', 稀: '罕' },\n        花妖体: { 质: '灵', 特: '魅惑控制', 稀: '稀' },\n        // 道体\n        朱雀脉: { 质: '道', 特: '火系涅槃', 稀: '传' },\n        真龙脉: { 质: '道', 特: '龙族神通', 稀: '传' },\n        战体: { 质: '道', 特: '战力倍增', 稀: '传' },\n        梦魇体: { 质: '道', 特: '幻术掌控', 稀: '传' },\n        雪魂体: { 质: '道', 特: '冰系极致', 稀: '传' },\n        // 圣体\n        混沌体: { 质: '圣', 特: '万法无阻', 稀: '传' },\n        道体: { 质: '圣', 特: '悟性极高', 稀: '传' },\n        金身: { 质: '圣', 特: '防御无敌', 稀: '传' },\n        // 神体\n        轮回体: { 质: '神', 特: '{{user}}专属轮回', 稀: '传' },\n        时空体: { 质: '神', 特: '时空掌控', 稀: '传' },\n    }),\n    本尊: z\n        .object({\n        等级: z.coerce.number().transform(v => _.clamp(v, 1, 36)).prefault(1),\n        修为: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        灵根: z.string().prefault('五行杂灵根'),\n        体质: z.string().prefault('凡体'),\n        功法: z.string().prefault('无'),\n        本命兵器: z.string().prefault('无'),\n        神通列表: z\n            .record(z.string().describe('神通名'), z.object({\n            名称: z.string().prefault(''),\n            描述: z.string().prefault(''),\n            类型: z.enum(['功法', '神通', '秘术']).prefault('神通'), // 新增：区分功法和神通\n            品阶: z.string()\n                .transform(v => {\n                // 容错：修正常见错误写法\n                const 品阶映射 = {\n                    '凡': '凡', '凡阶': '凡', '凡级': '凡', '凡品': '凡',\n                    '黄': '黄', '黄阶': '黄', '黄级': '黄', '黄品': '黄',\n                    '玄': '玄', '玄阶': '玄', '玄级': '玄', '玄品': '玄',\n                    '地': '地', '地阶': '地', '地级': '地', '地品': '地',\n                    '天': '天', '天阶': '天', '天级': '天', '天品': '天',\n                    '仙': '仙', '仙阶': '仙', '仙级': '仙', '仙品': '仙',\n                    '圣': '圣', '圣阶': '圣', '圣级': '圣', '圣品': '圣',\n                    '先天': '先天', '先天阶': '先天', '先天级': '先天',\n                };\n                return 品阶映射[v] || '凡';\n            })\n                .catch('凡'),\n            熟练度: z.string()\n                .transform(v => {\n                // 容错：修正常见错误写法\n                const 熟练度映射 = {\n                    '入门': '入门', '初级': '入门', '初学': '入门', '新手': '入门',\n                    '熟练': '熟练', '中级': '熟练', '娴熟': '熟练',\n                    '精通': '精通', '高级': '精通', '精湛': '精通',\n                    '大成': '大成', '大师': '大成', '宗师': '大成',\n                    '圆满': '圆满', '完美': '圆满', '极致': '圆满',\n                    '化境': '化境', '化神': '化境', '返璞归真': '化境', '出神入化': '化境',\n                };\n                return 熟练度映射[v] || '入门';\n            })\n                .catch('入门'),\n            领悟时间: z.coerce.number().catch(() => Date.now()),\n            威力等级: z.coerce.number().optional(),\n        })\n            .transform(skill => {\n            // 仅当威力等级不存在或为0时才计算\n            if (!skill.威力等级 || skill.威力等级 === 0) {\n                const 品阶权重 = { 凡: 1, 黄: 2, 玄: 3, 地: 4, 天: 5, 仙: 6, 圣: 7, 先天: 8 };\n                const 熟练度权重 = { 入门: 1, 熟练: 2, 精通: 3, 大成: 4, 圆满: 5, 化境: 6 };\n                const 品阶值 = 品阶权重[skill.品阶] || 1;\n                const 熟练值 = 熟练度权重[skill.熟练度] || 1;\n                return {\n                    ...skill,\n                    威力等级: 品阶值 * 10 + 熟练值,\n                };\n            }\n            return skill;\n        }))\n            .prefault({}),\n        灵石: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        已活岁月: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        尝试突破: z.boolean().prefault(false),\n        行踪: z.object({\n            当前区域: z.string().prefault('未知之地'),\n            所属层级: z.string().prefault('地层'),\n            环境描述: z.string().prefault(''),\n            危险度: z.coerce.number().prefault(10),\n            可用通道: z.array(z.string()).prefault([]),\n            导航信息: z.string().prefault(''),\n        }).prefault({\n            当前区域: '未知之地',\n            所属层级: '地层',\n            环境描述: '',\n            危险度: 10,\n            可用通道: [],\n            导航信息: '',\n        }),\n        身份: z.object({\n            姓名: z.string().prefault('无名氏'),\n            宗门: z.string().prefault('散修'),\n            出身: z.string().prefault('凡人'),\n        }).prefault({\n            姓名: '无名氏',\n            宗门: '散修',\n            出身: '凡人',\n        }),\n        背包: z\n            .record(z.string().describe('物品名'), ItemSchema)\n            .prefault({})\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n        法宝: z\n            .record(z.string().describe('法宝名'), ItemSchema)\n            .prefault({})\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n        杂物袋: z\n            .record(z.string().describe('杂物名'), ItemSchema)\n            .prefault({})\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    })\n        .prefault({\n        等级: 1,\n        修为: 0,\n        灵根: '五行杂灵根',\n        体质: '凡体',\n        功法: '无',\n        本命兵器: '无',\n        神通列表: {},\n        灵石: 0,\n        已活岁月: 0,\n        尝试突破: false,\n        行踪: {\n            当前区域: '未知之地',\n            所属层级: '地层',\n            环境描述: '',\n            危险度: 10,\n            可用通道: [],\n            导航信息: '',\n        },\n        身份: {\n            姓名: '无名氏',\n            宗门: '散修',\n            出身: '凡人',\n        },\n        背包: {},\n        法宝: {},\n        杂物袋: {},\n    })\n        .transform(data => {\n        const level = data.等级;\n        const 突破阈值 = REALM_THRESHOLDS[level - 1] ?? 100;\n        const 寿元上限 = REALM_LIFESPANS[level - 1] ?? 100;\n        const majorIdx = Math.floor((level - 1) / 4);\n        const minorIdx = (level - 1) % 4;\n        const 境界描述 = `${REALM_NAMES[majorIdx] ?? '练气'}${REALM_STAGES[minorIdx] ?? '初期'}`;\n        const 寿元状态 = `${data.已活岁月}/${寿元上限}`;\n        const 状态 = data.尝试突破 ? '突破中' : data.修为 >= 突破阈值 ? '瓶颈期' : '修炼中';\n        const 进度 = `${((data.修为 / 突破阈值) * 100).toFixed(1)}%`;\n        return {\n            ...data,\n            突破阈值,\n            寿元上限,\n            境界描述,\n            寿元状态,\n            状态,\n            进度,\n        };\n    }),\n    红颜角色库: z.record(z.string().describe('角色名'), z.object({\n        级: z.coerce.number().transform(v => _.clamp(v, 1, 36)),\n        根: z.string().describe('灵根'),\n        质: z.string().describe('体质'),\n        龄: z.string().describe('年龄'),\n        属: z.string().describe('所属'),\n        法: z.string().describe('功法'),\n        器: z.string().describe('本命兵器'),\n        通: z.array(z.string()).prefault([]),\n        型: z.enum(['核心', '重要', '次要']),\n    })).prefault({\n        许听雨: { 级: 33, 根: '水本源天', 质: '归墟神体', 龄: '外26实12000', 属: '归墟之主', 法: '万水归源先天', 器: '沧海遗珠先天', 通: ['归墟歌', '逆流虚妄', '寂灭海域', '万水同源'], 型: '核心' },\n        虞汐颜: { 级: 12, 根: '水阴阳异', 质: '双鱼体', 龄: '化形0年', 属: '{{user}}玉佩', 法: '双生天极/阴阳', 器: '双鱼佩本体', 通: ['枯木春', '夺命妆', '双鱼梦'], 型: '核心' },\n        白清弦: { 级: 29, 根: '金天根', 质: '剑体', 龄: '外30实1000+', 属: '散修剑宗师', 法: '剑意仙/天音天', 器: '清弦琴剑灵宝', 通: ['琴剑杀', '剑意歌', '万剑心'], 型: '核心' },\n        南宫云裳: { 级: 16, 根: '火天根', 质: '神凰道体', 龄: '外10实118', 属: '大夏栖凤宫主', 法: '九转涅槃仙', 器: '栖梧簪灵宝', 通: ['南明离火', '凰威镇世', '羽化虚空'], 型: '核心' },\n        焰绯月: { 级: 12, 根: '离火根极', 质: '朱雀脉', 龄: '25', 属: '离火宫圣女', 法: '朱雀天', 器: '绯月弓法宝', 通: ['离火天', '朱雀身', '凤凰槃'], 型: '重要' },\n        幻千丝: { 级: 13, 根: '暗幻双根', 质: '梦魇体', 龄: '外20未知', 属: '散修幽冥', 法: '织梦天', 器: '千丝网灵宝', 通: ['织梦笼', '心魔境', '千丝缚'], 型: '重要' },\n        花想容: { 级: 8, 根: '木根', 质: '花妖体', 龄: '外12', 属: '建木宗', 法: '百花地', 器: '牡丹瓣', 通: ['花海域', '治愈粉', '魅惑香'], 型: '次要' },\n    }),\n    红颜: z\n        .record(z.string().describe('红颜名'), z\n        .object({\n        等级: z.coerce.number().transform(v => _.clamp(v, 1, 36)).prefault(1),\n        修为: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        灵根: z.string().prefault('五行杂灵根'),\n        体质: z.string().prefault('凡体'),\n        功法: z.string().prefault('无'),\n        本命兵器: z.string().prefault('无'),\n        神通列表: z\n            .record(z.string().describe('神通名'), z.object({\n            名称: z.string().prefault(''),\n            描述: z.string().prefault(''),\n            类型: z.enum(['功法', '神通', '秘术']).prefault('神通'), // 新增：区分功法和神通\n            品阶: z.string()\n                .transform(v => {\n                // 容错：修正常见错误写法\n                const 品阶映射 = {\n                    '凡': '凡', '凡阶': '凡', '凡级': '凡', '凡品': '凡',\n                    '黄': '黄', '黄阶': '黄', '黄级': '黄', '黄品': '黄',\n                    '玄': '玄', '玄阶': '玄', '玄级': '玄', '玄品': '玄',\n                    '地': '地', '地阶': '地', '地级': '地', '地品': '地',\n                    '天': '天', '天阶': '天', '天级': '天', '天品': '天',\n                    '仙': '仙', '仙阶': '仙', '仙级': '仙', '仙品': '仙',\n                    '圣': '圣', '圣阶': '圣', '圣级': '圣', '圣品': '圣',\n                    '先天': '先天', '先天阶': '先天', '先天级': '先天',\n                };\n                return 品阶映射[v] || '凡';\n            })\n                .catch('凡'),\n            熟练度: z.string()\n                .transform(v => {\n                // 容错：修正常见错误写法\n                const 熟练度映射 = {\n                    '入门': '入门', '初级': '入门', '初学': '入门', '新手': '入门',\n                    '熟练': '熟练', '中级': '熟练', '娴熟': '熟练',\n                    '精通': '精通', '高级': '精通', '精湛': '精通',\n                    '大成': '大成', '大师': '大成', '宗师': '大成',\n                    '圆满': '圆满', '完美': '圆满', '极致': '圆满',\n                    '化境': '化境', '化神': '化境', '返璞归真': '化境', '出神入化': '化境',\n                };\n                return 熟练度映射[v] || '入门';\n            })\n                .catch('入门'),\n            领悟时间: z.coerce.number().catch(() => Date.now()),\n            威力等级: z.coerce.number().optional(),\n        })\n            .transform(skill => {\n            // 仅当威力等级不存在或为0时才计算\n            if (!skill.威力等级 || skill.威力等级 === 0) {\n                const 品阶权重 = { 凡: 1, 黄: 2, 玄: 3, 地: 4, 天: 5, 仙: 6, 圣: 7, 先天: 8 };\n                const 熟练度权重 = { 入门: 1, 熟练: 2, 精通: 3, 大成: 4, 圆满: 5, 化境: 6 };\n                const 品阶值 = 品阶权重[skill.品阶] || 1;\n                const 熟练值 = 熟练度权重[skill.熟练度] || 1;\n                return {\n                    ...skill,\n                    威力等级: 品阶值 * 10 + 熟练值,\n                };\n            }\n            return skill;\n        }))\n            .prefault({}),\n        灵石: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        已活岁月: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n        尝试突破: z.boolean().prefault(false),\n        好感度: z.coerce.number().transform(v => _.clamp(v, -100, 100)).prefault(0),\n        关系: z.string().prefault('陌生人'),\n        重要性: z.string().prefault('路人'),\n    })\n        .prefault({\n        等级: 1,\n        修为: 0,\n        灵根: '五行杂灵根',\n        体质: '凡体',\n        功法: '无',\n        本命兵器: '无',\n        神通列表: {},\n        灵石: 0,\n        已活岁月: 0,\n        尝试突破: false,\n        好感度: 0,\n        关系: '陌生人',\n        重要性: '路人',\n    })\n        .transform(data => {\n        const level = data.等级;\n        const 突破阈值 = REALM_THRESHOLDS[level - 1] ?? 100;\n        const 寿元上限 = REALM_LIFESPANS[level - 1] ?? 100;\n        const majorIdx = Math.floor((level - 1) / 4);\n        const minorIdx = (level - 1) % 4;\n        const 境界描述 = `${REALM_NAMES[majorIdx] ?? '练气'}${REALM_STAGES[minorIdx] ?? '初期'}`;\n        const 寿元状态 = `${data.已活岁月}/${寿元上限}`;\n        const 状态 = data.尝试突破 ? '突破中' : data.修为 >= 突破阈值 ? '瓶颈期' : '修炼中';\n        const 进度 = `${((data.修为 / 突破阈值) * 100).toFixed(1)}%`;\n        return {\n            ...data,\n            突破阈值,\n            寿元上限,\n            境界描述,\n            寿元状态,\n            状态,\n            进度,\n        };\n    }))\n        .prefault({}),\n    // NPC图鉴 - 极简版（保留向后兼容）\n    NPC图鉴: z.record(z.string().describe('NPC名'), z.object({\n        等级: z.coerce.number().transform(v => _.clamp(v, 1, 36)).prefault(1),\n        所在宗门: z.string().prefault('散修'),\n        备注: z.string().prefault(''),\n    })).prefault({}),\n    // 任务列表 - 参考储物栏的稳定更新逻辑\n    任务列表: z\n        .record(z.string().describe('任务ID'), z.object({\n        名称: z.string().prefault(''),\n        类型: z.enum(['主线', '支线', '每日', '临危受命', '秘境探索']).prefault('主线'),\n        目标: z.string().prefault(''),\n        状态: z.enum(['进行中', '已完成', '已失败']).prefault('进行中'),\n        // 秘境专属字段（仅当类型为秘境探索时需要）\n        秘境信息: z\n            .object({\n            域: z.enum(['天层', '神州', '东苍', '南炎', '西庚', '北冥', '下层', '四海']).optional(),\n            危: z.coerce.number().transform(v => _.clamp(v, 0, 100)).optional(),\n            特: z.string().optional(),\n            奖: z.array(z.string()).prefault([]),\n            限: z.string().optional(),\n        })\n            .optional(),\n        创建时间: z.coerce.number().prefault(() => Date.now()),\n    }))\n        .prefault({})\n        .transform(tasks => {\n        // 按创建时间排序,保留最近的任务\n        const sorted = _(tasks)\n            .entries()\n            .sortBy(([_, t]) => -(t.创建时间 || 0));\n        // 保留所有进行中的任务 + 最近10个已完成/已失败的任务\n        const active = sorted.filter(([_, t]) => t.状态 === '进行中').value();\n        const completed = sorted.filter(([_, t]) => t.状态 !== '进行中').take(10).value();\n        return _.fromPairs([...active, ...completed]);\n    }),\n    // 声望系统 - 健壮性与智能管理优化\n    声望系统: z\n        .record(z.string().describe('势力名'), z.object({\n        值: z.coerce.number().transform(v => _.clamp(v, -100, 100)).prefault(0),\n        关系: z.string().prefault('陌生'),\n        更新时间: z.coerce.number().prefault(() => Date.now()),\n    }))\n        .prefault({})\n        .transform(factions => {\n        // 自动根据声望值计算关系描述\n        return _(factions)\n            .mapValues(faction => {\n            const value = faction.值;\n            let 自动关系;\n            if (value >= 80) {\n                自动关系 = '盟友';\n            }\n            else if (value >= 60) {\n                自动关系 = '友善';\n            }\n            else if (value >= 30) {\n                自动关系 = '友好';\n            }\n            else if (value >= 10) {\n                自动关系 = '中立偏好';\n            }\n            else if (value >= -10) {\n                自动关系 = '中立';\n            }\n            else if (value >= -30) {\n                自动关系 = '中立偏恶';\n            }\n            else if (value >= -60) {\n                自动关系 = '敌对';\n            }\n            else if (value >= -80) {\n                自动关系 = '仇恨';\n            }\n            else {\n                自动关系 = '不死不休';\n            }\n            // 如果用户手动设置了关系，优先使用用户设置；否则使用自动计算的关系\n            const 最终关系 = faction.关系 && faction.关系 !== '陌生' ? faction.关系 : 自动关系;\n            return {\n                ...faction,\n                关系: 最终关系,\n            };\n        })\n            .value();\n    }),\n});\n// 配置常量\nexport const CONFIG = {\n    REALMS: {\n        MAJOR: REALM_NAMES,\n        MINOR: REALM_STAGES,\n    },\n    ELEMENTS: {\n        火: { effect: '灼烧', visual: '烈焰', nature: '爆裂', color: '#ff4444' },\n        水: { effect: '缠绕', visual: '激流', nature: '柔韧', color: '#4488ff' },\n        冰: { effect: '冻结', visual: '寒霜', nature: '极寒', color: '#88ddff' },\n        雷: { effect: '麻痹', visual: '紫电', nature: '狂暴', color: '#aa44ff' },\n        风: { effect: '切割', visual: '罡风', nature: '无形', color: '#88ff88' },\n        土: { effect: '镇压', visual: '岩铠', nature: '厚重', color: '#aa8844' },\n        木: { effect: '寄生', visual: '藤蔓', nature: '生生不息', color: '#44aa44' },\n        金: { effect: '穿透', visual: '锐金', nature: '锋利', color: '#ffdd44' },\n        暗: { effect: '腐蚀', visual: '黑雾', nature: '诡谲', color: '#442244' },\n        光: { effect: '净化', visual: '圣辉', nature: '神圣', color: '#ffffaa' },\n        混沌: { effect: '湮灭', visual: '灰光', nature: '虚无', color: '#888888' },\n    },\n};\n// 获取灵根元素颜色\nexport function getRootColor(root) {\n    for (const [elem, data] of Object.entries(CONFIG.ELEMENTS)) {\n        if (root.includes(elem)) {\n            return data.color;\n        }\n    }\n    return '#aaaaaa'; // 默认灰色\n}\n// 获取境界等级颜色\nexport function getRealmColor(level) {\n    const majorIdx = Math.floor((level - 1) / 4);\n    const colors = [\n        '#888888', // 练气 - 灰色\n        '#44aa44', // 筑基 - 绿色\n        '#4488ff', // 金丹 - 蓝色\n        '#aa44ff', // 元婴 - 紫色\n        '#ff4444', // 化神 - 红色\n        '#ffaa00', // 炼虚 - 橙色\n        '#ffdd44', // 合体 - 金色\n        '#ffffff', // 大乘 - 白色\n        '#ff88ff', // 渡劫 - 粉色\n    ];\n    return colors[majorIdx] || '#888888';\n}\n// 获取危险度颜色\nexport function getDangerColor(danger) {\n    if (danger >= 90)\n        return '#ff0000';\n    if (danger >= 70)\n        return '#ff4400';\n    if (danger >= 50)\n        return '#ff8800';\n    if (danger >= 30)\n        return '#ffcc00';\n    return '#44aa44';\n}\n","import { registerMvuSchema } from 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';\nimport { Schema } from '../踏月寻仙-测试版/schema';\n\n$(() => {\n    registerMvuSchema(Schema);\n    console.info('[踏月寻仙] MVU 变量结构已注册');\n    toastr.success('MVU 变量结构已成功注册', '踏月寻仙');\n});"],"names":["z","REALM_NAMES","REALM_STAGES","REALM_THRESHOLDS","REALM_LIFESPANS","ItemSchema","object","string","prefault","coerce","number","transform","v","Math","max","FactionSchema","describe","enum","TechniqueSchema","TreasureSchema","data","LocationSchema","_","clamp","array","SpiritRootSchema","PhysiqueSchema","Schema","record","layer","danger","desc","connections","catch","Date","now","optional","skill","boolean","pickBy","level","majorIdx","floor","toFixed","tasks","sorted","entries","sortBy","t","active","filter","value","completed","take","fromPairs","factions","mapValues","faction","$","console","info","toastr","success"],"ignoreList":[],"sourceRoot":""}