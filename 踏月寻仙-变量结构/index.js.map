{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/è¸æœˆå¯»ä»™-æµ‹è¯•ç‰ˆ/schema/achievements.ts","src://tavern_helper_template/src/è¸æœˆå¯»ä»™-æµ‹è¯•ç‰ˆ/schema/constants.ts","src://tavern_helper_template/src/è¸æœˆå¯»ä»™-æµ‹è¯•ç‰ˆ/schema/common.ts","src://tavern_helper_template/src/è¸æœˆå¯»ä»™-æµ‹è¯•ç‰ˆ/schema/utils.ts","src://tavern_helper_template/src/è¸æœˆå¯»ä»™-æµ‹è¯•ç‰ˆ/schema/characters.ts","src://tavern_helper_template/src/è¸æœˆå¯»ä»™-æµ‹è¯•ç‰ˆ/schema/protagonist.ts","src://tavern_helper_template/src/è¸æœˆå¯»ä»™-æµ‹è¯•ç‰ˆ/schema/systems.ts","src://tavern_helper_template/src/è¸æœˆå¯»ä»™-æµ‹è¯•ç‰ˆ/schema/world.ts","src://tavern_helper_template/src/è¸æœˆå¯»ä»™-æµ‹è¯•ç‰ˆ/schema.ts","src://tavern_helper_template/src/è¸æœˆå¯»ä»™-å˜é‡ç»“æ„/index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = z;","// ============================================================================\r\n// è¸æœˆå¯»ä»™ - æˆå°±/é‡Œç¨‹ç¢‘ç³»ç»Ÿ Schema åˆ†å—\r\n// ============================================================================\r\n// è®¾è®¡ç›®æ ‡ï¼š\r\n// ğŸ† è®°å½•ç©å®¶çš„é‡è¦é‡Œç¨‹ç¢‘å’Œç‰¹æ®Šæˆå°±\r\n// ğŸ“Š æä¾›å¯é‡åŒ–çš„è¿›åº¦æ•°æ®ä¾›ç©å®¶æ¯”è¾ƒ\r\n// ğŸ–ï¸ è®¾è®¡ç¨€æœ‰æˆå°±å¢åŠ æ”¶é›†æ¬²å’Œè®¨è®ºåº¦\r\n// ğŸ“¸ ç”Ÿæˆå¯åˆ†äº«çš„\"æˆ˜ç»©å¡ç‰‡\"ä¾¿äºåœ¨ç¤¾åŒºå±•ç¤º\r\n// ============================================================================\r\n\r\nimport { z } from 'zod';\r\n\r\n// ============================================================================\r\n// æˆå°±ç±»å‹æšä¸¾\r\n// ============================================================================\r\n\r\n/** æˆå°±ç±»å‹ */\r\nexport const AchievementTypeEnum = z.enum([\r\n    'å¢ƒç•Œçªç ´', // ğŸ”® ä¿®ç‚¼å¢ƒç•Œç›¸å…³\r\n    'çº¢é¢œç¼˜åˆ†', // ğŸ’• çº¢é¢œæ”»ç•¥ç›¸å…³\r\n    'æˆ˜æ–—è£è€€', // âš”ï¸ æˆ˜æ–—æˆå°±ç›¸å…³\r\n    'æ¢ç´¢å‘ç°', // ğŸ—ºï¸ ä¸–ç•Œæ¢ç´¢ç›¸å…³\r\n    'å¥‡é‡æœºç¼˜', // âœ¨ éšæœºäº‹ä»¶ç›¸å…³\r\n    'åŠ¿åŠ›å£°æœ›', // ğŸ›ï¸ å£°æœ›æˆå°±ç›¸å…³\r\n    'æ”¶è—æˆå°±', // ğŸ“¦ æ”¶é›†ç›¸å…³\r\n    'éšè—æˆå°±', // ğŸŒŸ ç‰¹æ®Šæ¡ä»¶è§¦å‘\r\n]);\r\n\r\n/** æˆå°±ç¨€æœ‰åº¦ */\r\nexport const AchievementRarityEnum = z.enum([\r\n    'æ™®é€š',   // 40% - æ–°æ‰‹ç©å®¶æ­£å¸¸æ¸¸ç©å¯è§£é”\r\n    'ç¨€æœ‰',   // 30% - éœ€è¦ä¸€å®šæŠ•å…¥æ‰èƒ½è§£é”\r\n    'å²è¯—',   // 15% - éœ€è¦é’ˆå¯¹æ€§åŠªåŠ›\r\n    'ä¼ è¯´',   // 10% - éœ€è¦é•¿æœŸæŠ•å…¥æˆ–ç‰¹å®šæ¡ä»¶\r\n    'ç¥è¯',   // 5%  - æéš¾è¾¾æˆï¼Œä¾›æœ€ç¡¬æ ¸ç©å®¶æŒ‘æˆ˜\r\n]);\r\n\r\n// ============================================================================\r\n// å·²è§£é”æˆå°± Schema\r\n// ============================================================================\r\n\r\n/** å•ä¸ªå·²è§£é”æˆå°± */\r\nexport const UnlockedAchievementSchema = z.object({\r\n    åç§°: z.string().prefault(''),\r\n    æè¿°: z.string().prefault(''),\r\n    ç±»å‹: AchievementTypeEnum.prefault('å¥‡é‡æœºç¼˜'),\r\n    ç¨€æœ‰åº¦: AchievementRarityEnum.prefault('æ™®é€š'),\r\n    è§£é”æ—¶é—´: z.coerce.number().prefault(() => Date.now()),\r\n    è§£é”æ¡ä»¶: z.string().prefault(''),\r\n    // ä¸“å±çºªå¿µï¼šè§£é”ç¬é—´çš„åœºæ™¯æè¿°\r\n    ç¬¬ä¸€å°è±¡: z.string().optional().describe('è§£é”ç¬é—´çš„åœºæ™¯æè¿°'),\r\n});\r\n\r\n// ============================================================================\r\n// é‡Œç¨‹ç¢‘ç»Ÿè®¡ Schemaï¼ˆå¯é‡åŒ–æ¯”è¾ƒçš„æ•°æ®ï¼‰\r\n// ============================================================================\r\n\r\n/** é‡Œç¨‹ç¢‘ç»Ÿè®¡ */\r\nexport const MilestoneSchema = z.object({\r\n    // ========== å¢ƒç•Œç›¸å…³ ==========\r\n    æœ€é«˜å¢ƒç•Œ: z.coerce.number().transform(v => _.clamp(v, 1, 36)).prefault(1),\r\n    çªç ´æ¬¡æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    æ¸¡åŠ«æ¬¡æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    æ¸¡åŠ«æˆåŠŸæ¬¡æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n\r\n    // ========== çº¢é¢œç›¸å…³ ==========\r\n    çº¢é¢œç›¸è¯†æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    çº¢é¢œç»“ç¼˜æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    çº¢é¢œåŒä¿®æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    çº¢é¢œå¥½æ„Ÿåº¦æ€»å’Œ: z.coerce.number().prefault(0),\r\n    æœ€é«˜å¥½æ„Ÿçº¢é¢œ: z.string().prefault('æ— '),\r\n\r\n    // ========== æˆ˜æ–—ç›¸å…³ ==========\r\n    æˆ˜æ–—æ€»åœºæ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    æˆ˜æ–—èƒœåˆ©æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    è¶Šçº§å‡»æ€æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    æœ€é«˜è¶Šçº§å±‚æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    æ¿’æ­»é€ƒç”Ÿæ¬¡æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    è¿èƒœæœ€é«˜çºªå½•: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n\r\n    // ========== æ¢ç´¢ç›¸å…³ ==========\r\n    æ¢ç´¢åŒºåŸŸæ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    ç§˜å¢ƒé€šå…³æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    ç¦åœ°è¸è¶³æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    é—è¿¹å‘ç°æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n\r\n    // ========== å¥‡é‡ç›¸å…³ ==========\r\n    å¤©å‘½æ‰€å½’æ¬¡æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    å¥‡ç¼˜é­é‡æ¬¡æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    å±æœºåŒ–è§£æ¬¡æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n\r\n    // ========== åŠ¿åŠ›ç›¸å…³ ==========\r\n    ç›Ÿå‹åŠ¿åŠ›æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    æ•Œå¯¹åŠ¿åŠ›æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n\r\n    // ========== æ”¶è—ç›¸å…³ ==========\r\n    åŠŸæ³•ä¹ å¾—æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    ç¥é€šé¢†æ‚Ÿæ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    æ³•å®è·å¾—æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    æœ¬å‘½æ³•å®æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n\r\n    // ========== ç‰¹æ®Šç»Ÿè®¡ ==========\r\n    æ¸¸æˆæ€»æ—¶é•¿: z.coerce.number().transform(v => Math.max(0, v)).prefault(0).describe('æ¸¸æˆå†…å¹´æ•°'),\r\n    æ­»äº¡æ¬¡æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    é‡ç”Ÿæ¬¡æ•°: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n}).prefault({});\r\n\r\n// ============================================================================\r\n// ç§°å·ç³»ç»Ÿ Schema\r\n// ============================================================================\r\n\r\n/** ç§°å·ç³»ç»Ÿ */\r\nexport const TitleSchema = z.object({\r\n    å·²è·å¾—: z.array(z.string()).prefault([]),\r\n    å½“å‰ä½©æˆ´: z.string().prefault('æ— åæ•£ä¿®'),\r\n}).prefault({\r\n    å·²è·å¾—: [],\r\n    å½“å‰ä½©æˆ´: 'æ— åæ•£ä¿®',\r\n});\r\n\r\n// ============================================================================\r\n// æˆå°±è¿›åº¦è¿½è¸ª Schema\r\n// ============================================================================\r\n\r\n/** å•ä¸ªæˆå°±è¿›åº¦ */\r\nexport const AchievementProgressSchema = z.object({\r\n    å½“å‰è¿›åº¦: z.coerce.number().prefault(0),\r\n    ç›®æ ‡è¿›åº¦: z.coerce.number().prefault(1),\r\n    æœ€åæ›´æ–°: z.coerce.number().prefault(() => Date.now()),\r\n});\r\n\r\n// ============================================================================\r\n// å®Œæ•´æˆå°±ç³»ç»Ÿ Schema\r\n// ============================================================================\r\n\r\n/** å®Œæ•´æˆå°±ç³»ç»Ÿ */\r\nexport const AchievementSystemSchema = z.object({\r\n    // ========== å·²è§£é”æˆå°± ==========\r\n    å·²è§£é”: z.record(\r\n        z.string().describe('æˆå°±ID'),\r\n        UnlockedAchievementSchema\r\n    ).prefault({}),\r\n\r\n    // ========== é‡Œç¨‹ç¢‘ç»Ÿè®¡ï¼ˆå¯é‡åŒ–æ¯”è¾ƒï¼‰ ==========\r\n    é‡Œç¨‹ç¢‘: MilestoneSchema,\r\n\r\n    // ========== ç§°å·ç³»ç»Ÿï¼ˆå¯è£…å¤‡å±•ç¤ºï¼‰ ==========\r\n    ç§°å·: TitleSchema,\r\n\r\n    // ========== æˆå°±è¿›åº¦è¿½è¸ª ==========\r\n    è¿›åº¦è¿½è¸ª: z.record(\r\n        z.string().describe('æˆå°±ID'),\r\n        AchievementProgressSchema\r\n    ).prefault({}),\r\n\r\n}).prefault({});\r\n\r\n// ============================================================================\r\n// ç±»å‹å¯¼å‡º\r\n// ============================================================================\r\n\r\nexport type AchievementType = z.infer<typeof AchievementTypeEnum>;\r\nexport type AchievementRarity = z.infer<typeof AchievementRarityEnum>;\r\nexport type UnlockedAchievement = z.infer<typeof UnlockedAchievementSchema>;\r\nexport type Milestone = z.infer<typeof MilestoneSchema>;\r\nexport type Title = z.infer<typeof TitleSchema>;\r\nexport type AchievementProgress = z.infer<typeof AchievementProgressSchema>;\r\nexport type AchievementSystem = z.infer<typeof AchievementSystemSchema>;\r\n\r\n// ============================================================================\r\n// æˆå°±æ¸…å•å¸¸é‡ï¼ˆä¾›è„šæœ¬ä½¿ç”¨ï¼‰\r\n// ============================================================================\r\n\r\n/**\r\n * æˆå°±å®šä¹‰è¡¨\r\n * - è„šæœ¬é€šè¿‡æ£€æµ‹æ¡ä»¶è‡ªåŠ¨è§£é”æˆå°±\r\n * - AI ä¹Ÿå¯ä»¥æ ¹æ®å™äº‹ç›´æ¥è§¦å‘æˆå°±è§£é”\r\n */\r\nexport const ACHIEVEMENT_DEFINITIONS = {\r\n    // ========== å¢ƒç•Œçªç ´ç±» ğŸ”® ==========\r\n    realm_01: { åç§°: 'è¸å…¥ä»™é€”', æè¿°: 'é¦–æ¬¡çªç ´ç»ƒæ°”æœŸ', ç±»å‹: 'å¢ƒç•Œçªç ´' as const, ç¨€æœ‰åº¦: 'æ™®é€š' as const, ç§°å·: 'ä¿®å£«', æ¡ä»¶: 'ç­‰çº§ >= 2' },\r\n    realm_02: { åç§°: 'ç­‘åŸºæˆåŠŸ', æè¿°: 'è¾¾åˆ°ç­‘åŸºæœŸ', ç±»å‹: 'å¢ƒç•Œçªç ´' as const, ç¨€æœ‰åº¦: 'æ™®é€š' as const, ç§°å·: 'ç­‘åŸºä¿®å£«', æ¡ä»¶: 'ç­‰çº§ >= 5' },\r\n    realm_03: { åç§°: 'é‡‘ä¸¹å¤§é“', æè¿°: 'è¾¾åˆ°é‡‘ä¸¹æœŸ', ç±»å‹: 'å¢ƒç•Œçªç ´' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, ç§°å·: 'é‡‘ä¸¹çœŸäºº', æ¡ä»¶: 'ç­‰çº§ >= 9' },\r\n    realm_04: { åç§°: 'å…ƒå©´å‡ºçª', æè¿°: 'è¾¾åˆ°å…ƒå©´æœŸ', ç±»å‹: 'å¢ƒç•Œçªç ´' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, ç§°å·: 'å…ƒå©´çœŸå›', æ¡ä»¶: 'ç­‰çº§ >= 13' },\r\n    realm_05: { åç§°: 'åŒ–ç¥é€šå¤©', æè¿°: 'è¾¾åˆ°åŒ–ç¥æœŸ', ç±»å‹: 'å¢ƒç•Œçªç ´' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'åŒ–ç¥å°Šè€…', æ¡ä»¶: 'ç­‰çº§ >= 17' },\r\n    realm_06: { åç§°: 'è™šç©ºç‚¼é“', æè¿°: 'è¾¾åˆ°ç‚¼è™šæœŸ', ç±»å‹: 'å¢ƒç•Œçªç ´' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'ç‚¼è™šå¤§èƒ½', æ¡ä»¶: 'ç­‰çº§ >= 21' },\r\n    realm_07: { åç§°: 'å¤©äººåˆä¸€', æè¿°: 'è¾¾åˆ°åˆä½“æœŸ', ç±»å‹: 'å¢ƒç•Œçªç ´' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'åˆä½“è€ç¥–', æ¡ä»¶: 'ç­‰çº§ >= 25' },\r\n    realm_08: { åç§°: 'å¤§ä¹˜åœ†æ»¡', æè¿°: 'è¾¾åˆ°å¤§ä¹˜æœŸ', ç±»å‹: 'å¢ƒç•Œçªç ´' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'å¤§ä¹˜å·¨æ“˜', æ¡ä»¶: 'ç­‰çº§ >= 29' },\r\n    realm_09: { åç§°: 'æ¸¡åŠ«é£å‡', æè¿°: 'è¾¾åˆ°æ¸¡åŠ«æœŸ', ç±»å‹: 'å¢ƒç•Œçªç ´' as const, ç¨€æœ‰åº¦: 'ç¥è¯' as const, ç§°å·: 'æ¸¡åŠ«çœŸä»™', æ¡ä»¶: 'ç­‰çº§ >= 33' },\r\n    realm_10: { åç§°: 'ä¹æ­»ä¸€ç”Ÿ', æè¿°: 'æ¸¡åŠ«å¤±è´¥åå†æ¬¡æˆåŠŸ', ç±»å‹: 'å¢ƒç•Œçªç ´' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'åŠ«åä½™ç”Ÿ', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    realm_11: { åç§°: 'ä¸€å¸†é£é¡º', æè¿°: 'ä»æœªæ¸¡åŠ«å¤±è´¥åˆ°è¾¾å¤§ä¹˜', ç±»å‹: 'å¢ƒç•Œçªç ´' as const, ç¨€æœ‰åº¦: 'ç¥è¯' as const, ç§°å·: 'å¤©å‘½ä¹‹å­', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n\r\n    // ========== çº¢é¢œç¼˜åˆ†ç±» ğŸ’• ==========\r\n    beauty_01: { åç§°: 'åˆé‡ä½³äºº', æè¿°: 'é¦–æ¬¡ä¸ä»»æ„çº¢é¢œç›¸è¯†', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'æ™®é€š' as const, æ¡ä»¶: 'çº¢é¢œç›¸è¯†æ•° >= 1' },\r\n    beauty_02: { åç§°: 'æƒ…æ„«æš—ç”Ÿ', æè¿°: 'ä»»æ„çº¢é¢œå¥½æ„Ÿåº¦è¾¾åˆ°30', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'æ™®é€š' as const, æ¡ä»¶: 'ä»»æ„çº¢é¢œå¥½æ„Ÿåº¦ >= 30' },\r\n    beauty_03: { åç§°: 'ä¸¤æƒ…ç›¸æ‚¦', æè¿°: 'ä»»æ„çº¢é¢œå¥½æ„Ÿåº¦è¾¾åˆ°60', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, æ¡ä»¶: 'ä»»æ„çº¢é¢œå¥½æ„Ÿåº¦ >= 60' },\r\n    beauty_04: { åç§°: 'åŒä¿®ä¹‹ç¼˜', æè¿°: 'é¦–æ¬¡ä¸çº¢é¢œåŒä¿®', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, ç§°å·: 'é“ä¾£', æ¡ä»¶: 'çº¢é¢œåŒä¿®æ•° >= 1' },\r\n    beauty_05: { åç§°: 'é½äººä¹‹ç¦', æè¿°: 'åŒæ—¶ä¸3ä½çº¢é¢œå¥½æ„Ÿåº¦>60', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'æ¡ƒèŠ±ä»™', æ¡ä»¶: 'å¥½æ„Ÿåº¦>60çš„çº¢é¢œæ•° >= 3' },\r\n    beauty_06: { åç§°: 'åå®«ä½³ä¸½', æè¿°: 'åŒæ—¶ä¸5ä½çº¢é¢œå¥½æ„Ÿåº¦>60', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'å¤šæƒ…å‰‘å®¢', æ¡ä»¶: 'å¥½æ„Ÿåº¦>60çš„çº¢é¢œæ•° >= 5' },\r\n    beauty_07: { åç§°: 'æƒ…æ¯”é‡‘åš', æè¿°: 'ä»»æ„çº¢é¢œå¥½æ„Ÿåº¦è¾¾åˆ°100', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'ç—´æƒ…ç§', æ¡ä»¶: 'ä»»æ„çº¢é¢œå¥½æ„Ÿåº¦ >= 100' },\r\n    beauty_hxy: { åç§°: 'å¬é›¨çŸ¥éŸ³', æè¿°: 'ä¸è®¸å¬é›¨å…³ç³»è¾¾åˆ°\"çŸ¥å·±\"', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'å½’å¢Ÿå®¢', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    beauty_yxy: { åç§°: 'åŒé±¼å¥‘çº¦', æè¿°: 'æ¿€æ´»åŒé±¼ä½©ä¸è™æ±é¢œå¥‘çº¦', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'åŒé±¼ä¸»äºº', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    beauty_bqx: { åç§°: 'å‰‘å¿ƒç›¸å°', æè¿°: 'ä¸ç™½æ¸…å¼¦å…³ç³»è¾¾åˆ°\"é“ä¾£\"', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'å‰‘é“ä¼´ä¾£', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    beauty_ngyc: { åç§°: 'å‡¤æ –æ¢§æ¡', æè¿°: 'ä¸å—å®«äº‘è£³å…³ç³»è¾¾åˆ°\"é“ä¾£\"', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'æ¢§æ¡æ –å®¢', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    beauty_all: { åç§°: 'çº¢é¢œçŸ¥å·±', æè¿°: 'ä¸æ‰€æœ‰7ä½çº¢é¢œéƒ½è¾¾åˆ°å¥½æ„Ÿ>50', ç±»å‹: 'çº¢é¢œç¼˜åˆ†' as const, ç¨€æœ‰åº¦: 'ç¥è¯' as const, ç§°å·: 'ä¼—æ˜Ÿæ‹±æœˆ', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n\r\n    // ========== æˆ˜æ–—è£è€€ç±» âš”ï¸ ==========\r\n    battle_01: { åç§°: 'åˆæˆ˜å‘Šæ·', æè¿°: 'é¦–æ¬¡æˆ˜æ–—èƒœåˆ©', ç±»å‹: 'æˆ˜æ–—è£è€€' as const, ç¨€æœ‰åº¦: 'æ™®é€š' as const, æ¡ä»¶: 'æˆ˜æ–—èƒœåˆ©æ•° >= 1' },\r\n    battle_02: { åç§°: 'ç™¾æˆ˜è€å…µ', æè¿°: 'æˆ˜æ–—èƒœåˆ©æ•°è¾¾åˆ°100', ç±»å‹: 'æˆ˜æ–—è£è€€' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, ç§°å·: 'ç™¾æˆ˜', æ¡ä»¶: 'æˆ˜æ–—èƒœåˆ©æ•° >= 100' },\r\n    battle_03: { åç§°: 'åƒåœºä¸è´¥', æè¿°: 'æˆ˜æ–—èƒœåˆ©æ•°è¾¾åˆ°1000', ç±»å‹: 'æˆ˜æ–—è£è€€' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'æˆ˜ç¥', æ¡ä»¶: 'æˆ˜æ–—èƒœåˆ©æ•° >= 1000' },\r\n    battle_04: { åç§°: 'è¶Šçº§æŒ‘æˆ˜', æè¿°: 'é¦–æ¬¡è¶Šçº§å‡»æ€æ•Œäºº', ç±»å‹: 'æˆ˜æ–—è£è€€' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, æ¡ä»¶: 'è¶Šçº§å‡»æ€æ•° >= 1' },\r\n    battle_05: { åç§°: 'è·¨å¢ƒæ–©æ•Œ', æè¿°: 'è¶Šè¿‡ä¸€ä¸ªå¤§å¢ƒç•Œå‡»æ€æ•Œäºº', ç±»å‹: 'æˆ˜æ–—è£è€€' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'è¶Šå¢ƒè€…', æ¡ä»¶: 'æœ€é«˜è¶Šçº§å±‚æ•° >= 4' },\r\n    battle_06: { åç§°: 'ä»¥å¼±èƒœå¼º', æè¿°: 'è¶Šè¿‡ä¸¤ä¸ªå¤§å¢ƒç•Œå‡»æ€æ•Œäºº', ç±»å‹: 'æˆ˜æ–—è£è€€' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'é€†å¤©æ”¹å‘½', æ¡ä»¶: 'æœ€é«˜è¶Šçº§å±‚æ•° >= 8' },\r\n    battle_07: { åç§°: 'æ­»é‡Œé€ƒç”Ÿ', æè¿°: 'æ¿’æ­»çŠ¶æ€æˆåŠŸé€ƒè„±', ç±»å‹: 'æˆ˜æ–—è£è€€' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, ç§°å·: 'ä¸æ­»å°å¼º', æ¡ä»¶: 'æ¿’æ­»é€ƒç”Ÿæ¬¡æ•° >= 1' },\r\n    battle_08: { åç§°: 'ä¹æ­»æœªæ­»', æè¿°: 'æ¿’æ­»é€ƒç”Ÿ10æ¬¡', ç±»å‹: 'æˆ˜æ–—è£è€€' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'å‘½ç¡¬', æ¡ä»¶: 'æ¿’æ­»é€ƒç”Ÿæ¬¡æ•° >= 10' },\r\n    battle_09: { åç§°: 'è¿æˆ˜è¿æ·', æè¿°: 'è¿ç»­èƒœåˆ©10åœº', ç±»å‹: 'æˆ˜æ–—è£è€€' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, æ¡ä»¶: 'è¿èƒœæœ€é«˜çºªå½• >= 10' },\r\n    battle_10: { åç§°: 'ç™¾æˆ˜ç™¾èƒœ', æè¿°: 'è¿ç»­èƒœåˆ©100åœº', ç±»å‹: 'æˆ˜æ–—è£è€€' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'ä¸è´¥', æ¡ä»¶: 'è¿èƒœæœ€é«˜çºªå½• >= 100' },\r\n\r\n    // ========== æ¢ç´¢å‘ç°ç±» ğŸ—ºï¸ ==========\r\n    explore_01: { åç§°: 'åˆå‡ºèŒ…åº', æè¿°: 'é¦–æ¬¡ç¦»å¼€èµ·å§‹åŒºåŸŸ', ç±»å‹: 'æ¢ç´¢å‘ç°' as const, ç¨€æœ‰åº¦: 'æ™®é€š' as const, æ¡ä»¶: 'æ¢ç´¢åŒºåŸŸæ•° >= 2' },\r\n    explore_02: { åç§°: 'è¡Œè€…æ— ç–†', æè¿°: 'æ¢ç´¢10ä¸ªä¸åŒåŒºåŸŸ', ç±»å‹: 'æ¢ç´¢å‘ç°' as const, ç¨€æœ‰åº¦: 'æ™®é€š' as const, ç§°å·: 'è¡Œè€…', æ¡ä»¶: 'æ¢ç´¢åŒºåŸŸæ•° >= 10' },\r\n    explore_03: { åç§°: 'è¸éå±±æ²³', æè¿°: 'æ¢ç´¢50ä¸ªä¸åŒåŒºåŸŸ', ç±»å‹: 'æ¢ç´¢å‘ç°' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, ç§°å·: 'æ—…äºº', æ¡ä»¶: 'æ¢ç´¢åŒºåŸŸæ•° >= 50' },\r\n    explore_04: { åç§°: 'ç§˜å¢ƒæ¢ç´¢è€…', æè¿°: 'é€šå…³é¦–ä¸ªç§˜å¢ƒ', ç±»å‹: 'æ¢ç´¢å‘ç°' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, æ¡ä»¶: 'ç§˜å¢ƒé€šå…³æ•° >= 1' },\r\n    explore_05: { åç§°: 'ç§˜å¢ƒå¾æœè€…', æè¿°: 'é€šå…³10ä¸ªç§˜å¢ƒ', ç±»å‹: 'æ¢ç´¢å‘ç°' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'ç§˜å¢ƒçŒäºº', æ¡ä»¶: 'ç§˜å¢ƒé€šå…³æ•° >= 10' },\r\n    explore_06: { åç§°: 'ç¦åœ°è¡Œè€…', æè¿°: 'è¸å…¥é¦–ä¸ªç¦åœ°', ç±»å‹: 'æ¢ç´¢å‘ç°' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, æ¡ä»¶: 'ç¦åœ°è¸è¶³æ•° >= 1' },\r\n    explore_07: { åç§°: 'ç¦åœ°ç”Ÿè¿˜', æè¿°: 'ä»5ä¸ªä¸åŒç¦åœ°æ´»ç€ç¦»å¼€', ç±»å‹: 'æ¢ç´¢å‘ç°' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'ç¦åœ°è¡Œè€…', æ¡ä»¶: 'ç¦åœ°è¸è¶³æ•° >= 5' },\r\n    explore_08: { åç§°: 'å¤©æ¸Šå½’æ¥', æè¿°: 'ä»å¤©æ¸Šç”Ÿè¿˜', ç±»å‹: 'æ¢ç´¢å‘ç°' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'å¤©æ¸Šå®¢', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    explore_09: { åç§°: 'å½’å¢Ÿä¸€ç¥', æè¿°: 'è¸å…¥å½’å¢Ÿçœ¼', ç±»å‹: 'æ¢ç´¢å‘ç°' as const, ç¨€æœ‰åº¦: 'ç¥è¯' as const, ç§°å·: 'å½’å¢Ÿæ¸¸è€…', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    explore_10: { åç§°: 'é—è¿¹å‘æ˜è€…', æè¿°: 'å‘ç°5ä¸ªé—è¿¹', ç±»å‹: 'æ¢ç´¢å‘ç°' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'è€ƒå¤è€…', æ¡ä»¶: 'é—è¿¹å‘ç°æ•° >= 5' },\r\n\r\n    // ========== å¥‡é‡æœºç¼˜ç±» âœ¨ ==========\r\n    destiny_01: { åç§°: 'åˆè§å¤©å‘½', æè¿°: 'é¦–æ¬¡å¤©å‘½æ„Ÿåº”è¾¾åˆ°\"å¤©å‘½æ‰€å½’\"', ç±»å‹: 'å¥‡é‡æœºç¼˜' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, æ¡ä»¶: 'å¤©å‘½æ‰€å½’æ¬¡æ•° >= 1' },\r\n    destiny_02: { åç§°: 'å¤©å‘½çœ·é¡¾', æè¿°: 'å¤©å‘½æ‰€å½’çŠ¶æ€ç´¯è®¡10æ¬¡', ç±»å‹: 'å¥‡é‡æœºç¼˜' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'å¤©å‘½è€…', æ¡ä»¶: 'å¤©å‘½æ‰€å½’æ¬¡æ•° >= 10' },\r\n    destiny_03: { åç§°: 'å¦ææ³°æ¥', æè¿°: 'ä»\"å±æœºå››ä¼\"ç›´æ¥è½¬ä¸º\"å¤©å‘½æ‰€å½’\"', ç±»å‹: 'å¥‡é‡æœºç¼˜' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'è½¬è¿ç‹', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    destiny_04: { åç§°: 'å¥‡é‡è¿è¿', æè¿°: 'ç´¯è®¡è§¦å‘50æ¬¡å¥‡é‡äº‹ä»¶', ç±»å‹: 'å¥‡é‡æœºç¼˜' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'å¥‡é‡ä½“è´¨', æ¡ä»¶: 'å¥‡ç¼˜é­é‡æ¬¡æ•° >= 50' },\r\n    destiny_05: { åç§°: 'é«˜äººæŒ‡ç‚¹', æè¿°: 'é­é‡\"å¥‡ç¼˜\"äº‹ä»¶è·å¾—ä»™äººä¼ æ‰¿', ç±»å‹: 'å¥‡é‡æœºç¼˜' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'ä»™ç¼˜', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    destiny_06: { åç§°: 'çº¢é¢œå¶é‡', æè¿°: 'é€šè¿‡éšæœºäº‹ä»¶å¶é‡çº¢é¢œ5æ¬¡', ç±»å‹: 'å¥‡é‡æœºç¼˜' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, ç§°å·: 'æ¡ƒèŠ±è¿', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    destiny_07: { åç§°: 'åŒ–é™©ä¸ºå¤·', æè¿°: 'å±æœºäº‹ä»¶æˆåŠŸåŒ–è§£10æ¬¡', ç±»å‹: 'å¥‡é‡æœºç¼˜' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'ç¦å¤§å‘½å¤§', æ¡ä»¶: 'å±æœºåŒ–è§£æ¬¡æ•° >= 10' },\r\n\r\n    // ========== åŠ¿åŠ›å£°æœ›ç±» ğŸ›ï¸ ==========\r\n    faction_01: { åç§°: 'åˆå…¥æ±Ÿæ¹–', æè¿°: 'é¦–æ¬¡ä¸ä»»æ„åŠ¿åŠ›å»ºç«‹å…³ç³»', ç±»å‹: 'åŠ¿åŠ›å£°æœ›' as const, ç¨€æœ‰åº¦: 'æ™®é€š' as const, æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    faction_02: { åç§°: 'å®—é—¨å¼Ÿå­', æè¿°: 'æ­£å¼åŠ å…¥ä¸€ä¸ªå®—é—¨', ç±»å‹: 'åŠ¿åŠ›å£°æœ›' as const, ç¨€æœ‰åº¦: 'æ™®é€š' as const, æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    faction_03: { åç§°: 'å®—é—¨æ ‹æ¢', æè¿°: 'ä¸æ‰€å±å®—é—¨å£°æœ›è¾¾åˆ°ç›Ÿå‹', ç±»å‹: 'åŠ¿åŠ›å£°æœ›' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    faction_04: { åç§°: 'ä¼—æœ›æ‰€å½’', æè¿°: 'åŒæ—¶ä¸5ä¸ªåŠ¿åŠ›è¾¾åˆ°å‹å¥½', ç±»å‹: 'åŠ¿åŠ›å£°æœ›' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'å…«é¢ç²ç‘', æ¡ä»¶: 'ç›Ÿå‹åŠ¿åŠ›æ•° >= 5' },\r\n    faction_05: { åç§°: 'å¤©ä¸‹çš†æ•Œ', æè¿°: 'åŒæ—¶ä¸3ä¸ªåŠ¿åŠ›è¾¾åˆ°æ•Œå¯¹', ç±»å‹: 'åŠ¿åŠ›å£°æœ›' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'ç‹¬è¡Œè€…', æ¡ä»¶: 'æ•Œå¯¹åŠ¿åŠ›æ•° >= 3' },\r\n    faction_06: { åç§°: 'æ­£é­”ä¸åˆ†', æè¿°: 'åŒæ—¶ä¸æ­£é“å’Œé­”é“åŠ¿åŠ›éƒ½è¾¾åˆ°å‹å¥½', ç±»å‹: 'åŠ¿åŠ›å£°æœ›' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'ä¸­ç«‹è€…', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n\r\n    // ========== æ”¶è—æˆå°±ç±» ğŸ“¦ ==========\r\n    collect_01: { åç§°: 'åˆå­¦ä¹ç»ƒ', æè¿°: 'ä¹ å¾—é¦–ä¸ªåŠŸæ³•', ç±»å‹: 'æ”¶è—æˆå°±' as const, ç¨€æœ‰åº¦: 'æ™®é€š' as const, æ¡ä»¶: 'åŠŸæ³•ä¹ å¾—æ•° >= 1' },\r\n    collect_02: { åç§°: 'åšå­¦å¤šæ‰', æè¿°: 'ä¹ å¾—10ç§åŠŸæ³•', ç±»å‹: 'æ”¶è—æˆå°±' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, ç§°å·: 'åšå­¦', æ¡ä»¶: 'åŠŸæ³•ä¹ å¾—æ•° >= 10' },\r\n    collect_03: { åç§°: 'ä¸‡æ³•å½’ä¸€', æè¿°: 'ä¹ å¾—50ç§åŠŸæ³•', ç±»å‹: 'æ”¶è—æˆå°±' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'ä¸‡æ³•', æ¡ä»¶: 'åŠŸæ³•ä¹ å¾—æ•° >= 50' },\r\n    collect_04: { åç§°: 'ç¥é€šåˆæˆ', æè¿°: 'é¢†æ‚Ÿé¦–ä¸ªç¥é€š', ç±»å‹: 'æ”¶è—æˆå°±' as const, ç¨€æœ‰åº¦: 'ç¨€æœ‰' as const, æ¡ä»¶: 'ç¥é€šé¢†æ‚Ÿæ•° >= 1' },\r\n    collect_05: { åç§°: 'ç¥é€šå¹¿å¤§', æè¿°: 'é¢†æ‚Ÿ10ç§ç¥é€š', ç±»å‹: 'æ”¶è—æˆå°±' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'ç¥é€š', æ¡ä»¶: 'ç¥é€šé¢†æ‚Ÿæ•° >= 10' },\r\n    collect_06: { åç§°: 'æ³•å®å…¥æ‰‹', æè¿°: 'è·å¾—é¦–ä»¶æ³•å®', ç±»å‹: 'æ”¶è—æˆå°±' as const, ç¨€æœ‰åº¦: 'æ™®é€š' as const, æ¡ä»¶: 'æ³•å®è·å¾—æ•° >= 1' },\r\n    collect_07: { åç§°: 'æ³•å®æ»¡ä»“', æè¿°: 'åŒæ—¶æ‹¥æœ‰10ä»¶æ³•å®', ç±»å‹: 'æ”¶è—æˆå°±' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'æ³•å®æ”¶è—å®¶', æ¡ä»¶: 'æ³•å®è·å¾—æ•° >= 10' },\r\n    collect_08: { åç§°: 'æœ¬å‘½æ³•å®', æè¿°: 'è·å¾—æœ¬å‘½æ³•å®', ç±»å‹: 'æ”¶è—æˆå°±' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'æœ¬å‘½', æ¡ä»¶: 'æœ¬å‘½æ³•å®æ•° >= 1' },\r\n\r\n    // ========== éšè—æˆå°±ç±» ğŸŒŸ ==========\r\n    hidden_01: { åç§°: 'é‡ç”Ÿè€…', æè¿°: 'æ­»äº¡åè¢«è™æ±é¢œå¤æ´»', ç±»å‹: 'éšè—æˆå°±' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'é‡ç”Ÿè€…', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    hidden_02: { åç§°: 'æ­£é“å®ˆæŠ¤è€…', æè¿°: 'æˆåŠŸè§¦å‘NTRé˜²æŠ¤æœºåˆ¶', ç±»å‹: 'éšè—æˆå°±' as const, ç¨€æœ‰åº¦: 'å²è¯—' as const, ç§°å·: 'æ­£é“å®ˆæŠ¤è€…', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    hidden_03: { åç§°: 'ç»ä¸–å¤©æ‰', æè¿°: 'åœ¨ç»ƒæ°”æœŸå‡»è´¥é‡‘ä¸¹æœŸæ•Œäºº', ç±»å‹: 'éšè—æˆå°±' as const, ç¨€æœ‰åº¦: 'ç¥è¯' as const, ç§°å·: 'ç»ä¸–å¤©æ‰', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    hidden_04: { åç§°: 'åå®«ä¹‹ä¸»', æè¿°: 'åŒæ—¶æœ‰7ä½çº¢é¢œå¥½æ„Ÿåº¦ä¸º100', ç±»å‹: 'éšè—æˆå°±' as const, ç¨€æœ‰åº¦: 'ç¥è¯' as const, ç§°å·: 'åå®«ä¹‹ä¸»', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    hidden_05: { åç§°: 'ä»å¤´å†æ¥', æè¿°: 'ä»æ¸¡åŠ«æœŸè·Œè½åˆ°é‡‘ä¸¹æœŸåå†æ¬¡å›åˆ°æ¸¡åŠ«', ç±»å‹: 'éšè—æˆå°±' as const, ç¨€æœ‰åº¦: 'ç¥è¯' as const, ç§°å·: 'ä»å¤´å†æ¥', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n    hidden_06: { åç§°: 'è€æ€ªç‰©', æè¿°: 'æ¸¸æˆå†…æ´»è¿‡10000å¹´', ç±»å‹: 'éšè—æˆå°±' as const, ç¨€æœ‰åº¦: 'ä¼ è¯´' as const, ç§°å·: 'è€æ€ªç‰©', æ¡ä»¶: 'æ¸¸æˆæ€»æ—¶é•¿ >= 10000' },\r\n    hidden_07: { åç§°: 'å½’å¢Ÿä¹‹ä¸»', æè¿°: 'ä¸è®¸å¬é›¨è¿›å…¥å½’å¢Ÿ', ç±»å‹: 'éšè—æˆå°±' as const, ç¨€æœ‰åº¦: 'ç¥è¯' as const, ç§°å·: 'å½’å¢Ÿä¹‹ä¸»', æ¡ä»¶: 'ç‰¹æ®Šè§¦å‘' },\r\n} as const;\r\n\r\n// ============================================================================\r\n// å·¥å…·å‡½æ•°\r\n// ============================================================================\r\n\r\n/**\r\n * è·å–æˆå°±ç¨€æœ‰åº¦å¯¹åº”çš„å›¾æ ‡\r\n */\r\nexport function getRarityIcon(rarity: AchievementRarity): string {\r\n    switch (rarity) {\r\n        case 'æ™®é€š': return 'âšª';\r\n        case 'ç¨€æœ‰': return 'ğŸ”µ';\r\n        case 'å²è¯—': return 'ğŸŸ£';\r\n        case 'ä¼ è¯´': return 'ğŸŸ ';\r\n        case 'ç¥è¯': return 'ğŸ”´';\r\n        default: return 'âšª';\r\n    }\r\n}\r\n\r\n/**\r\n * è·å–æˆå°±ç±»å‹å¯¹åº”çš„å›¾æ ‡\r\n */\r\nexport function getTypeIcon(type: AchievementType): string {\r\n    switch (type) {\r\n        case 'å¢ƒç•Œçªç ´': return 'ğŸ”®';\r\n        case 'çº¢é¢œç¼˜åˆ†': return 'ğŸ’•';\r\n        case 'æˆ˜æ–—è£è€€': return 'âš”ï¸';\r\n        case 'æ¢ç´¢å‘ç°': return 'ğŸ—ºï¸';\r\n        case 'å¥‡é‡æœºç¼˜': return 'âœ¨';\r\n        case 'åŠ¿åŠ›å£°æœ›': return 'ğŸ›ï¸';\r\n        case 'æ”¶è—æˆå°±': return 'ğŸ“¦';\r\n        case 'éšè—æˆå°±': return 'ğŸŒŸ';\r\n        default: return 'ğŸ†';\r\n    }\r\n}","// ============================================================================\r\n// è¸æœˆå¯»ä»™ - å¸¸é‡å®šä¹‰\r\n// ============================================================================\r\n\r\n// ä¿®ç‚¼å¢ƒç•Œç­‰çº§ä¸å¢ƒç•Œæè¿°æ˜ å°„\r\n// ç­‰çº§ 1-4:   ç»ƒæ°”ï¼ˆåˆæœŸã€ä¸­æœŸã€åæœŸã€å¤§åœ†æ»¡ï¼‰\r\n// ç­‰çº§ 5-8:   ç­‘åŸºï¼ˆåˆæœŸã€ä¸­æœŸã€åæœŸã€å¤§åœ†æ»¡ï¼‰\r\n// ç­‰çº§ 9-12:  é‡‘ä¸¹ï¼ˆåˆæœŸã€ä¸­æœŸã€åæœŸã€å¤§åœ†æ»¡ï¼‰\r\n// ç­‰çº§ 13-16: å…ƒå©´ï¼ˆåˆæœŸã€ä¸­æœŸã€åæœŸã€å¤§åœ†æ»¡ï¼‰\r\n// ç­‰çº§ 17-20: åŒ–ç¥ï¼ˆåˆæœŸã€ä¸­æœŸã€åæœŸã€å¤§åœ†æ»¡ï¼‰\r\n// ç­‰çº§ 21-24: ç‚¼è™šï¼ˆåˆæœŸã€ä¸­æœŸã€åæœŸã€å¤§åœ†æ»¡ï¼‰\r\n// ç­‰çº§ 25-28: åˆä½“ï¼ˆåˆæœŸã€ä¸­æœŸã€åæœŸã€å¤§åœ†æ»¡ï¼‰\r\n// ç­‰çº§ 29-32: å¤§ä¹˜ï¼ˆåˆæœŸã€ä¸­æœŸã€åæœŸã€å¤§åœ†æ»¡ï¼‰\r\n// ç­‰çº§ 33-36: æ¸¡åŠ«ï¼ˆåˆæœŸã€ä¸­æœŸã€åæœŸã€å¤§åœ†æ»¡ï¼‰\r\nexport const REALM_NAMES = ['ç»ƒæ°”', 'ç­‘åŸº', 'é‡‘ä¸¹', 'å…ƒå©´', 'åŒ–ç¥', 'ç‚¼è™š', 'åˆä½“', 'å¤§ä¹˜', 'æ¸¡åŠ«'];\r\nexport const REALM_STAGES = ['åˆæœŸ', 'ä¸­æœŸ', 'åæœŸ', 'å¤§åœ†æ»¡'];\r\n\r\n// ä¿®ç‚¼å¢ƒç•Œç­‰çº§ä¸çªç ´é˜ˆå€¼æ˜ å°„\r\n// ç»ƒæ°”åˆ°é‡‘ä¸¹ï¼ˆ1-12çº§ï¼‰ï¼šæ¯ä¸ªå°å¢ƒç•Œé€’å¢100\r\n// å…ƒå©´å¼€å§‹ï¼ˆ13çº§+ï¼‰ï¼šæ¯4ä¸ªå°å¢ƒç•Œç¿»å€\r\nexport const REALM_THRESHOLDS = [\r\n    // ç»ƒæ°”ï¼ˆ1-4ï¼‰ï¼š100, 200, 300, 400\r\n    100, 200, 300, 400,\r\n    // ç­‘åŸºï¼ˆ5-8ï¼‰ï¼š500, 600, 700, 800\r\n    500, 600, 700, 800,\r\n    // é‡‘ä¸¹ï¼ˆ9-12ï¼‰ï¼š900, 1000, 1100, 1200\r\n    900, 1000, 1100, 1200,\r\n    // å…ƒå©´ï¼ˆ13-16ï¼‰ï¼š2400\r\n    2400, 2400, 2400, 2400,\r\n    // åŒ–ç¥ï¼ˆ17-20ï¼‰ï¼š4800\r\n    4800, 4800, 4800, 4800,\r\n    // ç‚¼è™šï¼ˆ21-24ï¼‰ï¼š9600\r\n    9600, 9600, 9600, 9600,\r\n    // åˆä½“ï¼ˆ25-28ï¼‰ï¼š19200\r\n    19200, 19200, 19200, 19200,\r\n    // å¤§ä¹˜ï¼ˆ29-32ï¼‰ï¼š38400\r\n    38400, 38400, 38400, 38400,\r\n    // æ¸¡åŠ«ï¼ˆ33-36ï¼‰ï¼š76800\r\n    76800, 76800, 76800, 76800,\r\n];\r\n\r\n// ä¿®ç‚¼å¢ƒç•Œç­‰çº§ä¸å¯¿å…ƒä¸Šé™æ˜ å°„\r\nexport const REALM_LIFESPANS = [100, 100, 100, 100, 200, 200, 200, 200, 500, 500, 500, 500, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 5000, 5000, 5000, 5000, 10000, 10000, 10000, 10000, 50000, 50000, 50000, 50000, 100000, 100000, 100000, 100000];\r\n\r\n// é…ç½®å¸¸é‡\r\nexport const CONFIG = {\r\n    REALMS: {\r\n        MAJOR: REALM_NAMES,\r\n        MINOR: REALM_STAGES,\r\n    },\r\n    ELEMENTS: {\r\n        ç«: { effect: 'ç¼çƒ§', visual: 'çƒˆç„°', nature: 'çˆ†è£‚', color: '#ff4444' },\r\n        æ°´: { effect: 'ç¼ ç»•', visual: 'æ¿€æµ', nature: 'æŸ”éŸ§', color: '#4488ff' },\r\n        å†°: { effect: 'å†»ç»“', visual: 'å¯’éœœ', nature: 'æå¯’', color: '#88ddff' },\r\n        é›·: { effect: 'éº»ç—¹', visual: 'ç´«ç”µ', nature: 'ç‹‚æš´', color: '#aa44ff' },\r\n        é£: { effect: 'åˆ‡å‰²', visual: 'ç½¡é£', nature: 'æ— å½¢', color: '#88ff88' },\r\n        åœŸ: { effect: 'é•‡å‹', visual: 'å²©é“ ', nature: 'åšé‡', color: '#aa8844' },\r\n        æœ¨: { effect: 'å¯„ç”Ÿ', visual: 'è—¤è”“', nature: 'ç”Ÿç”Ÿä¸æ¯', color: '#44aa44' },\r\n        é‡‘: { effect: 'ç©¿é€', visual: 'é”é‡‘', nature: 'é”‹åˆ©', color: '#ffdd44' },\r\n        æš—: { effect: 'è…èš€', visual: 'é»‘é›¾', nature: 'è¯¡è°²', color: '#442244' },\r\n        å…‰: { effect: 'å‡€åŒ–', visual: 'åœ£è¾‰', nature: 'ç¥åœ£', color: '#ffffaa' },\r\n        æ··æ²Œ: { effect: 'æ¹®ç­', visual: 'ç°å…‰', nature: 'è™šæ— ', color: '#888888' },\r\n    },\r\n};","// ============================================================================\r\n// è¸æœˆå¯»ä»™ - å…±äº« Schemaï¼ˆç‰©å“ã€ç¥é€šã€å“é˜¶æ˜ å°„ï¼‰\r\n// ============================================================================\r\n\r\nimport { z } from 'zod';\r\nimport { REALM_LIFESPANS, REALM_NAMES, REALM_STAGES, REALM_THRESHOLDS } from './constants';\r\nimport { calculateBaseCombatPower } from './utils';\r\n\r\n// å“é˜¶å®¹é”™æ˜ å°„\r\nexport const å“é˜¶æ˜ å°„: Record<string, string> = {\r\n    'å‡¡': 'å‡¡', 'å‡¡é˜¶': 'å‡¡', 'å‡¡çº§': 'å‡¡', 'å‡¡å“': 'å‡¡',\r\n    'é»„': 'é»„', 'é»„é˜¶': 'é»„', 'é»„çº§': 'é»„', 'é»„å“': 'é»„',\r\n    'ç„': 'ç„', 'ç„é˜¶': 'ç„', 'ç„çº§': 'ç„', 'ç„å“': 'ç„',\r\n    'åœ°': 'åœ°', 'åœ°é˜¶': 'åœ°', 'åœ°çº§': 'åœ°', 'åœ°å“': 'åœ°',\r\n    'å¤©': 'å¤©', 'å¤©é˜¶': 'å¤©', 'å¤©çº§': 'å¤©', 'å¤©å“': 'å¤©',\r\n    'ä»™': 'ä»™', 'ä»™é˜¶': 'ä»™', 'ä»™çº§': 'ä»™', 'ä»™å“': 'ä»™',\r\n    'åœ£': 'åœ£', 'åœ£é˜¶': 'åœ£', 'åœ£çº§': 'åœ£', 'åœ£å“': 'åœ£',\r\n    'å…ˆå¤©': 'å…ˆå¤©', 'å…ˆå¤©é˜¶': 'å…ˆå¤©', 'å…ˆå¤©çº§': 'å…ˆå¤©',\r\n};\r\n\r\n// ç†Ÿç»ƒåº¦å®¹é”™æ˜ å°„\r\nexport const ç†Ÿç»ƒåº¦æ˜ å°„: Record<string, string> = {\r\n    'å…¥é—¨': 'å…¥é—¨', 'åˆçº§': 'å…¥é—¨', 'åˆå­¦': 'å…¥é—¨', 'æ–°æ‰‹': 'å…¥é—¨',\r\n    'ç†Ÿç»ƒ': 'ç†Ÿç»ƒ', 'ä¸­çº§': 'ç†Ÿç»ƒ', 'å¨´ç†Ÿ': 'ç†Ÿç»ƒ',\r\n    'ç²¾é€š': 'ç²¾é€š', 'é«˜çº§': 'ç²¾é€š', 'ç²¾æ¹›': 'ç²¾é€š',\r\n    'å¤§æˆ': 'å¤§æˆ', 'å¤§å¸ˆ': 'å¤§æˆ', 'å®—å¸ˆ': 'å¤§æˆ',\r\n    'åœ†æ»¡': 'åœ†æ»¡', 'å®Œç¾': 'åœ†æ»¡', 'æè‡´': 'åœ†æ»¡',\r\n    'åŒ–å¢ƒ': 'åŒ–å¢ƒ', 'åŒ–ç¥': 'åŒ–å¢ƒ', 'è¿”ç’å½’çœŸ': 'åŒ–å¢ƒ', 'å‡ºç¥å…¥åŒ–': 'åŒ–å¢ƒ',\r\n};\r\n\r\n// ç‰©å“ Schema\r\nexport const ItemSchema = z.object({\r\n    åç§°: z.string().prefault(''),\r\n    æè¿°: z.string().prefault(''),\r\n    å“é˜¶: z.string().prefault(''),\r\n    æ•°é‡: z.coerce.number().transform(v => Math.max(0, v)).prefault(1),\r\n});\r\n\r\n// ç¥é€š Schemaï¼ˆæœ¬å°Šå’Œçº¢é¢œå…±ç”¨ï¼‰\r\nexport const SkillSchema = z.object({\r\n    åç§°: z.string().prefault(''),\r\n    æè¿°: z.string().prefault(''),\r\n    ç±»å‹: z.enum(['åŠŸæ³•', 'ç¥é€š', 'ç§˜æœ¯']).prefault('ç¥é€š'),\r\n    å“é˜¶: z.string()\r\n        .transform(v => å“é˜¶æ˜ å°„[v] || 'å‡¡')\r\n        .catch('å‡¡'),\r\n    ç†Ÿç»ƒåº¦: z.string()\r\n        .transform(v => ç†Ÿç»ƒåº¦æ˜ å°„[v] || 'å…¥é—¨')\r\n        .catch('å…¥é—¨'),\r\n    é¢†æ‚Ÿæ—¶é—´: z.coerce.number().catch(() => Date.now()),\r\n    å¨åŠ›ç­‰çº§: z.coerce.number().optional(),\r\n}).transform(skill => {\r\n    // ä»…å½“å¨åŠ›ç­‰çº§ä¸å­˜åœ¨æˆ–ä¸º0æ—¶æ‰è®¡ç®—\r\n    if (!skill.å¨åŠ›ç­‰çº§ || skill.å¨åŠ›ç­‰çº§ === 0) {\r\n        const å“é˜¶æƒé‡: Record<string, number> = { å‡¡: 1, é»„: 2, ç„: 3, åœ°: 4, å¤©: 5, ä»™: 6, åœ£: 7, å…ˆå¤©: 8 };\r\n        const ç†Ÿç»ƒåº¦æƒé‡: Record<string, number> = { å…¥é—¨: 1, ç†Ÿç»ƒ: 2, ç²¾é€š: 3, å¤§æˆ: 4, åœ†æ»¡: 5, åŒ–å¢ƒ: 6 };\r\n\r\n        const å“é˜¶å€¼ = å“é˜¶æƒé‡[skill.å“é˜¶] || 1;\r\n        const ç†Ÿç»ƒå€¼ = ç†Ÿç»ƒåº¦æƒé‡[skill.ç†Ÿç»ƒåº¦] || 1;\r\n\r\n        return {\r\n            ...skill,\r\n            å¨åŠ›ç­‰çº§: å“é˜¶å€¼ * 10 + ç†Ÿç»ƒå€¼,\r\n        };\r\n    }\r\n    return skill;\r\n});\r\n\r\n// èƒŒåŒ…ç±»ç‰©å“ Schemaï¼ˆè‡ªåŠ¨è¿‡æ»¤æ•°é‡<=0çš„ç‰©å“ï¼‰\r\nexport const InventorySchema = z\r\n    .record(z.string().describe('ç‰©å“å'), ItemSchema)\r\n    .prefault({})\r\n    .transform(data => _.pickBy(data, ({ æ•°é‡ }) => æ•°é‡ > 0));\r\n\r\n// å¢ƒç•Œè®¡ç®— transformï¼ˆæœ¬å°Šå’Œçº¢é¢œå…±ç”¨ï¼‰\r\nexport function computeRealmInfo(data: {\r\n    ç­‰çº§: number;\r\n    ä¿®ä¸º: number;\r\n    å·²æ´»å²æœˆ: number;\r\n    å°è¯•çªç ´: boolean;\r\n    ç¥é€šåˆ—è¡¨?: Record<string, { å¨åŠ›ç­‰çº§?: number }>;\r\n    ä½“è´¨?: string;\r\n}, includesCombatPower: boolean = false) {\r\n    const level = data.ç­‰çº§;\r\n    const çªç ´é˜ˆå€¼ = REALM_THRESHOLDS[level - 1] ?? 100;\r\n    const å¯¿å…ƒä¸Šé™ = REALM_LIFESPANS[level - 1] ?? 100;\r\n    const majorIdx = Math.floor((level - 1) / 4);\r\n    const minorIdx = (level - 1) % 4;\r\n    const å¢ƒç•Œæè¿° = `${REALM_NAMES[majorIdx] ?? 'ç»ƒæ°”'}${REALM_STAGES[minorIdx] ?? 'åˆæœŸ'}`;\r\n    const å¯¿å…ƒçŠ¶æ€ = `${data.å·²æ´»å²æœˆ}/${å¯¿å…ƒä¸Šé™}`;\r\n    const çŠ¶æ€ = data.å°è¯•çªç ´ ? 'çªç ´ä¸­' : data.ä¿®ä¸º >= çªç ´é˜ˆå€¼ ? 'ç“¶é¢ˆæœŸ' : 'ä¿®ç‚¼ä¸­';\r\n    const è¿›åº¦ = `${((data.ä¿®ä¸º / çªç ´é˜ˆå€¼) * 100).toFixed(1)}%`;\r\n\r\n    const base = { çªç ´é˜ˆå€¼, å¯¿å…ƒä¸Šé™, å¢ƒç•Œæè¿°, å¯¿å…ƒçŠ¶æ€, çŠ¶æ€, è¿›åº¦ };\r\n\r\n    if (!includesCombatPower) return base;\r\n\r\n    // æˆ˜åŠ›è®¡ç®—ï¼šå¢ƒç•ŒåŸºç¡€ï¼ˆæŒ‡æ•°çº§ï¼‰ + ç¥é€šåŠ æˆ + ä½“è´¨åŠ æˆ\r\n    const å¢ƒç•Œæˆ˜åŠ› = calculateBaseCombatPower(level);\r\n    const ç¥é€šåˆ—è¡¨ = Object.values(data.ç¥é€šåˆ—è¡¨ || {});\r\n    const æœ€é«˜ç¥é€šå¨åŠ› = ç¥é€šåˆ—è¡¨.length > 0\r\n        ? Math.max(...ç¥é€šåˆ—è¡¨.map(s => s.å¨åŠ›ç­‰çº§ || 0))\r\n        : 0;\r\n    const ä½“è´¨åŠ æˆ = (() => {\r\n        const ä½“è´¨ = data.ä½“è´¨ || '';\r\n        if (ä½“è´¨.includes('ç¥')) return 500;\r\n        if (ä½“è´¨.includes('åœ£')) return 200;\r\n        if (ä½“è´¨.includes('é“')) return 100;\r\n        if (ä½“è´¨.includes('çµ')) return 50;\r\n        return 0;\r\n    })();\r\n    const æˆ˜åŠ›å€¼ = å¢ƒç•Œæˆ˜åŠ› + æœ€é«˜ç¥é€šå¨åŠ› + ä½“è´¨åŠ æˆ;\r\n\r\n    return { ...base, æˆ˜åŠ›å€¼ };\r\n}","// ============================================================================\r\n// è¸æœˆå¯»ä»™ - å·¥å…·å‡½æ•°\r\n// ============================================================================\r\n\r\nimport { CONFIG, REALM_NAMES, REALM_STAGES } from './constants';\r\n\r\n// è·å–çµæ ¹å…ƒç´ é¢œè‰²\r\nexport function getRootColor(root: string): string {\r\n    for (const [elem, data] of Object.entries(CONFIG.ELEMENTS)) {\r\n        if (root.includes(elem)) {\r\n            return data.color;\r\n        }\r\n    }\r\n    return '#cc99ff'; // é»˜è®¤è–°è¡£è‰ç´«ï¼ˆç¥ç§˜ä¼˜é›…ï¼Œé€‚åˆç‰¹æ®Šçµæ ¹ï¼‰\r\n}\r\n\r\n// è·å–å¢ƒç•Œç­‰çº§é¢œè‰²\r\nexport function getRealmColor(level: number): string {\r\n    const majorIdx = Math.floor((level - 1) / 4);\r\n    const colors = [\r\n        '#888888', // ç»ƒæ°” - ç°è‰²\r\n        '#44aa44', // ç­‘åŸº - ç»¿è‰²\r\n        '#4488ff', // é‡‘ä¸¹ - è“è‰²\r\n        '#aa44ff', // å…ƒå©´ - ç´«è‰²\r\n        '#ff4444', // åŒ–ç¥ - çº¢è‰²\r\n        '#ffaa00', // ç‚¼è™š - æ©™è‰²\r\n        '#ffdd44', // åˆä½“ - é‡‘è‰²\r\n        '#ffffff', // å¤§ä¹˜ - ç™½è‰²\r\n        '#ff88ff', // æ¸¡åŠ« - ç²‰è‰²\r\n    ];\r\n    return colors[majorIdx] || '#888888';\r\n}\r\n\r\n// è·å–å±é™©åº¦é¢œè‰²\r\nexport function getDangerColor(danger: number): string {\r\n    if (danger >= 90) return '#ff0000';\r\n    if (danger >= 70) return '#ff4400';\r\n    if (danger >= 50) return '#ff8800';\r\n    if (danger >= 30) return '#ffcc00';\r\n    return '#44aa44';\r\n}\r\n\r\n// æ ¹æ®å¢ƒç•Œæè¿°è§£æç­‰çº§ï¼ˆå¦‚\"é‡‘ä¸¹åæœŸ\" â†’ 11ï¼‰\r\nexport function parseRealmToLevel(realm: string): number {\r\n    // å…ˆåŒ¹é…å¤§å¢ƒç•Œ\r\n    let majorIdx = -1;\r\n    for (let i = 0; i < REALM_NAMES.length; i++) {\r\n        if (realm.includes(REALM_NAMES[i])) {\r\n            majorIdx = i;\r\n            break;\r\n        }\r\n    }\r\n    if (majorIdx === -1) return 1; // æ— æ³•è¯†åˆ«ï¼Œè¿”å›æœ€ä½ç­‰çº§\r\n\r\n    // å†åŒ¹é…å°å¢ƒç•Œ\r\n    let minorIdx = 0; // é»˜è®¤åˆæœŸ\r\n    for (let i = 0; i < REALM_STAGES.length; i++) {\r\n        if (realm.includes(REALM_STAGES[i])) {\r\n            minorIdx = i;\r\n            break;\r\n        }\r\n    }\r\n\r\n    return majorIdx * 4 + minorIdx + 1;\r\n}\r\n\r\n// æ ¹æ®å¢ƒç•Œç­‰çº§è®¡ç®—åŸºç¡€æˆ˜åŠ›ï¼ˆæŒ‡æ•°çº§å¢é•¿ï¼Œè·¨å¤§å¢ƒç•Œçº¦10å€å·®è·ï¼‰\r\nexport function calculateBaseCombatPower(level: number): number {\r\n    const majorIdx = Math.floor((level - 1) / 4); // å¤§å¢ƒç•Œç´¢å¼•(0-8)\r\n    const minorIdx = (level - 1) % 4;              // å°å¢ƒç•Œç´¢å¼•(0-3)\r\n\r\n    // åŸºç¡€æˆ˜åŠ›ï¼šæ¯ä¸ªå¤§å¢ƒç•Œç¿»10å€ï¼Œå°å¢ƒç•Œå†…çº¿æ€§å¢é•¿20%\r\n    const å¤§å¢ƒç•ŒåŸºç¡€ = Math.pow(10, majorIdx + 1); // 10, 100, 1000, 10000...\r\n    const å°å¢ƒç•ŒåŠ æˆ = å¤§å¢ƒç•ŒåŸºç¡€ * 0.2 * minorIdx; // æ¯å°å¢ƒç•Œ+20%åŸºç¡€\r\n\r\n    return Math.round(å¤§å¢ƒç•ŒåŸºç¡€ + å°å¢ƒç•ŒåŠ æˆ);\r\n}\r\n\r\n// æ ¹æ®æˆ˜åŠ›å·®è·è¿”å›æˆ˜åŠ›è¯„ä¼°\r\nexport function evaluateCombatPower(myPower: number, enemyPower: number): string {\r\n    const ratio = myPower / enemyPower;\r\n    if (ratio >= 2.0) return 'ç¢¾å‹';\r\n    if (ratio >= 1.3) return 'ä¼˜åŠ¿';\r\n    if (ratio >= 0.8) return 'åŠ¿å‡åŠ›æ•Œ';\r\n    if (ratio >= 0.5) return 'åŠ£åŠ¿';\r\n    return 'ç»æœ›';\r\n}","// ============================================================================\r\n// è¸æœˆå¯»ä»™ - è§’è‰² Schemaï¼ˆçº¢é¢œè§’è‰²åº“ã€çº¢é¢œã€NPCå›¾é‰´ï¼‰\r\n// ============================================================================\r\n\r\nimport { z } from 'zod';\r\nimport { SkillSchema, computeRealmInfo } from './common';\r\n\r\n// çº¢é¢œè§’è‰²åº“ Schemaï¼ˆé™æ€è§’è‰²æ•°æ®ï¼‰\r\nexport const CharacterLibEntrySchema = z.object({\r\n    çº§: z.coerce.number().transform(v => _.clamp(v, 1, 36)),\r\n    æ ¹: z.string().describe('çµæ ¹'),\r\n    è´¨: z.string().describe('ä½“è´¨'),\r\n    é¾„: z.string().describe('å¹´é¾„'),\r\n    å±: z.string().describe('æ‰€å±'),\r\n    æ³•: z.string().describe('åŠŸæ³•'),\r\n    å™¨: z.string().describe('æœ¬å‘½å…µå™¨'),\r\n    é€š: z.array(z.string()).prefault([]),\r\n});\r\n\r\n// çº¢é¢œè§’è‰²åº“é»˜è®¤æ•°æ®\r\nexport const DEFAULT_CHARACTER_LIB = {\r\n    è®¸å¬é›¨: { çº§: 33, æ ¹: 'æ°´æœ¬æºå¤©', è´¨: 'å½’å¢Ÿç¥ä½“', é¾„: 'å¤–26å®12000', å±: 'å½’å¢Ÿä¹‹ä¸»', æ³•: 'ä¸‡æ°´å½’æºå…ˆå¤©', å™¨: 'æ²§æµ·é—ç å…ˆå¤©', é€š: ['å½’å¢Ÿæ­Œ', 'é€†æµè™šå¦„', 'å¯‚ç­æµ·åŸŸ', 'ä¸‡æ°´åŒæº'] },\r\n    è™æ±é¢œ: { çº§: 12, æ ¹: 'æ°´é˜´é˜³å¼‚', è´¨: 'åŒé±¼ä½“', é¾„: 'åŒ–å½¢0å¹´', å±: '{{user}}ç‰ä½©', æ³•: 'åŒç”Ÿå¤©æ/é˜´é˜³', å™¨: 'åŒé±¼ä½©æœ¬ä½“', é€š: ['æ¯æœ¨æ˜¥', 'å¤ºå‘½å¦†', 'åŒé±¼æ¢¦'] },\r\n    ç™½æ¸…å¼¦: { çº§: 29, æ ¹: 'é‡‘å¤©æ ¹', è´¨: 'å‰‘ä½“', é¾„: 'å¤–30å®1000+', å±: 'æ•£ä¿®å‰‘å®—å¸ˆ', æ³•: 'å‰‘æ„ä»™/å¤©éŸ³å¤©', å™¨: 'æ¸…å¼¦ç´å‰‘çµå®', é€š: ['ç´å‰‘æ€', 'å‰‘æ„æ­Œ', 'ä¸‡å‰‘å¿ƒ'] },\r\n    å—å®«äº‘è£³: { çº§: 16, æ ¹: 'ç«å¤©æ ¹', è´¨: 'ç¥å‡°é“ä½“', é¾„: 'å¤–10å®118', å±: 'å¤§å¤æ –å‡¤å®«ä¸»', æ³•: 'ä¹è½¬æ¶…æ§ƒä»™', å™¨: 'æ –æ¢§ç°ªçµå®', é€š: ['å—æ˜ç¦»ç«', 'å‡°å¨é•‡ä¸–', 'ç¾½åŒ–è™šç©º'] },\r\n    æ¢¦æ³æ³ : { çº§: 23, æ ¹: 'ç‘å…½å¼‚æ ¹', è´¨: 'ä¹˜é»„åœ£ä½“', é¾„: 'å¤–8å®ä¸‡å¹´+', å±: 'æ— (æœ«ä»£ä¹˜é»„)', æ³•: 'ä¹˜é»„æœ¬æºå¤©', å™¨: 'æ— ', é€š: ['ç‘å…‰åº‡ä½‘', 'çµè§‰é€šæ˜', 'æœ¬æºçˆ†å‘'] },\r\n    å¹»åƒä¸: { çº§: 13, æ ¹: 'æš—å¹»åŒæ ¹', è´¨: 'æ¢¦é­‡ä½“', é¾„: 'å¤–20æœªçŸ¥', å±: 'æ•£ä¿®å¹½å†¥', æ³•: 'ç»‡æ¢¦å¤©', å™¨: 'åƒä¸ç½‘çµå®', é€š: ['ç»‡æ¢¦ç¬¼', 'å¿ƒé­”å¢ƒ', 'åƒä¸ç¼š'] },\r\n    æ™šæ£ : { çº§: 15, æ ¹: 'å¹½å†¥çµæ ¹', è´¨: 'å™¬é­‚ä¹‹ä½“', é¾„: 'æœªçŸ¥', å±: 'æ•£ä¿®', æ³•: 'å¹½å†¥å½’é­‚ç»å¤©', å™¨: 'å¼•é­‚é“ƒçµå®', é€š: ['å†¥æ²³æŒ‡å¼•', 'å†¥è²æ²‰æ¢¦', 'å½’é­‚æ‘†èˆŸ'] },\r\n};\r\n\r\n// çº¢é¢œï¼ˆåŠ¨æ€è§’è‰²æ•°æ®ï¼‰Schema\r\nexport const CompanionSchema = z\r\n    .object({\r\n        ç­‰çº§: z.coerce.number().transform(v => _.clamp(v, 1, 36)).prefault(1),\r\n        ä¿®ä¸º: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n        çµæ ¹: z.string().prefault('äº”è¡Œæ‚çµæ ¹'),\r\n        ä½“è´¨: z.string().prefault('å‡¡ä½“'),\r\n        åŠŸæ³•: z.string().prefault('æ— '),\r\n        æœ¬å‘½å…µå™¨: z.string().prefault('æ— '),\r\n        ç¥é€šåˆ—è¡¨: z.record(z.string().describe('ç¥é€šå'), SkillSchema).prefault({}),\r\n        çµçŸ³: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n        å·²æ´»å²æœˆ: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n        å°è¯•çªç ´: z.boolean().prefault(false),\r\n        å¥½æ„Ÿåº¦: z.coerce.number().transform(v => _.clamp(v, -100, 100)).prefault(0),\r\n        å…³ç³»: z.string().prefault('é™Œç”Ÿäºº'),\r\n        é‡è¦æ€§: z.string().prefault('è·¯äºº'),\r\n    })\r\n    .prefault({\r\n        ç­‰çº§: 1,\r\n        ä¿®ä¸º: 0,\r\n        çµæ ¹: 'äº”è¡Œæ‚çµæ ¹',\r\n        ä½“è´¨: 'å‡¡ä½“',\r\n        åŠŸæ³•: 'æ— ',\r\n        æœ¬å‘½å…µå™¨: 'æ— ',\r\n        ç¥é€šåˆ—è¡¨: {},\r\n        çµçŸ³: 0,\r\n        å·²æ´»å²æœˆ: 0,\r\n        å°è¯•çªç ´: false,\r\n        å¥½æ„Ÿåº¦: 0,\r\n        å…³ç³»: 'é™Œç”Ÿäºº',\r\n        é‡è¦æ€§: 'è·¯äºº',\r\n    })\r\n    .transform(data => {\r\n        const realmInfo = computeRealmInfo(data, false);\r\n        return { ...data, ...realmInfo };\r\n    });\r\n\r\n// NPCå›¾é‰´ Schema - æç®€ç‰ˆ\r\nexport const NpcSchema = z.object({\r\n    ç­‰çº§: z.coerce.number().transform(v => _.clamp(v, 1, 36)).prefault(1),\r\n    æ‰€åœ¨å®—é—¨: z.string().prefault('æ•£ä¿®'),\r\n    å¤‡æ³¨: z.string().prefault(''),\r\n});","// ============================================================================\r\n// è¸æœˆå¯»ä»™ - æœ¬å°Š Schema\r\n// ============================================================================\r\n\r\nimport { z } from 'zod';\r\nimport { InventorySchema, SkillSchema, computeRealmInfo } from './common';\r\n\r\n// æˆ˜æ–—çŠ¶æ€å®¹é”™æ˜ å°„\r\nconst æˆ˜æ–—çŠ¶æ€æ˜ å°„: Record<string, string> = {\r\n    'éæˆ˜æ–—': 'éæˆ˜æ–—', 'å’Œå¹³': 'éæˆ˜æ–—', 'å®‰å…¨': 'éæˆ˜æ–—', 'è„±æˆ˜': 'éæˆ˜æ–—',\r\n    'å¯¹å³™': 'å¯¹å³™', 'è­¦æˆ’': 'å¯¹å³™', 'åƒµæŒ': 'å¯¹å³™', 'å¯¹è§†': 'å¯¹å³™',\r\n    'æ¿€æˆ˜': 'æ¿€æˆ˜', 'æˆ˜æ–—': 'æ¿€æˆ˜', 'äº¤æˆ˜': 'æ¿€æˆ˜', 'å®æ€': 'æ¿€æˆ˜',\r\n    'é‡ä¼¤': 'é‡ä¼¤', 'è´Ÿä¼¤': 'é‡ä¼¤', 'ä¼¤é‡': 'é‡ä¼¤',\r\n    'æ¿’æ­»': 'æ¿’æ­»', 'å°†æ­»': 'æ¿’æ­»', 'å‚å±': 'æ¿’æ­»', 'å±æ€¥': 'æ¿’æ­»',\r\n};\r\n\r\nconst ä¼¤åŠ¿æ˜ å°„: Record<string, string> = {\r\n    'æ— ä¼¤': 'æ— ä¼¤', 'æ— ': 'æ— ä¼¤', 'å®Œå¥½': 'æ— ä¼¤', 'å¥åº·': 'æ— ä¼¤',\r\n    'è½»ä¼¤': 'è½»ä¼¤', 'å°ä¼¤': 'è½»ä¼¤', 'å¾®ä¼¤': 'è½»ä¼¤',\r\n    'é‡ä¼¤': 'é‡ä¼¤', 'ä¼¤é‡': 'é‡ä¼¤', 'å¤§ä¼¤': 'é‡ä¼¤',\r\n    'æ¿’æ­»': 'æ¿’æ­»', 'å°†æ­»': 'æ¿’æ­»', 'å‚å±': 'æ¿’æ­»',\r\n};\r\n\r\nconst æˆ˜åŠ›è¯„ä¼°æ˜ å°„: Record<string, string> = {\r\n    'ç¢¾å‹': 'ç¢¾å‹', 'å‹å€’': 'ç¢¾å‹', 'ç§’æ€': 'ç¢¾å‹', 'åŠæ‰“': 'ç¢¾å‹',\r\n    'ä¼˜åŠ¿': 'ä¼˜åŠ¿', 'å ä¼˜': 'ä¼˜åŠ¿', 'ä¸Šé£': 'ä¼˜åŠ¿', 'æœ‰åˆ©': 'ä¼˜åŠ¿',\r\n    'åŠ¿å‡åŠ›æ•Œ': 'åŠ¿å‡åŠ›æ•Œ', 'å‡åŠ¿': 'åŠ¿å‡åŠ›æ•Œ', 'å¹³æ‰‹': 'åŠ¿å‡åŠ›æ•Œ', 'ç›¸å½“': 'åŠ¿å‡åŠ›æ•Œ', 'æ——é¼“ç›¸å½“': 'åŠ¿å‡åŠ›æ•Œ',\r\n    'åŠ£åŠ¿': 'åŠ£åŠ¿', 'ä¸‹é£': 'åŠ£åŠ¿', 'ä¸åˆ©': 'åŠ£åŠ¿', 'è½å': 'åŠ£åŠ¿',\r\n    'ç»æœ›': 'ç»æœ›', 'å¿…æ­»': 'ç»æœ›', 'ç¢¾å‹åŠ£åŠ¿': 'ç»æœ›', 'æ— æœ›': 'ç»æœ›',\r\n};\r\n\r\nconst æ•ŒäººçŠ¶æ€æ˜ å°„: Record<string, string> = {\r\n    'å®Œå¥½': 'å®Œå¥½', 'æ— ä¼¤': 'å®Œå¥½', 'å¥åº·': 'å®Œå¥½', 'å…¨ç››': 'å®Œå¥½',\r\n    'è½»ä¼¤': 'è½»ä¼¤', 'å°ä¼¤': 'è½»ä¼¤', 'å¾®ä¼¤': 'è½»ä¼¤',\r\n    'é‡ä¼¤': 'é‡ä¼¤', 'ä¼¤é‡': 'é‡ä¼¤', 'å¤§ä¼¤': 'é‡ä¼¤',\r\n    'æ¿’æ­»': 'æ¿’æ­»', 'å°†æ­»': 'æ¿’æ­»', 'å‚å±': 'æ¿’æ­»',\r\n    'å·²æ­»': 'å·²æ­»', 'æ­»äº¡': 'å·²æ­»', 'å‡»æ€': 'å·²æ­»', 'é˜µäº¡': 'å·²æ­»',\r\n};\r\n\r\n// åŠ«ç§æ˜ å°„\r\nconst åŠ«ç§æ˜ å°„: Record<string, string> = {\r\n    'æ— ': 'æ— ', '': 'æ— ', 'æ— åŠ«': 'æ— ',\r\n    'é›·åŠ«': 'é›·åŠ«', 'å¤©é›·': 'é›·åŠ«', 'é›·': 'é›·åŠ«',\r\n    'å¿ƒåŠ«': 'å¿ƒåŠ«', 'å¿ƒé­”': 'å¿ƒåŠ«', 'é­”åŠ«': 'å¿ƒåŠ«',\r\n    'å¤©åŠ«': 'å¤©åŠ«', 'å¤§åŠ«': 'å¤©åŠ«',\r\n    'æƒ…åŠ«': 'æƒ…åŠ«', 'æƒ…å…³': 'æƒ…åŠ«',\r\n    'å› æœåŠ«': 'å› æœåŠ«', 'å› æœ': 'å› æœåŠ«',\r\n    'çº¢å°˜åŠ«': 'çº¢å°˜åŠ«', 'çº¢å°˜': 'çº¢å°˜åŠ«',\r\n    'è½®å›åŠ«': 'è½®å›åŠ«', 'è½®å›': 'è½®å›åŠ«',\r\n};\r\n\r\nconst åŠ«éš¾ç­‰çº§æ˜ å°„: Record<string, string> = {\r\n    'å°åŠ«': 'å°åŠ«', 'å°': 'å°åŠ«', 'åˆçº§': 'å°åŠ«',\r\n    'ä¸­åŠ«': 'ä¸­åŠ«', 'ä¸­': 'ä¸­åŠ«', 'ä¸­çº§': 'ä¸­åŠ«',\r\n    'å¤§åŠ«': 'å¤§åŠ«', 'å¤§': 'å¤§åŠ«', 'é«˜çº§': 'å¤§åŠ«',\r\n    'å¤©ç½š': 'å¤©ç½š', 'å¤©': 'å¤©ç½š', 'æ': 'å¤©ç½š', 'å¤©é“': 'å¤©ç½š',\r\n};\r\n\r\nconst æ¸¡åŠ«ç»“æœæ˜ å°„: Record<string, string> = {\r\n    'æ— ': 'æ— ', '': 'æ— ', 'æœªæ¸¡åŠ«': 'æ— ',\r\n    'æˆåŠŸ': 'æˆåŠŸ', 'é€šè¿‡': 'æˆåŠŸ', 'æ¸¡è¿‡': 'æˆåŠŸ',\r\n    'å¤±è´¥': 'å¤±è´¥', 'æœªè¿‡': 'å¤±è´¥', 'å¤±': 'å¤±è´¥',\r\n};\r\n\r\n// æˆ˜æ–—çŠ¶æ€ Schema\r\nconst CombatStatusSchema = z.object({\r\n    æ­£åœ¨æˆ˜æ–—: z.boolean().prefault(false),\r\n    å½“å‰çŠ¶æ€: z.string()\r\n        .transform(v => æˆ˜æ–—çŠ¶æ€æ˜ å°„[v] || 'éæˆ˜æ–—')\r\n        .prefault('éæˆ˜æ–—'),\r\n    çµåŠ›å€¼: z.coerce.number().transform(v => _.clamp(v, 0, 100)).prefault(100),\r\n    ä¼¤åŠ¿ç­‰çº§: z.string()\r\n        .transform(v => ä¼¤åŠ¿æ˜ å°„[v] || 'æ— ä¼¤')\r\n        .prefault('æ— ä¼¤'),\r\n    å·²ç”¨åº•ç‰Œ: z.array(z.string()).prefault([]),\r\n    æˆ˜æ–—å›åˆ: z.coerce.number().prefault(0),\r\n}).prefault({\r\n    æ­£åœ¨æˆ˜æ–—: false,\r\n    å½“å‰çŠ¶æ€: 'éæˆ˜æ–—',\r\n    çµåŠ›å€¼: 100,\r\n    ä¼¤åŠ¿ç­‰çº§: 'æ— ä¼¤',\r\n    å·²ç”¨åº•ç‰Œ: [],\r\n    æˆ˜æ–—å›åˆ: 0,\r\n});\r\n\r\n// å½“å‰æ•Œäºº Schema\r\nconst EnemySchema = z.object({\r\n    åç§°: z.string().prefault('æœªçŸ¥æ•Œäºº'),\r\n    å¢ƒç•Œ: z.string().prefault('æœªçŸ¥'),\r\n    æˆ˜åŠ›è¯„ä¼°: z.string()\r\n        .transform(v => æˆ˜åŠ›è¯„ä¼°æ˜ å°„[v] || 'åŠ¿å‡åŠ›æ•Œ')\r\n        .prefault('åŠ¿å‡åŠ›æ•Œ'),\r\n    çŠ¶æ€: z.string()\r\n        .transform(v => æ•ŒäººçŠ¶æ€æ˜ å°„[v] || 'å®Œå¥½')\r\n        .prefault('å®Œå¥½'),\r\n    ç‰¹ç‚¹: z.string().prefault(''),\r\n});\r\n\r\n// æ¸¡åŠ«çŠ¶æ€ Schema\r\nconst TribulationSchema = z.object({\r\n    æ­£åœ¨æ¸¡åŠ«: z.boolean().prefault(false),\r\n    åŠ«ç§: z.string()\r\n        .transform(v => åŠ«ç§æ˜ å°„[v] || 'æ— ')\r\n        .prefault('æ— '),\r\n    åŠ«éš¾ç­‰çº§: z.string()\r\n        .transform(v => åŠ«éš¾ç­‰çº§æ˜ å°„[v] || 'å°åŠ«')\r\n        .prefault('å°åŠ«'),\r\n    å½“å‰é˜¶æ®µ: z.coerce.number().transform(v => _.clamp(v, 0, 9)).prefault(0),\r\n    æ€»é˜¶æ®µæ•°: z.coerce.number().transform(v => Math.max(1, v)).prefault(3),\r\n    åŠ«åŠ›æ‰¿å—: z.coerce.number().transform(v => _.clamp(v, 0, 100)).prefault(100),\r\n    å·²ç”¨æŠ¤é“: z.array(z.string()).prefault([]),\r\n    åŠ«éš¾æè¿°: z.string().prefault(''),\r\n    è§¦å‘åŸå› : z.string().prefault(''),\r\n    ä¸Šæ¬¡æ¸¡åŠ«ç»“æœ: z.string()\r\n        .transform(v => æ¸¡åŠ«ç»“æœæ˜ å°„[v] || 'æ— ')\r\n        .prefault('æ— '),\r\n    æ¸¡åŠ«å†·å´: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n    å¤±è´¥æƒ©ç½šè®°å½•: z.string().prefault(''),\r\n}).prefault({\r\n    æ­£åœ¨æ¸¡åŠ«: false,\r\n    åŠ«ç§: 'æ— ',\r\n    åŠ«éš¾ç­‰çº§: 'å°åŠ«',\r\n    å½“å‰é˜¶æ®µ: 0,\r\n    æ€»é˜¶æ®µæ•°: 3,\r\n    åŠ«åŠ›æ‰¿å—: 100,\r\n    å·²ç”¨æŠ¤é“: [],\r\n    åŠ«éš¾æè¿°: '',\r\n    è§¦å‘åŸå› : '',\r\n    ä¸Šæ¬¡æ¸¡åŠ«ç»“æœ: 'æ— ',\r\n    æ¸¡åŠ«å†·å´: 0,\r\n    å¤±è´¥æƒ©ç½šè®°å½•: '',\r\n});\r\n\r\n// è¡Œè¸ª Schema\r\nconst LocationTrackSchema = z.object({\r\n    å½“å‰åŒºåŸŸ: z.string().prefault('æœªçŸ¥ä¹‹åœ°'),\r\n    æ‰€å±å±‚çº§: z.string().prefault('åœ°å±‚'),\r\n    ç¯å¢ƒæè¿°: z.string().prefault(''),\r\n    å±é™©åº¦: z.coerce.number().prefault(10),\r\n    å¯ç”¨é€šé“: z.array(z.string()).prefault([]),\r\n    å¯¼èˆªä¿¡æ¯: z.string().prefault(''),\r\n}).prefault({\r\n    å½“å‰åŒºåŸŸ: 'æœªçŸ¥ä¹‹åœ°',\r\n    æ‰€å±å±‚çº§: 'åœ°å±‚',\r\n    ç¯å¢ƒæè¿°: '',\r\n    å±é™©åº¦: 10,\r\n    å¯ç”¨é€šé“: [],\r\n    å¯¼èˆªä¿¡æ¯: '',\r\n});\r\n\r\n// èº«ä»½ Schema\r\nconst IdentitySchema = z.object({\r\n    å§“å: z.string().prefault('æ— åæ°'),\r\n    å®—é—¨: z.string().prefault('æ•£ä¿®'),\r\n    å‡ºèº«: z.string().prefault('å‡¡äºº'),\r\n}).prefault({\r\n    å§“å: 'æ— åæ°',\r\n    å®—é—¨: 'æ•£ä¿®',\r\n    å‡ºèº«: 'å‡¡äºº',\r\n});\r\n\r\n// æœ¬å°Š Schema\r\nexport const ProtagonistSchema = z\r\n    .object({\r\n        ç­‰çº§: z.coerce.number().transform(v => _.clamp(v, 1, 36)).prefault(1),\r\n        ä¿®ä¸º: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n        çµæ ¹: z.string().prefault('äº”è¡Œæ‚çµæ ¹'),\r\n        ä½“è´¨: z.string().prefault('å‡¡ä½“'),\r\n        åŠŸæ³•: z.string().prefault('æ— '),\r\n        æœ¬å‘½å…µå™¨: z.string().prefault('æ— '),\r\n        ç¥é€šåˆ—è¡¨: z.record(z.string().describe('ç¥é€šå'), SkillSchema).prefault({}),\r\n        çµçŸ³: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n        å·²æ´»å²æœˆ: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\r\n        å°è¯•çªç ´: z.boolean().prefault(false),\r\n        è¡Œè¸ª: LocationTrackSchema,\r\n        èº«ä»½: IdentitySchema,\r\n        èƒŒåŒ…: InventorySchema,\r\n        æ³•å®: InventorySchema,\r\n        æ‚ç‰©è¢‹: InventorySchema,\r\n        æˆ˜æ–—çŠ¶æ€: CombatStatusSchema,\r\n        å½“å‰æ•Œäºº: z.array(EnemySchema).prefault([]),\r\n        æ¸¡åŠ«çŠ¶æ€: TribulationSchema,\r\n    })\r\n    .prefault({\r\n        ç­‰çº§: 1,\r\n        ä¿®ä¸º: 0,\r\n        çµæ ¹: 'äº”è¡Œæ‚çµæ ¹',\r\n        ä½“è´¨: 'å‡¡ä½“',\r\n        åŠŸæ³•: 'æ— ',\r\n        æœ¬å‘½å…µå™¨: 'æ— ',\r\n        ç¥é€šåˆ—è¡¨: {},\r\n        çµçŸ³: 0,\r\n        å·²æ´»å²æœˆ: 0,\r\n        å°è¯•çªç ´: false,\r\n        è¡Œè¸ª: {\r\n            å½“å‰åŒºåŸŸ: 'æœªçŸ¥ä¹‹åœ°',\r\n            æ‰€å±å±‚çº§: 'åœ°å±‚',\r\n            ç¯å¢ƒæè¿°: '',\r\n            å±é™©åº¦: 10,\r\n            å¯ç”¨é€šé“: [],\r\n            å¯¼èˆªä¿¡æ¯: '',\r\n        },\r\n        èº«ä»½: {\r\n            å§“å: 'æ— åæ°',\r\n            å®—é—¨: 'æ•£ä¿®',\r\n            å‡ºèº«: 'å‡¡äºº',\r\n        },\r\n        èƒŒåŒ…: {},\r\n        æ³•å®: {},\r\n        æ‚ç‰©è¢‹: {},\r\n        æˆ˜æ–—çŠ¶æ€: {\r\n            æ­£åœ¨æˆ˜æ–—: false,\r\n            å½“å‰çŠ¶æ€: 'éæˆ˜æ–—',\r\n            çµåŠ›å€¼: 100,\r\n            ä¼¤åŠ¿ç­‰çº§: 'æ— ä¼¤',\r\n            å·²ç”¨åº•ç‰Œ: [],\r\n            æˆ˜æ–—å›åˆ: 0,\r\n        },\r\n        å½“å‰æ•Œäºº: [],\r\n        æ¸¡åŠ«çŠ¶æ€: {\r\n            æ­£åœ¨æ¸¡åŠ«: false,\r\n            åŠ«ç§: 'æ— ',\r\n            åŠ«éš¾ç­‰çº§: 'å°åŠ«',\r\n            å½“å‰é˜¶æ®µ: 0,\r\n            æ€»é˜¶æ®µæ•°: 3,\r\n            åŠ«åŠ›æ‰¿å—: 100,\r\n            å·²ç”¨æŠ¤é“: [],\r\n            åŠ«éš¾æè¿°: '',\r\n            è§¦å‘åŸå› : '',\r\n            ä¸Šæ¬¡æ¸¡åŠ«ç»“æœ: 'æ— ',\r\n            æ¸¡åŠ«å†·å´: 0,\r\n            å¤±è´¥æƒ©ç½šè®°å½•: '',\r\n        },\r\n    })\r\n    .transform(data => {\r\n        const realmInfo = computeRealmInfo(data, true);\r\n        return { ...data, ...realmInfo };\r\n    });","// ============================================================================\r\n// è¸æœˆå¯»ä»™ - ç³»ç»Ÿ Schemaï¼ˆä»»åŠ¡åˆ—è¡¨ã€å£°æœ›ç³»ç»Ÿã€å¯å‚ä¸æœºé‡ã€å½“å‰å¤„å¢ƒï¼‰\r\n// ============================================================================\r\n\r\nimport { z } from 'zod';\r\n\r\n// ä»»åŠ¡åˆ—è¡¨ Schema - ç§»é™¤è‡ªåŠ¨æ¸…ç†é€»è¾‘ï¼Œä¿æŒæ•°æ®å®Œæ•´æ€§\r\nexport const QuestSchema = z.object({\r\n    åç§°: z.string().prefault(''),\r\n    ç±»å‹: z.enum(['ä¸»çº¿', 'æ”¯çº¿', 'æ¯æ—¥', 'ä¸´å±å—å‘½', 'ç§˜å¢ƒæ¢ç´¢']).prefault('ä¸»çº¿'),\r\n    ç›®æ ‡: z.string().prefault(''),\r\n    çŠ¶æ€: z.enum(['è¿›è¡Œä¸­', 'å·²å®Œæˆ', 'å·²å¤±è´¥']).prefault('è¿›è¡Œä¸­'),\r\n    // ç§˜å¢ƒä¸“å±å­—æ®µï¼ˆä»…å½“ç±»å‹ä¸ºç§˜å¢ƒæ¢ç´¢æ—¶éœ€è¦ï¼‰\r\n    ç§˜å¢ƒä¿¡æ¯: z\r\n        .object({\r\n            åŸŸ: z.enum(['å¤©å±‚', 'ç¥å·', 'ä¸œè‹', 'å—ç‚', 'è¥¿åºš', 'åŒ—å†¥', 'ä¸‹å±‚', 'å››æµ·']).optional(),\r\n            å±: z.coerce.number().transform(v => _.clamp(v, 0, 100)).optional(),\r\n            ç‰¹: z.string().optional(),\r\n            å¥–: z.union([\r\n                z.array(z.string()),\r\n                z.string().transform(v => v ? [v] : []),\r\n            ]).prefault([]),\r\n            é™: z.string().optional(),\r\n        })\r\n        .optional(),\r\n    åˆ›å»ºæ—¶é—´: z.union([\r\n        z.coerce.number(), // å…¼å®¹å·²æœ‰çš„æ—¶é—´æˆ³\r\n        z.string().transform(() => {\r\n            // AI è¾“å…¥ä¿®ä»™æ—¶é—´æ ¼å¼æ—¶ï¼Œç®€åŒ–å¤„ç†ï¼šç›´æ¥ç”¨å½“å‰æ—¶é—´\r\n            return Date.now();\r\n        })\r\n    ]).prefault(() => Date.now()),\r\n});\r\n\r\n// å£°æœ›æ¡ç›® Schema\r\nexport const ReputationEntrySchema = z.object({\r\n    å€¼: z.coerce.number().transform(v => _.clamp(v, -100, 100)).prefault(0),\r\n    å…³ç³»: z.string().prefault('é™Œç”Ÿ'),\r\n    æ›´æ–°æ—¶é—´: z.coerce.number().prefault(() => Date.now()),\r\n});\r\n\r\n// å£°æœ›ç³»ç»Ÿ Schemaï¼ˆå¸¦è‡ªåŠ¨å…³ç³»è®¡ç®— transformï¼‰\r\nexport const ReputationSystemSchema = z\r\n    .record(z.string().describe('åŠ¿åŠ›å'), ReputationEntrySchema)\r\n    .prefault({})\r\n    .transform(factions => {\r\n        // è‡ªåŠ¨æ ¹æ®å£°æœ›å€¼è®¡ç®—å…³ç³»æè¿°\r\n        return _(factions)\r\n            .mapValues(faction => {\r\n                const value = faction.å€¼;\r\n                let è‡ªåŠ¨å…³ç³»: string;\r\n\r\n                if (value >= 80) {\r\n                    è‡ªåŠ¨å…³ç³» = 'ç›Ÿå‹';\r\n                } else if (value >= 60) {\r\n                    è‡ªåŠ¨å…³ç³» = 'å‹å–„';\r\n                } else if (value >= 30) {\r\n                    è‡ªåŠ¨å…³ç³» = 'å‹å¥½';\r\n                } else if (value >= 10) {\r\n                    è‡ªåŠ¨å…³ç³» = 'ä¸­ç«‹åå¥½';\r\n                } else if (value >= -10) {\r\n                    è‡ªåŠ¨å…³ç³» = 'ä¸­ç«‹';\r\n                } else if (value >= -30) {\r\n                    è‡ªåŠ¨å…³ç³» = 'ä¸­ç«‹åæ¶';\r\n                } else if (value >= -60) {\r\n                    è‡ªåŠ¨å…³ç³» = 'æ•Œå¯¹';\r\n                } else if (value >= -80) {\r\n                    è‡ªåŠ¨å…³ç³» = 'ä»‡æ¨';\r\n                } else {\r\n                    è‡ªåŠ¨å…³ç³» = 'ä¸æ­»ä¸ä¼‘';\r\n                }\r\n\r\n                // å¦‚æœç”¨æˆ·æ‰‹åŠ¨è®¾ç½®äº†å…³ç³»ï¼Œä¼˜å…ˆä½¿ç”¨ç”¨æˆ·è®¾ç½®ï¼›å¦åˆ™ä½¿ç”¨è‡ªåŠ¨è®¡ç®—çš„å…³ç³»\r\n                const æœ€ç»ˆå…³ç³» = faction.å…³ç³» && faction.å…³ç³» !== 'é™Œç”Ÿ' ? faction.å…³ç³» : è‡ªåŠ¨å…³ç³»;\r\n\r\n                return {\r\n                    ...faction,\r\n                    å…³ç³»: æœ€ç»ˆå…³ç³»,\r\n                };\r\n            })\r\n            .value();\r\n    });\r\n\r\n// å¯å‚ä¸æœºé‡ Schema\r\nexport const OpportunitySchema = z.object({\r\n    åç§°: z.string().prefault(''),\r\n    æ¥æº: z.string().prefault(''), // å¦‚ï¼šå‰§æƒ…æ¨è¿›ã€ä»»åŠ¡è§¦å‘ã€NPCé‚€è¯·ã€åœ°ç‚¹å‘ç°ã€æ—¶é™äº‹ä»¶\r\n    ç±»å‹: z.enum(['æ¢ç´¢', 'ä»»åŠ¡', 'äº¤æ˜“', 'ç»“äº¤', 'äº‰å¤º', 'ä¿®ç‚¼', 'çº¢é¢œ', 'éšæœº']).prefault('æ¢ç´¢'),\r\n    æè¿°: z.string().prefault(''),\r\n    å›æŠ¥é¢„æœŸ: z.string().prefault(''), // å¦‚ï¼šä¸­ç­‰çµçŸ³æ”¶ç›Šã€å¯èƒ½è·å¾—åŠŸæ³•çº¿ç´¢\r\n    é£é™©è¯„ä¼°: z.string().prefault(''), // å¦‚ï¼šä½é£é™©ã€æœ‰æˆ˜æ–—å¯èƒ½\r\n    æ—¶é™: z.string().optional(), // å¦‚ï¼šæœ¬æ—¥ç»“æŸå‰ã€ä¸‰æ—¥å†…\r\n    å…³è”äº‹ä»¶: z.string().optional(), // å…³è”çš„ä¸–ç•Œäº‹ä»¶æˆ–ä»»åŠ¡\r\n    ä¼˜å…ˆçº§: z.coerce.number().transform(v => _.clamp(v, 1, 5)).prefault(3), // 1-5ï¼Œ5æœ€é«˜\r\n});","// ============================================================================\r\n// è¸æœˆå¯»ä»™ - ä¸–ç•Œè®¾å®š Schemaï¼ˆå®—é—¨ã€åŠŸæ³•ã€æ³•å®ã€åœ°ç‚¹ã€çµæ ¹ã€ä½“è´¨ï¼‰\r\n// ============================================================================\r\n\r\nimport { z } from 'zod';\r\nimport { å“é˜¶æ˜ å°„ } from './common';\r\n\r\n// å®—é—¨åŠ¿åŠ› Schema - ä¼˜åŒ–ç‰ˆ\r\nexport const FactionSchema = z.object({\r\n    åœ°: z.string().describe('æ‰€åœ¨åœ°'),\r\n    ç‰¹: z.string().describe('æ ¸å¿ƒç‰¹ç‚¹'),\r\n    åŠ›: z.string().describe('æœ€é«˜æˆ˜åŠ›'),\r\n    è¥: z.enum(['æ­£', 'é­”', 'ä¸­']),\r\n    æ¨¡: z.enum(['è¶…å¤§', 'å¤§', 'å°', 'å¾®', 'ç‰¹']),\r\n});\r\n\r\n// åŠŸæ³• Schema - ä¼˜åŒ–ç‰ˆï¼ˆæ·»åŠ å“é˜¶å®¹é”™è½¬æ¢ï¼‰\r\nexport const TechniqueSchema = z.object({\r\n    é˜¶: z.string()\r\n        .transform(v => å“é˜¶æ˜ å°„[v] || 'å‡¡')\r\n        .catch('å‡¡'),\r\n    æ€§: z.string().describe('å±æ€§'),\r\n    æ•ˆ: z.string().describe('æ•ˆæœ'),\r\n});\r\n\r\n// æ³•å®å…µå™¨ Schema - æç®€ç‰ˆ\r\n// å“é˜¶ä»ä½åˆ°é«˜: å‡¡å™¨ < æ³•å™¨ < çµå™¨ < æ³•å® < çµå® < ä»™å™¨ < åœ£å™¨ < é“å™¨ < æœ¬å‘½\r\n// æœ¬å‘½æ³•å®: ä¸ä¸»äººç¥é­‚ç›¸è¿ï¼Œå¯éšä¸»äººæˆé•¿ï¼Œå¨åŠ›éšå¥‘åˆåº¦æå‡ï¼Œæä¸ºç¨€æœ‰\r\nexport const TreasureSchema = z.object({\r\n    é˜¶: z.enum(['å‡¡å™¨', 'æ³•å™¨', 'çµå™¨', 'æ³•å®', 'çµå®', 'ä»™å™¨', 'åœ£å™¨', 'é“å™¨', 'æœ¬å‘½']),\r\n    ç±»: z.string().describe('ç±»å‹'),\r\n    // æœ¬å‘½æ³•å®ä¸“å±å­—æ®µ\r\n    æœ¬å‘½ç‰¹æ€§: z.string().optional().describe('æœ¬å‘½æ³•å®ç‹¬æœ‰ç‰¹æ€§'),\r\n    å™¨çµ: z.string().optional().describe('å™¨çµåç§°'),\r\n}).transform(data => ({\r\n    ...data,\r\n    ç‰¹: data.é˜¶ === 'æœ¬å‘½' ? 'è‡³å°Š' : data.é˜¶ === 'é“å™¨' ? 'è¶…å‡¡' : data.é˜¶ === 'åœ£å™¨' ? 'æå“' : data.é˜¶ === 'ä»™å™¨' ? 'é¡¶çº§' : data.é˜¶ === 'çµå®' ? 'å¼º' : data.é˜¶ === 'æ³•å®' ? 'ä¸­' : 'æ™®é€š',\r\n}));\r\n\r\n// åœ°ç‚¹ Schema - ä¼˜åŒ–ç‰ˆ\r\nexport const LocationSchema = z.object({\r\n    åŸŸ: z.enum(['å¤©å±‚', 'ç¥å·', 'ä¸œè‹', 'å—ç‚', 'è¥¿åºš', 'åŒ—å†¥', 'ä¸‹å±‚', 'å››æµ·']),\r\n    ç±»: z.enum(['ç§˜å¢ƒ', 'åŸé•‡', 'å®—é—¨', 'ç¦åœ°', 'é—è¿¹', 'åœ°å½¢']),\r\n    å±: z.coerce.number().transform(v => _.clamp(v, 0, 100)),\r\n    ç‰¹: z.string().describe('ç‰¹ç‚¹'),\r\n    èµ„: z.union([\r\n        z.array(z.string()),\r\n        z.string().transform(v => v ? [v] : []),\r\n    ]).prefault([]),\r\n});\r\n\r\n// çµæ ¹ Schema - æç®€ç‰ˆï¼ˆé€Ÿåº¦æ ¹æ®è´¨è‡ªåŠ¨è®¡ç®—ï¼‰\r\nexport const SpiritRootSchema = z.object({\r\n    è´¨: z.enum(['åŠ£', 'ä¸‹', 'ä¸­', 'ä¸Š', 'æ', 'å¤©', 'å¼‚']),\r\n    æ€§: z.string().describe('å±æ€§'),\r\n    ç¨€: z.enum(['å¸¸', 'å°‘', 'ç½•', 'ç¨€', 'ä¼ ']),\r\n}).transform(data => {\r\n    const é€Ÿåº¦æ˜ å°„ = { åŠ£: '0.3å€', ä¸‹: '0.5å€', ä¸­: '1å€', ä¸Š: '2å€', æ: '3å€', å¤©: '5å€', å¼‚: '4å€' };\r\n    return {\r\n        ...data,\r\n        é€Ÿ: é€Ÿåº¦æ˜ å°„[data.è´¨] || '1å€',\r\n        ç‰¹: data.è´¨ === 'å¤©' ? 'å•ç³»é¡¶çº§' : data.è´¨ === 'å¼‚' ? 'å˜å¼‚ç¨€æœ‰' : data.è´¨ === 'æ' ? 'åŒç³»ä¼˜ç§€' : 'å¸¸è§„',\r\n    };\r\n});\r\n\r\n// ä½“è´¨ Schema - ä¼˜åŒ–ç‰ˆ\r\nexport const PhysiqueSchema = z.object({\r\n    è´¨: z.enum(['å‡¡', 'çµ', 'é“', 'åœ£', 'ç¥']),\r\n    ç‰¹: z.string().describe('ç‰¹æ€§'),\r\n    ç¨€: z.enum(['å¸¸', 'å°‘', 'ç½•', 'ç¨€', 'ä¼ ']),\r\n}).transform(data => ({\r\n    ...data,\r\n    ä¼˜: data.è´¨ === 'ç¥' ? 'è‡³é«˜' : data.è´¨ === 'åœ£' ? 'æå¼º' : data.è´¨ === 'é“' ? 'å¼º' : data.è´¨ === 'çµ' ? 'ä¸­' : 'æ— ',\r\n}));\r\n\r\n// å®—é—¨åŠ¿åŠ›åº“é»˜è®¤æ•°æ®\r\nexport const DEFAULT_FACTIONS = {\r\n    // æ­£é“\r\n    å‰‘é˜: { åœ°: 'ç¥å·å‰‘é—¨å…³', ç‰¹: 'å‰‘é“æºå¤´', åŠ›: 'æ¸¡åŠ«åæœŸ', è¥: 'æ­£' as const, æ¨¡: 'è¶…å¤§' as const },\r\n    ä¸‡æ³•å®—: { åœ°: 'ç¥å·é—®é“å³°', ç‰¹: 'ä¸‡æ³•æœ¬æº', åŠ›: 'æ¸¡åŠ«åˆæœŸ', è¥: 'æ­£' as const, æ¨¡: 'è¶…å¤§' as const },\r\n    é‡‘åˆšå¯º: { åœ°: 'è¥¿å¤©ä½›å±±', ç‰¹: 'ä½›ä¿®ç‚¼ä½“', åŠ›: 'å¤§ä¹˜ä¸­æœŸ', è¥: 'æ­£' as const, æ¨¡: 'å¤§' as const },\r\n    è¯ç‹è°·: { åœ°: 'ç¥å†œæ¶', ç‰¹: 'åŒ»ç‚¼ä¸¹è¯', åŠ›: 'å¤§ä¹˜åˆæœŸ', è¥: 'æ­£' as const, æ¨¡: 'å¤§' as const },\r\n    å„’é—¨: { åœ°: 'æ–‡åœ£å±±', ç‰¹: 'æµ©ç„¶æ­£æ°”', åŠ›: 'å¤§ä¹˜ä¸­æœŸ', è¥: 'æ­£' as const, æ¨¡: 'å¤§' as const },\r\n    é’é¾™æ®¿: { åœ°: 'ä¸œè‹é’é¾™å±±', ç‰¹: 'å®ˆæŠ¤é’å¸', åŠ›: 'å¤§ä¹˜åˆæœŸ', è¥: 'æ­£' as const, æ¨¡: 'å¤§' as const },\r\n    ç„æ­¦å®—: { åœ°: 'åŒ—å†¥ç„å†°å±±', ç‰¹: 'é•‡å®ˆå½’å¢Ÿ', åŠ›: 'å¤§ä¹˜åæœŸ', è¥: 'æ­£' as const, æ¨¡: 'å¤§' as const },\r\n    é’äº‘é—¨: { åœ°: 'ç¥å·é’äº‘å±±', ç‰¹: 'æ°´è„‰ä¸€ç³»', åŠ›: 'å¤§ä¹˜åˆæœŸ', è¥: 'æ­£' as const, æ¨¡: 'å¤§' as const },\r\n    å»ºæœ¨å®—: { åœ°: 'ä¸œè‹å»ºæœ¨æ ‘', ç‰¹: 'æœ¨ç³»é“æ³•', åŠ›: 'åˆä½“ä¸­æœŸ', è¥: 'æ­£' as const, æ¨¡: 'å°' as const },\r\n    ç™¾èŠ±è°·: { åœ°: 'ç™¾èŠ±ç§˜å¢ƒ', ç‰¹: 'å¥³ä¿®èŠ±é“', åŠ›: 'åˆä½“åæœŸ', è¥: 'æ­£' as const, æ¨¡: 'å°' as const },\r\n    // é­”é“\r\n    è¡€ç¥æ•™: { åœ°: 'è¡€é­”æ¸Š', ç‰¹: 'è¡€é“ç‚¼æ³•', åŠ›: 'æ¸¡åŠ«ä¸­æœŸ', è¥: 'é­”' as const, æ¨¡: 'è¶…å¤§' as const },\r\n    å¤©é­”å®—: { åœ°: 'å¤©é­”å±±', ç‰¹: 'å¤©é­”å¤§é“', åŠ›: 'å¤§ä¹˜ä¸­æœŸ', è¥: 'é­”' as const, æ¨¡: 'å¤§' as const },\r\n    // ä¸­ç«‹\r\n    å¦–ç›Ÿ: { åœ°: 'ä¸‡å¦–æ£®æ—', ç‰¹: 'å¦–æ—è”ç›Ÿ', åŠ›: 'æ¸¡åŠ«ä¸­æœŸ', è¥: 'ä¸­' as const, æ¨¡: 'è¶…å¤§' as const },\r\n    å¤§å¤ç‹æœ: { åœ°: 'ä¸­å·çš‡åŸ', ç‰¹: 'ä¸–ä¿—ç»Ÿæ²»', åŠ›: 'å¤§ä¹˜åˆæœŸ', è¥: 'ä¸­' as const, æ¨¡: 'å¤§' as const },\r\n    ä¹å·å•†ä¼š: { åœ°: 'ä¹å¤§ä¸»åŸ', ç‰¹: 'å•†ä¸šè”ç›Ÿ', åŠ›: 'å¤§ä¹˜åˆæœŸ', è¥: 'ä¸­' as const, æ¨¡: 'å¤§' as const },\r\n    ç¦»ç«å®«: { åœ°: 'å—ç‚ç«å±±', ç‰¹: 'æœ±é›€ä¾›å¥‰', åŠ›: 'åˆä½“åœ†æ»¡', è¥: 'ä¸­' as const, æ¨¡: 'å°' as const },\r\n    é“¸å‰‘å±±åº„: { åœ°: 'å—ç‚åœ°ç«', ç‰¹: 'ç‚¼å™¨ç¬¬ä¸€', åŠ›: 'åˆä½“åæœŸ', è¥: 'ä¸­' as const, æ¨¡: 'å°' as const },\r\n};\r\n\r\n// æ³•å®åº“é»˜è®¤æ•°æ®\r\nexport const DEFAULT_TREASURES = {\r\n    é•‡æ¸Šå‰‘: { é˜¶: 'ä»™å™¨' as const, ç±»: 'å‰‘' },\r\n    åŒé±¼ä½©: {\r\n        é˜¶: 'æœ¬å‘½' as const,\r\n        ç±»: 'ç‰ä½©',\r\n        æœ¬å‘½ç‰¹æ€§: 'æºè¡€å¥‘çº¦ã€é˜´é˜³åŒç”Ÿã€å™¨çµåŒ–å½¢ã€ä¸ä¸»å…±ä¿®ã€ç”Ÿæ­»ç›¸ä¾ã€é”è¡€æŠ¤ä¸»',\r\n        å™¨çµ: 'è™æ±é¢œ',\r\n    },\r\n};\r\n\r\n// åœ°ç‚¹åº“é»˜è®¤æ•°æ®\r\nexport const DEFAULT_LOCATIONS = {\r\n    // å¤©å±‚ - ä¿ç•™æ ¸å¿ƒç¦åœ°\r\n    å¤©æ¸Š: { åŸŸ: 'å¤©å±‚' as const, ç±»: 'ç¦åœ°' as const, å±: 95, ç‰¹: 'æ˜Ÿè¾°è£‚éš™', èµ„: ['æ˜Ÿè¾°ç¢ç‰‡', 'é™¨é“'] },\r\n    ç½¡é£å¸¦: { åŸŸ: 'å¤©å±‚' as const, ç±»: 'ç¦åœ°' as const, å±: 90, ç‰¹: 'ç½¡é£å±éšœ', èµ„: ['ç½¡é£ç²¾å'] },\r\n    // ç¥å·\r\n    é—®é“å³°: { åŸŸ: 'ç¥å·' as const, ç±»: 'å®—é—¨' as const, å±: 10, ç‰¹: 'ä¸‡æ³•å®—', èµ„: ['åŠŸæ³•', 'çµè¯'] },\r\n    å‰‘é—¨å…³: { åŸŸ: 'ç¥å·' as const, ç±»: 'å®—é—¨' as const, å±: 15, ç‰¹: 'å‰‘é˜', èµ„: ['å‰‘æ„', 'é£å‰‘'] },\r\n    è—ä¹¦é˜: { åŸŸ: 'ç¥å·' as const, ç±»: 'å®—é—¨' as const, å±: 5, ç‰¹: 'å¤ç±', èµ„: ['åŠŸæ³•', 'ç§˜æœ¯'] },\r\n    é…†éƒ½åŸ: { åŸŸ: 'ç¥å·' as const, ç±»: 'åŸé•‡' as const, å±: 30, ç‰¹: 'é¬¼å¸‚', èµ„: ['å¹½å†¥ææ–™'] },\r\n    é¾™é—¨ç€‘: { åŸŸ: 'ç¥å·' as const, ç±»: 'ç§˜å¢ƒ' as const, å±: 40, ç‰¹: 'åŒ–é¾™', èµ„: ['é¾™æ°”'] },\r\n    // ä¸œè‹\r\n    å»ºæœ¨æ—: { åŸŸ: 'ä¸œè‹' as const, ç±»: 'åœ°å½¢' as const, å±: 50, ç‰¹: 'å¤æ ‘ç²¾', èµ„: ['çµæœ¨', 'å¦–ä¸¹'] },\r\n    é’å¸é™µ: { åŸŸ: 'ä¸œè‹' as const, ç±»: 'é—è¿¹' as const, å±: 85, ç‰¹: 'é’å¸ä¼ æ‰¿', èµ„: ['é’å¸ä¼ æ‰¿'] },\r\n    ç™¾èŠ±å¢ƒ: { åŸŸ: 'ä¸œè‹' as const, ç±»: 'ç§˜å¢ƒ' as const, å±: 20, ç‰¹: 'èŠ±æµ·', èµ„: ['çµèŠ±'] },\r\n    // å—ç‚\r\n    ä¸ç­ç«å±±: { åŸŸ: 'å—ç‚' as const, ç±»: 'åœ°å½¢' as const, å±: 80, ç‰¹: 'æœ±é›€æ¶…æ§ƒ', èµ„: ['æœ±é›€ç«'] },\r\n    æ¶…æ§ƒå°: { åŸŸ: 'å—ç‚' as const, ç±»: 'é—è¿¹' as const, å±: 70, ç‰¹: 'æ¶…æ§ƒ', èµ„: ['æ¶…æ§ƒæ„Ÿæ‚Ÿ'] },\r\n    // è¥¿åºš\r\n    ä¸‡å‰‘å†¢: { åŸŸ: 'è¥¿åºš' as const, ç±»: 'ç¦åœ°' as const, å±: 85, ç‰¹: 'å‰‘æ„', èµ„: ['å‰‘æ„', 'å¤å‰‘'] },\r\n    // åŒ—å†¥\r\n    ç„å†°å±±: { åŸŸ: 'åŒ—å†¥' as const, ç±»: 'å®—é—¨' as const, å±: 50, ç‰¹: 'ç„æ­¦å®—', èµ„: ['ç„å†°'] },\r\n    å½’å¢Ÿçœ¼: { åŸŸ: 'åŒ—å†¥' as const, ç±»: 'ç¦åœ°' as const, å±: 99, ç‰¹: 'å½’å¢Ÿ', èµ„: ['å½’å¢Ÿæ„Ÿæ‚Ÿ'] },\r\n    // ä¸‹å±‚\r\n    é»„æ³‰è¿¹: { åŸŸ: 'ä¸‹å±‚' as const, ç±»: 'é—è¿¹' as const, å±: 90, ç‰¹: 'å¹½å†¥', èµ„: ['é»„æ³‰æ°´'] },\r\n    ç‚æ¸Š: { åŸŸ: 'ä¸‹å±‚' as const, ç±»: 'ç¦åœ°' as const, å±: 95, ç‰¹: 'åœ°å¿ƒç«', èµ„: ['åœ°å¿ƒç«'] },\r\n};","// ============================================================================\n// è¸æœˆå¯»ä»™ - MVU å˜é‡ç»“æ„å®šä¹‰ (å…¥å£æ–‡ä»¶)\n// ============================================================================\n// ä»å­æ¨¡å—å¯¼å…¥å¹¶ç»„åˆæœ€ç»ˆ Schema\n\nimport { z } from 'zod';\n\n// å­æ¨¡å—å¯¼å…¥\nimport { AchievementSystemSchema } from './schema/achievements';\nimport { CharacterLibEntrySchema, CompanionSchema, DEFAULT_CHARACTER_LIB, NpcSchema } from './schema/characters';\nimport { ProtagonistSchema } from './schema/protagonist';\nimport { OpportunitySchema, QuestSchema, ReputationSystemSchema } from './schema/systems';\nimport { DEFAULT_FACTIONS, DEFAULT_LOCATIONS, DEFAULT_TREASURES, FactionSchema, LocationSchema, PhysiqueSchema, SpiritRootSchema, TechniqueSchema, TreasureSchema } from './schema/world';\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰å­æ¨¡å—çš„å…¬å¼€å†…å®¹\nexport * from './schema/achievements';\nexport { CharacterLibEntrySchema, CompanionSchema, DEFAULT_CHARACTER_LIB, NpcSchema } from './schema/characters';\nexport { computeRealmInfo, InventorySchema, ItemSchema, SkillSchema, å“é˜¶æ˜ å°„, ç†Ÿç»ƒåº¦æ˜ å°„ } from './schema/common';\nexport { CONFIG, REALM_LIFESPANS, REALM_NAMES, REALM_STAGES, REALM_THRESHOLDS } from './schema/constants';\nexport { ProtagonistSchema } from './schema/protagonist';\nexport { OpportunitySchema, QuestSchema, ReputationEntrySchema, ReputationSystemSchema } from './schema/systems';\nexport { calculateBaseCombatPower, evaluateCombatPower, getDangerColor, getRealmColor, getRootColor, parseRealmToLevel } from './schema/utils';\nexport { DEFAULT_FACTIONS, DEFAULT_LOCATIONS, DEFAULT_TREASURES, FactionSchema, LocationSchema, PhysiqueSchema, SpiritRootSchema, TechniqueSchema, TreasureSchema } from './schema/world';\n\n// ============================================================================\n// å®Œæ•´çš„ MVU å˜é‡ç»“æ„\n// ============================================================================\n\nexport const Schema = z.object({\n    ä¸–ç•Œæ—¶é’Ÿ: z.object({\n        çºªå…ƒ: z.string().prefault('æœ«æ³•æ—¶ä»£'),\n        å¹´ä»½: z.coerce.number().prefault(1),\n        æœˆä»½: z.coerce.number().transform(v => _.clamp(v, 1, 12)).prefault(1),\n        æ—¥æœŸ: z.coerce.number().transform(v => _.clamp(v, 1, 30)).prefault(1),\n        æ—¶è¾°: z.string().prefault('å­æ—¶'),\n    }).prefault({\n        çºªå…ƒ: 'æœ«æ³•æ—¶ä»£',\n        å¹´ä»½: 1,\n        æœˆä»½: 1,\n        æ—¥æœŸ: 1,\n        æ—¶è¾°: 'å­æ—¶',\n    }),\n\n    ä¸–ç•Œåœ°å›¾: z.record(z.string().describe('åŒºåŸŸå'), z.object({\n        layer: z.enum(['å¤©å±‚', 'åœ°å±‚', 'ä¸‹å±‚']).prefault('åœ°å±‚'),\n        danger: z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n        desc: z.string().prefault(''),\n        connections: z.array(z.string()).prefault([]),\n    })).prefault({}),\n\n    ä¸–ç•Œå›¾å¿—: z.record(z.string().describe('äº‹ä»¶å'), z.object({\n        çŠ¶æ€: z.string().prefault(''),\n        äº‹ä»¶: z.string().prefault(''),\n    })).prefault({}),\n\n    å®—é—¨åŠ¿åŠ›åº“: z.record(z.string().describe('å®—é—¨å'), FactionSchema).prefault(DEFAULT_FACTIONS),\n\n    // åŠŸæ³•åº“ - AI è‡ªç”±åˆ›é€ ï¼Œåªéœ€æä¾› { é˜¶, æ€§, æ•ˆ }\n    åŠŸæ³•åº“: z.record(z.string().describe('åŠŸæ³•å'), TechniqueSchema).prefault({}),\n\n    // æ³•å®åº“ - ä»…ä¿ç•™å‰§æƒ…å…³é”®æ³•å®ï¼Œå…¶ä»– AI è‡ªç”±åˆ›é€ \n    æ³•å®åº“: z.record(z.string().describe('æ³•å®å'), TreasureSchema).prefault(DEFAULT_TREASURES),\n\n    åœ°ç‚¹åº“: z.record(z.string().describe('åœ°ç‚¹å'), LocationSchema).prefault(DEFAULT_LOCATIONS),\n\n    // çµæ ¹åº“ - AI è‡ªç”±åˆ›é€ ï¼Œåªéœ€æä¾› { è´¨, æ€§, ç¨€ }ï¼Œé€Ÿåº¦å’Œç‰¹æ€§ç”± transform è‡ªåŠ¨è®¡ç®—\n    çµæ ¹åº“: z.record(z.string().describe('çµæ ¹å'), SpiritRootSchema).prefault({}),\n\n    // ä½“è´¨åº“ - AI è‡ªç”±åˆ›é€ ï¼Œåªéœ€æä¾› { è´¨, ç‰¹, ç¨€ }ï¼Œä¼˜åŠ¿ç”± transform è‡ªåŠ¨è®¡ç®—\n    ä½“è´¨åº“: z.record(z.string().describe('ä½“è´¨å'), PhysiqueSchema).prefault({}),\n\n    æœ¬å°Š: ProtagonistSchema,\n\n    çº¢é¢œè§’è‰²åº“: z.record(z.string().describe('è§’è‰²å'), CharacterLibEntrySchema).prefault(DEFAULT_CHARACTER_LIB),\n\n    çº¢é¢œ: z.record(z.string().describe('çº¢é¢œå'), CompanionSchema).prefault({}),\n\n    // NPCå›¾é‰´ - æç®€ç‰ˆï¼ˆä¿ç•™å‘åå…¼å®¹ï¼‰\n    NPCå›¾é‰´: z.record(z.string().describe('NPCå'), NpcSchema).prefault({}),\n\n    // ä»»åŠ¡åˆ—è¡¨ - ç§»é™¤è‡ªåŠ¨æ¸…ç†é€»è¾‘ï¼Œä¿æŒæ•°æ®å®Œæ•´æ€§\n    ä»»åŠ¡åˆ—è¡¨: z.record(z.string().describe('ä»»åŠ¡ID'), QuestSchema).prefault({}),\n\n    // å£°æœ›ç³»ç»Ÿ - å¥å£®æ€§ä¸æ™ºèƒ½ç®¡ç†ä¼˜åŒ–\n    å£°æœ›ç³»ç»Ÿ: ReputationSystemSchema,\n\n    // ========== æˆå°±/é‡Œç¨‹ç¢‘ç³»ç»Ÿ ==========\n    æˆå°±ç³»ç»Ÿ: AchievementSystemSchema,\n\n    // ========== è¡ŒåŠ¨æç¤ºç³»ç»Ÿ ==========\n    å¯å‚ä¸æœºé‡: z.array(OpportunitySchema).prefault([]),\n\n    // å½“å‰å¤„å¢ƒæè¿°ï¼ˆç”¨äºè¡ŒåŠ¨æç¤ºé¢æ¿é¡¶éƒ¨æ˜¾ç¤ºï¼‰\n    å½“å‰å¤„å¢ƒ: z.string().prefault(''),\n});\n\n// å¯¼å‡º Schema ç±»å‹\nexport type SchemaType = z.output<typeof Schema>;\n","import { registerMvuSchema } from 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';\nimport { Schema } from '../è¸æœˆå¯»ä»™-æµ‹è¯•ç‰ˆ/schema';\n\n$(() => {\n    registerMvuSchema(Schema);\n    console.info('[ç¯ç«é˜‘çŠ] MVU å˜é‡ç»“æ„å·²æ³¨å†Œ');\n    toastr.success('MVU å˜é‡ç»“æ„å·²æˆåŠŸæ³¨å†Œ', 'ç¯ç«é˜‘çŠ');\n});"],"names":["z","AchievementTypeEnum","enum","AchievementRarityEnum","UnlockedAchievementSchema","object","string","prefault","coerce","number","Date","now","optional","describe","MilestoneSchema","transform","v","_","clamp","Math","max","TitleSchema","array","AchievementProgressSchema","AchievementSystemSchema","record","REALM_THRESHOLDS","REALM_LIFESPANS","ItemSchema","SkillSchema","catch","skill","InventorySchema","data","pickBy","computeRealmInfo","includesCombatPower","level","majorIdx","floor","base","toFixed","minorIdx","pow","round","calculateBaseCombatPower","Object","values","length","map","s","includes","CharacterLibEntrySchema","CompanionSchema","boolean","realmInfo","NpcSchema","CombatStatusSchema","EnemySchema","TribulationSchema","LocationTrackSchema","IdentitySchema","ProtagonistSchema","QuestSchema","union","ReputationEntrySchema","ReputationSystemSchema","factions","mapValues","faction","value","OpportunitySchema","FactionSchema","TechniqueSchema","TreasureSchema","LocationSchema","SpiritRootSchema","PhysiqueSchema","Schema","layer","danger","desc","connections","$","console","info","toastr","success"],"ignoreList":[],"sourceRoot":""}