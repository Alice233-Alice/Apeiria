import{registerMvuSchema as r}from'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';const e=z,t=['练气','筑基','金丹','元婴','化神','炼虚','合体','大乘','渡劫'],n=['初期','中期','后期','大圆满'],a=[100,200,300,400,500,600,700,800,900,1e3,1100,1200,2400,2400,2400,2400,4800,4800,4800,4800,9600,9600,9600,9600,19200,19200,19200,19200,38400,38400,38400,38400,76800,76800,76800,76800],s=[100,100,100,100,200,200,200,200,500,500,500,500,1e3,1e3,1e3,1e3,2e3,2e3,2e3,2e3,5e3,5e3,5e3,5e3,1e4,1e4,1e4,1e4,5e4,5e4,5e4,5e4,1e5,1e5,1e5,1e5],c=e.z.object({名称:e.z.string().prefault(''),描述:e.z.string().prefault(''),品阶:e.z.string().prefault(''),数量:e.z.coerce.number().transform(r=>Math.max(0,r)).prefault(1)}),u=e.z.object({地:e.z.string().describe('所在地'),特:e.z.string().describe('核心特点'),力:e.z.string().describe('最高战力'),营:e.z.enum(['正','魔','中']),模:e.z.enum(['超大','大','小','微','特'])}),o=e.z.object({阶:e.z.enum(['凡','黄','玄','地','天','仙','圣']),性:e.z.string().describe('属性'),效:e.z.string().describe('效果')}),i=e.z.object({阶:e.z.enum(['凡器','法器','灵器','法宝','灵宝','仙器','圣器','道器']),类:e.z.string().describe('类型')}).transform(r=>({...r,特:'仙器'===r.阶?'顶级':'灵宝'===r.阶?'强':'法宝'===r.阶?'中':'普通'})),f=e.z.object({域:e.z.enum(['天层','神州','东苍','南炎','西庚','北冥','下层','四海']),类:e.z.enum(['秘境','城镇','宗门','禁地','遗迹','地形']),危:e.z.coerce.number().transform(r=>_.clamp(r,0,100)),特:e.z.string().describe('特点'),资:e.z.array(e.z.string()).prefault([])}),l=e.z.object({质:e.z.enum(['劣','下','中','上','极','天','异']),性:e.z.string().describe('属性'),稀:e.z.enum(['常','少','罕','稀','传'])}).transform(r=>({...r,速:{劣:'0.3倍',下:'0.5倍',中:'1倍',上:'2倍',极:'3倍',天:'5倍',异:'4倍'}[r.质]||'1倍',特:'天'===r.质?'单系顶级':'异'===r.质?'变异稀有':'极'===r.质?'双系优秀':'常规'})),p=e.z.object({质:e.z.enum(['凡','灵','道','圣','神']),特:e.z.string().describe('特性'),稀:e.z.enum(['常','少','罕','稀','传'])}).transform(r=>({...r,优:'神'===r.质?'至高':'圣'===r.质?'极强':'道'===r.质?'强':'灵'===r.质?'中':'无'})),m=e.z.object({世界时钟:e.z.object({纪元:e.z.string().prefault('末法时代'),年份:e.z.coerce.number().prefault(1),月份:e.z.coerce.number().transform(r=>_.clamp(r,1,12)).prefault(1),日期:e.z.coerce.number().transform(r=>_.clamp(r,1,30)).prefault(1),时辰:e.z.string().prefault('子时')}).prefault({纪元:'末法时代',年份:1,月份:1,日期:1,时辰:'子时'}),世界地图:e.z.record(e.z.string().describe('区域名'),e.z.object({layer:e.z.enum(['天层','地层','下层']).prefault('地层'),danger:e.z.coerce.number().transform(r=>_.clamp(r,0,100)),desc:e.z.string().prefault(''),connections:e.z.array(e.z.string()).prefault([])})).prefault({}),世界图志:e.z.record(e.z.string().describe('事件名'),e.z.object({状态:e.z.string().prefault(''),事件:e.z.string().prefault('')})).prefault({}),宗门势力库:e.z.record(e.z.string().describe('宗门名'),u).prefault({剑阁:{地:'神州剑门关',特:'剑道源头',力:'渡劫后期',营:'正',模:'超大'},万法宗:{地:'神州问道峰',特:'万法本源',力:'渡劫初期',营:'正',模:'超大'},金刚寺:{地:'西天佛山',特:'佛修炼体',力:'大乘中期',营:'正',模:'大'},药王谷:{地:'神农架',特:'医炼丹药',力:'大乘初期',营:'正',模:'大'},儒门:{地:'文圣山',特:'浩然正气',力:'大乘中期',营:'正',模:'大'},青龙殿:{地:'东苍青龙山',特:'守护青帝',力:'大乘初期',营:'正',模:'大'},玄武宗:{地:'北冥玄冰山',特:'镇守归墟',力:'大乘后期',营:'正',模:'大'},青云门:{地:'神州青云山',特:'水脉一系',力:'大乘初期',营:'正',模:'大'},建木宗:{地:'东苍建木树',特:'木系道法',力:'合体中期',营:'正',模:'小'},百花谷:{地:'百花秘境',特:'女修花道',力:'合体后期',营:'正',模:'小'},血神教:{地:'血魔渊',特:'血道炼法',力:'渡劫中期',营:'魔',模:'超大'},天魔宗:{地:'天魔山',特:'天魔大道',力:'大乘中期',营:'魔',模:'大'},妖盟:{地:'万妖森林',特:'妖族联盟',力:'渡劫中期',营:'中',模:'超大'},大夏王朝:{地:'中州皇城',特:'世俗统治',力:'大乘初期',营:'中',模:'大'},九州商会:{地:'九大主城',特:'商业联盟',力:'大乘初期',营:'中',模:'大'},离火宫:{地:'南炎火山',特:'朱雀供奉',力:'合体圆满',营:'中',模:'小'},铸剑山庄:{地:'南炎地火',特:'炼器第一',力:'合体后期',营:'中',模:'小'}}),功法库:e.z.record(e.z.string().describe('功法名'),o).prefault({引气诀:{阶:'凡',性:'通用',效:'入门'},筑基真解:{阶:'玄',性:'通用',效:'筑基'},金丹大道:{阶:'地',性:'通用',效:'结丹'},万剑归宗诀:{阶:'天',性:'金剑',效:'剑阁镇宗'},建木通天诀:{阶:'天',性:'木',效:'建木镇宗'},北冥真经:{阶:'天',性:'水',效:'玄武吞噬'},朱雀涅槃经:{阶:'天',性:'火',效:'离火涅槃'},不动明王身:{阶:'天',性:'土佛',效:'金刚防御'},万木朝宗:{阶:'仙',性:'木',效:'青帝遗法'},海纳百川:{阶:'仙',性:'水',效:'归墟本源'},祝融神火:{阶:'仙',性:'火',效:'火神遗法'},轮回经:{阶:'仙',性:'轮回',效:'{{user}}专属'},斩轮回剑典:{阶:'仙',性:'剑轮回',效:'{{user}}前世'},剑意通神:{阶:'仙',性:'剑道',效:'剑意化形'},九天雷神诀:{阶:'天',性:'雷',效:'雷霆'},虚空经:{阶:'天',性:'空间',效:'空间'},万法归宗:{阶:'天',性:'通用',效:'模拟'},医仙宝典:{阶:'天',性:'医道',效:'医道'},天魔策:{阶:'天',性:'魔道',效:'速成'}}),法宝库:e.z.record(e.z.string().describe('法宝名'),i).prefault({镇渊剑:{阶:'仙器',类:'剑'},双鱼佩:{阶:'仙器',类:'护身'},青锋剑:{阶:'法器',类:'剑'},储物戒:{阶:'灵器',类:'储物'},青龙剑:{阶:'灵宝',类:'剑'},白虎剑:{阶:'灵宝',类:'剑'},朱雀剑:{阶:'灵宝',类:'剑'},玄武剑:{阶:'灵宝',类:'剑'}}),地点库:e.z.record(e.z.string().describe('地点名'),f).prefault({天渊:{域:'天层',类:'禁地',危:95,特:'星辰裂隙',资:['星辰碎片','陨铁']},罡风带:{域:'天层',类:'禁地',危:90,特:'罡风屏障',资:['罡风精华']},问道峰:{域:'神州',类:'宗门',危:10,特:'万法宗',资:['功法','灵药']},剑门关:{域:'神州',类:'宗门',危:15,特:'剑阁',资:['剑意','飞剑']},藏书阁:{域:'神州',类:'宗门',危:5,特:'古籍',资:['功法','秘术']},酆都城:{域:'神州',类:'城镇',危:30,特:'鬼市',资:['幽冥材料']},龙门瀑:{域:'神州',类:'秘境',危:40,特:'化龙',资:['龙气']},建木林:{域:'东苍',类:'地形',危:50,特:'古树精',资:['灵木','妖丹']},青帝陵:{域:'东苍',类:'遗迹',危:85,特:'青帝传承',资:['青帝传承']},百花境:{域:'东苍',类:'秘境',危:20,特:'花海',资:['灵花']},不灭火山:{域:'南炎',类:'地形',危:80,特:'朱雀涅槃',资:['朱雀火']},涅槃台:{域:'南炎',类:'遗迹',危:70,特:'涅槃',资:['涅槃感悟']},万剑冢:{域:'西庚',类:'禁地',危:85,特:'剑意',资:['剑意','古剑']},玄冰山:{域:'北冥',类:'宗门',危:50,特:'玄武宗',资:['玄冰']},归墟眼:{域:'北冥',类:'禁地',危:99,特:'归墟',资:['归墟感悟']},黄泉迹:{域:'下层',类:'遗迹',危:90,特:'幽冥',资:['黄泉水']},炎渊:{域:'下层',类:'禁地',危:95,特:'地心火',资:['地心火']}}),灵根库:e.z.record(e.z.string().describe('灵根名'),l).prefault({金天根:{质:'天',性:'金',稀:'传'},木天根:{质:'天',性:'木',稀:'传'},水天根:{质:'天',性:'水',稀:'传'},火天根:{质:'天',性:'火',稀:'传'},土天根:{质:'天',性:'土',稀:'传'},三灵根:{质:'上',性:'三系',稀:'罕'},四灵根:{质:'中',性:'四系',稀:'少'},五行杂根:{质:'下',性:'五行',稀:'常'},冰根:{质:'异',性:'冰',稀:'传'},雷根:{质:'异',性:'雷',稀:'传'},离火根:{质:'异',性:'离火',稀:'传'},空间根:{质:'异',性:'空间',稀:'传'},时间根:{质:'异',性:'时间',稀:'传'},混沌根:{质:'异',性:'混沌',稀:'传'},轮回根:{质:'异',性:'轮回',稀:'传'}}),体质库:e.z.record(e.z.string().describe('体质名'),p).prefault({凡体:{质:'凡',特:'普通',稀:'常'},玄冰体:{质:'灵',特:'冰系增强',稀:'罕'},离火体:{质:'灵',特:'火系增强',稀:'罕'},木灵体:{质:'灵',特:'恢复增强',稀:'罕'},天籁体:{质:'灵',特:'音律神通',稀:'罕'},花妖体:{质:'灵',特:'魅惑控制',稀:'稀'},朱雀脉:{质:'道',特:'火系涅槃',稀:'传'},真龙脉:{质:'道',特:'龙族神通',稀:'传'},战体:{质:'道',特:'战力倍增',稀:'传'},梦魇体:{质:'道',特:'幻术掌控',稀:'传'},雪魂体:{质:'道',特:'冰系极致',稀:'传'},混沌体:{质:'圣',特:'万法无阻',稀:'传'},道体:{质:'圣',特:'悟性极高',稀:'传'},金身:{质:'圣',特:'防御无敌',稀:'传'},轮回体:{质:'神',特:'{{user}}专属轮回',稀:'传'},时空体:{质:'神',特:'时空掌控',稀:'传'}}),本尊:e.z.object({等级:e.z.coerce.number().transform(r=>_.clamp(r,1,36)).prefault(1),修为:e.z.coerce.number().transform(r=>Math.max(0,r)).prefault(0),灵根:e.z.string().prefault('五行杂灵根'),体质:e.z.string().prefault('凡体'),功法:e.z.string().prefault('无'),本命兵器:e.z.string().prefault('无'),神通列表:e.z.record(e.z.string().describe('神通名'),e.z.object({名称:e.z.string().prefault(''),描述:e.z.string().prefault(''),类型:e.z.enum(['功法','神通','秘术']).prefault('神通'),品阶:e.z.string().transform(r=>({凡:'凡',凡阶:'凡',凡级:'凡',凡品:'凡',黄:'黄',黄阶:'黄',黄级:'黄',黄品:'黄',玄:'玄',玄阶:'玄',玄级:'玄',玄品:'玄',地:'地',地阶:'地',地级:'地',地品:'地',天:'天',天阶:'天',天级:'天',天品:'天',仙:'仙',仙阶:'仙',仙级:'仙',仙品:'仙',圣:'圣',圣阶:'圣',圣级:'圣',圣品:'圣',先天:'先天',先天阶:'先天',先天级:'先天'}[r]||'凡')).catch('凡'),熟练度:e.z.string().transform(r=>({入门:'入门',初级:'入门',初学:'入门',新手:'入门',熟练:'熟练',中级:'熟练',娴熟:'熟练',精通:'精通',高级:'精通',精湛:'精通',大成:'大成',大师:'大成',宗师:'大成',圆满:'圆满',完美:'圆满',极致:'圆满',化境:'化境',化神:'化境',返璞归真:'化境',出神入化:'化境'}[r]||'入门')).catch('入门'),领悟时间:e.z.coerce.number().catch(()=>Date.now()),威力等级:e.z.coerce.number().optional()}).transform(r=>{if(!r.威力等级||0===r.威力等级){const e={入门:1,熟练:2,精通:3,大成:4,圆满:5,化境:6},t={凡:1,黄:2,玄:3,地:4,天:5,仙:6,圣:7,先天:8}[r.品阶]||1,n=e[r.熟练度]||1;return{...r,威力等级:10*t+n}}return r})).prefault({}),灵石:e.z.coerce.number().transform(r=>Math.max(0,r)).prefault(0),已活岁月:e.z.coerce.number().transform(r=>Math.max(0,r)).prefault(0),尝试突破:e.z.boolean().prefault(!1),行踪:e.z.object({当前区域:e.z.string().prefault('未知之地'),所属层级:e.z.string().prefault('地层'),环境描述:e.z.string().prefault(''),危险度:e.z.coerce.number().prefault(10),可用通道:e.z.array(e.z.string()).prefault([]),导航信息:e.z.string().prefault('')}).prefault({当前区域:'未知之地',所属层级:'地层',环境描述:'',危险度:10,可用通道:[],导航信息:''}),身份:e.z.object({姓名:e.z.string().prefault('无名氏'),宗门:e.z.string().prefault('散修'),出身:e.z.string().prefault('凡人')}).prefault({姓名:'无名氏',宗门:'散修',出身:'凡人'}),背包:e.z.record(e.z.string().describe('物品名'),c).prefault({}).transform(r=>_.pickBy(r,({数量:r})=>r>0)),法宝:e.z.record(e.z.string().describe('法宝名'),c).prefault({}).transform(r=>_.pickBy(r,({数量:r})=>r>0)),杂物袋:e.z.record(e.z.string().describe('杂物名'),c).prefault({}).transform(r=>_.pickBy(r,({数量:r})=>r>0))}).prefault({等级:1,修为:0,灵根:'五行杂灵根',体质:'凡体',功法:'无',本命兵器:'无',神通列表:{},灵石:0,已活岁月:0,尝试突破:!1,行踪:{当前区域:'未知之地',所属层级:'地层',环境描述:'',危险度:10,可用通道:[],导航信息:''},身份:{姓名:'无名氏',宗门:'散修',出身:'凡人'},背包:{},法宝:{},杂物袋:{}}).transform(r=>{const e=r.等级,c=a[e-1]??100,u=s[e-1]??100,o=Math.floor((e-1)/4),i=`${t[o]??'练气'}${n[(e-1)%4]??'初期'}`,f=`${r.已活岁月}/${u}`,l=r.尝试突破?'突破中':r.修为>=c?'瓶颈期':'修炼中',p=`${(r.修为/c*100).toFixed(1)}%`;return{...r,突破阈值:c,寿元上限:u,境界描述:i,寿元状态:f,状态:l,进度:p}}),红颜角色库:e.z.record(e.z.string().describe('角色名'),e.z.object({级:e.z.coerce.number().transform(r=>_.clamp(r,1,36)),根:e.z.string().describe('灵根'),质:e.z.string().describe('体质'),龄:e.z.string().describe('年龄'),属:e.z.string().describe('所属'),法:e.z.string().describe('功法'),器:e.z.string().describe('本命兵器'),通:e.z.array(e.z.string()).prefault([]),型:e.z.enum(['核心','重要','次要'])})).prefault({许听雨:{级:33,根:'水本源天',质:'归墟神体',龄:'外26实12000',属:'归墟之主',法:'万水归源先天',器:'沧海遗珠先天',通:['归墟歌','逆流虚妄','寂灭海域','万水同源'],型:'核心'},虞汐颜:{级:12,根:'水阴阳异',质:'双鱼体',龄:'化形0年',属:'{{user}}玉佩',法:'双生天极/阴阳',器:'双鱼佩本体',通:['枯木春','夺命妆','双鱼梦'],型:'核心'},白清弦:{级:29,根:'金天根',质:'剑体',龄:'外30实1000+',属:'散修剑宗师',法:'剑意仙/天音天',器:'清弦琴剑灵宝',通:['琴剑杀','剑意歌','万剑心'],型:'核心'},南宫云裳:{级:16,根:'火天根',质:'神凰道体',龄:'外10实118',属:'大夏栖凤宫主',法:'九转涅槃仙',器:'栖梧簪灵宝',通:['南明离火','凰威镇世','羽化虚空'],型:'核心'},焰绯月:{级:12,根:'离火根极',质:'朱雀脉',龄:'25',属:'离火宫圣女',法:'朱雀天',器:'绯月弓法宝',通:['离火天','朱雀身','凤凰槃'],型:'重要'},幻千丝:{级:13,根:'暗幻双根',质:'梦魇体',龄:'外20未知',属:'散修幽冥',法:'织梦天',器:'千丝网灵宝',通:['织梦笼','心魔境','千丝缚'],型:'重要'},花想容:{级:8,根:'木根',质:'花妖体',龄:'外12',属:'建木宗',法:'百花地',器:'牡丹瓣',通:['花海域','治愈粉','魅惑香'],型:'次要'}}),红颜:e.z.record(e.z.string().describe('红颜名'),e.z.object({等级:e.z.coerce.number().transform(r=>_.clamp(r,1,36)).prefault(1),修为:e.z.coerce.number().transform(r=>Math.max(0,r)).prefault(0),灵根:e.z.string().prefault('五行杂灵根'),体质:e.z.string().prefault('凡体'),功法:e.z.string().prefault('无'),本命兵器:e.z.string().prefault('无'),神通列表:e.z.record(e.z.string().describe('神通名'),e.z.object({名称:e.z.string().prefault(''),描述:e.z.string().prefault(''),类型:e.z.enum(['功法','神通','秘术']).prefault('神通'),品阶:e.z.string().transform(r=>({凡:'凡',凡阶:'凡',凡级:'凡',凡品:'凡',黄:'黄',黄阶:'黄',黄级:'黄',黄品:'黄',玄:'玄',玄阶:'玄',玄级:'玄',玄品:'玄',地:'地',地阶:'地',地级:'地',地品:'地',天:'天',天阶:'天',天级:'天',天品:'天',仙:'仙',仙阶:'仙',仙级:'仙',仙品:'仙',圣:'圣',圣阶:'圣',圣级:'圣',圣品:'圣',先天:'先天',先天阶:'先天',先天级:'先天'}[r]||'凡')).catch('凡'),熟练度:e.z.string().transform(r=>({入门:'入门',初级:'入门',初学:'入门',新手:'入门',熟练:'熟练',中级:'熟练',娴熟:'熟练',精通:'精通',高级:'精通',精湛:'精通',大成:'大成',大师:'大成',宗师:'大成',圆满:'圆满',完美:'圆满',极致:'圆满',化境:'化境',化神:'化境',返璞归真:'化境',出神入化:'化境'}[r]||'入门')).catch('入门'),领悟时间:e.z.coerce.number().catch(()=>Date.now()),威力等级:e.z.coerce.number().optional()}).transform(r=>{if(!r.威力等级||0===r.威力等级){const e={入门:1,熟练:2,精通:3,大成:4,圆满:5,化境:6},t={凡:1,黄:2,玄:3,地:4,天:5,仙:6,圣:7,先天:8}[r.品阶]||1,n=e[r.熟练度]||1;return{...r,威力等级:10*t+n}}return r})).prefault({}),灵石:e.z.coerce.number().transform(r=>Math.max(0,r)).prefault(0),已活岁月:e.z.coerce.number().transform(r=>Math.max(0,r)).prefault(0),尝试突破:e.z.boolean().prefault(!1),好感度:e.z.coerce.number().transform(r=>_.clamp(r,-100,100)).prefault(0),关系:e.z.string().prefault('陌生人'),重要性:e.z.string().prefault('路人')}).prefault({等级:1,修为:0,灵根:'五行杂灵根',体质:'凡体',功法:'无',本命兵器:'无',神通列表:{},灵石:0,已活岁月:0,尝试突破:!1,好感度:0,关系:'陌生人',重要性:'路人'}).transform(r=>{const e=r.等级,c=a[e-1]??100,u=s[e-1]??100,o=Math.floor((e-1)/4),i=`${t[o]??'练气'}${n[(e-1)%4]??'初期'}`,f=`${r.已活岁月}/${u}`,l=r.尝试突破?'突破中':r.修为>=c?'瓶颈期':'修炼中',p=`${(r.修为/c*100).toFixed(1)}%`;return{...r,突破阈值:c,寿元上限:u,境界描述:i,寿元状态:f,状态:l,进度:p}})).prefault({}),NPC图鉴:e.z.record(e.z.string().describe('NPC名'),e.z.object({等级:e.z.coerce.number().transform(r=>_.clamp(r,1,36)).prefault(1),所在宗门:e.z.string().prefault('散修'),备注:e.z.string().prefault('')})).prefault({}),任务列表:e.z.record(e.z.string().describe('任务ID'),e.z.object({名称:e.z.string().prefault(''),类型:e.z.enum(['主线','支线','每日','临危受命','秘境探索']).prefault('主线'),目标:e.z.string().prefault(''),状态:e.z.enum(['进行中','已完成','已失败']).prefault('进行中'),秘境信息:e.z.object({域:e.z.enum(['天层','神州','东苍','南炎','西庚','北冥','下层','四海']).optional(),危:e.z.coerce.number().transform(r=>_.clamp(r,0,100)).optional(),特:e.z.string().optional(),奖:e.z.array(e.z.string()).prefault([]),限:e.z.string().optional()}).optional(),创建时间:e.z.union([e.z.coerce.number(),e.z.string().transform(()=>Date.now())]).prefault(()=>Date.now())})).prefault({}),声望系统:e.z.record(e.z.string().describe('势力名'),e.z.object({值:e.z.coerce.number().transform(r=>_.clamp(r,-100,100)).prefault(0),关系:e.z.string().prefault('陌生'),更新时间:e.z.coerce.number().prefault(()=>Date.now())})).prefault({}).transform(r=>_(r).mapValues(r=>{const e=r.值;let t;t=e>=80?'盟友':e>=60?'友善':e>=30?'友好':e>=10?'中立偏好':e>=-10?'中立':e>=-30?'中立偏恶':e>=-60?'敌对':e>=-80?'仇恨':'不死不休';const n=r.关系&&'陌生'!==r.关系?r.关系:t;return{...r,关系:n}}).value())});$(()=>{r(m),console.info('[踏月寻仙] MVU 变量结构已注册'),toastr.success('MVU 变量结构已成功注册','踏月寻仙')});
//# sourceMappingURL=index.js.map