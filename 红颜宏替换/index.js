$(()=>{console.info('[红颜宏] 开始注册宏替换'),waitGlobalInitialized('Mvu').then(()=>{console.info('[红颜宏] MVU 已初始化，注册 {红颜} 宏'),registerMacroLike(/\{红颜\}/gi,e=>{try{const o=e.message_id??getCurrentMessageId(),t=Mvu.getMvuData({type:'message',message_id:o});if(!t)return console.warn('[红颜宏] 未找到 MVU 变量'),'(当前无红颜角色)';const n=_.get(t,'stat_data',{}),s=_.get(n,'红颜',{}),r=Object.keys(s);if(r.length>0){const e=r.join('、');return console.info(`[红颜宏] 替换成功: {红颜} → ${e}`),e}return console.info('[红颜宏] 当前无红颜角色'),'(当前无红颜角色)'}catch(e){return console.error('[红颜宏] 替换失败',e),'{红颜}'}}),console.info('[红颜宏] 宏注册成功'),toastr.success('红颜宏已启用，世界书中的 {红颜} 将自动替换','红颜宏')}).catch(e=>{console.warn('[红颜宏] MVU 未加载，宏功能不可用',e),toastr.warning('MVU 框架未加载，红颜宏功能不可用','红颜宏')})});
//# sourceMappingURL=index.js.map