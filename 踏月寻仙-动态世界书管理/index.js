const e=z,r=e.z.enum(['å¢ƒç•Œçªç ´','çº¢é¢œç¼˜åˆ†','æˆ˜æ–—è£è€€','æ¢ç´¢å‘ç°','å¥‡é‡æœºç¼˜','åŠ¿åŠ›å£°æœ›','æ”¶è—æˆå°±','éšè—æˆå°±']),t=e.z.enum(['æ™®é€š','ç¨€æœ‰','å²è¯—','ä¼ è¯´','ç¥è¯']),n=e.z.object({åç§°:e.z.string().prefault(''),æè¿°:e.z.string().prefault(''),ç±»å‹:r.prefault('å¥‡é‡æœºç¼˜'),ç¨€æœ‰åº¦:t.prefault('æ™®é€š'),è§£é”æ—¶é—´:e.z.coerce.number().prefault(()=>Date.now()),è§£é”æ¡ä»¶:e.z.string().prefault(''),ç¬¬ä¸€å°è±¡:e.z.string().optional().describe('è§£é”ç¬é—´çš„åœºæ™¯æè¿°')}),a=e.z.object({æœ€é«˜å¢ƒç•Œ:e.z.coerce.number().transform(e=>_.clamp(e,1,36)).prefault(1),çªç ´æ¬¡æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),æ¸¡åŠ«æ¬¡æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),æ¸¡åŠ«æˆåŠŸæ¬¡æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),çº¢é¢œç›¸è¯†æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),çº¢é¢œç»“ç¼˜æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),çº¢é¢œåŒä¿®æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),çº¢é¢œå¥½æ„Ÿåº¦æ€»å’Œ:e.z.coerce.number().prefault(0),æœ€é«˜å¥½æ„Ÿçº¢é¢œ:e.z.string().prefault('æ— '),æˆ˜æ–—æ€»åœºæ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),æˆ˜æ–—èƒœåˆ©æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),è¶Šçº§å‡»æ€æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),æœ€é«˜è¶Šçº§å±‚æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),æ¿’æ­»é€ƒç”Ÿæ¬¡æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),è¿èƒœæœ€é«˜çºªå½•:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),æ¢ç´¢åŒºåŸŸæ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),ç§˜å¢ƒé€šå…³æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),ç¦åœ°è¸è¶³æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),é—è¿¹å‘ç°æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),å¤©å‘½æ‰€å½’æ¬¡æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),å¥‡ç¼˜é­é‡æ¬¡æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),å±æœºåŒ–è§£æ¬¡æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),ç›Ÿå‹åŠ¿åŠ›æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),æ•Œå¯¹åŠ¿åŠ›æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),åŠŸæ³•ä¹ å¾—æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),ç¥é€šé¢†æ‚Ÿæ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),æ³•å®è·å¾—æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),æœ¬å‘½æ³•å®æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),æ¸¸æˆæ€»æ—¶é•¿:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0).describe('æ¸¸æˆå†…å¹´æ•°'),æ­»äº¡æ¬¡æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),é‡ç”Ÿæ¬¡æ•°:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0)}).prefault({}),o=e.z.object({å·²è·å¾—:e.z.array(e.z.string()).prefault([]),å½“å‰ä½©æˆ´:e.z.string().prefault('æ— åæ•£ä¿®')}).prefault({å·²è·å¾—:[],å½“å‰ä½©æˆ´:'æ— åæ•£ä¿®'}),s=e.z.object({å½“å‰è¿›åº¦:e.z.coerce.number().prefault(0),ç›®æ ‡è¿›åº¦:e.z.coerce.number().prefault(1),æœ€åæ›´æ–°:e.z.coerce.number().prefault(()=>Date.now())}),c=e.z.object({å·²è§£é”:e.z.record(e.z.string().describe('æˆå°±ID'),n).prefault({}),é‡Œç¨‹ç¢‘:a,ç§°å·:o,è¿›åº¦è¿½è¸ª:e.z.record(e.z.string().describe('æˆå°±ID'),s).prefault({})}).prefault({});const l=['ç»ƒæ°”','ç­‘åŸº','é‡‘ä¸¹','å…ƒå©´','åŒ–ç¥','ç‚¼è™š','åˆä½“','å¤§ä¹˜','æ¸¡åŠ«'],u=['åˆæœŸ','ä¸­æœŸ','åæœŸ','å¤§åœ†æ»¡'],i=[100,200,300,400,500,600,700,800,900,1e3,1100,1200,2400,2400,2400,2400,4800,4800,4800,4800,9600,9600,9600,9600,19200,19200,19200,19200,38400,38400,38400,38400,76800,76800,76800,76800],f=[100,100,100,100,200,200,200,200,500,500,500,500,1e3,1e3,1e3,1e3,2e3,2e3,2e3,2e3,5e3,5e3,5e3,5e3,1e4,1e4,1e4,1e4,5e4,5e4,5e4,5e4,1e5,1e5,1e5,1e5],m=e.z.object({åç§°:e.z.string().prefault(''),æè¿°:e.z.string().prefault(''),å“é˜¶:e.z.string().prefault(''),æ•°é‡:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(1)}),p=e.z.object({åœ°:e.z.string().describe('æ‰€åœ¨åœ°'),ç‰¹:e.z.string().describe('æ ¸å¿ƒç‰¹ç‚¹'),åŠ›:e.z.string().describe('æœ€é«˜æˆ˜åŠ›'),è¥:e.z.enum(['æ­£','é­”','ä¸­']),æ¨¡:e.z.enum(['è¶…å¤§','å¤§','å°','å¾®','ç‰¹'])}),g=e.z.object({é˜¶:e.z.string().transform(e=>({å‡¡:'å‡¡',å‡¡é˜¶:'å‡¡',å‡¡çº§:'å‡¡',å‡¡å“:'å‡¡',é»„:'é»„',é»„é˜¶:'é»„',é»„çº§:'é»„',é»„å“:'é»„',ç„:'ç„',ç„é˜¶:'ç„',ç„çº§:'ç„',ç„å“:'ç„',åœ°:'åœ°',åœ°é˜¶:'åœ°',åœ°çº§:'åœ°',åœ°å“:'åœ°',å¤©:'å¤©',å¤©é˜¶:'å¤©',å¤©çº§:'å¤©',å¤©å“:'å¤©',ä»™:'ä»™',ä»™é˜¶:'ä»™',ä»™çº§:'ä»™',ä»™å“:'ä»™',åœ£:'åœ£',åœ£é˜¶:'åœ£',åœ£çº§:'åœ£',åœ£å“:'åœ£'}[e]||'å‡¡')).catch('å‡¡'),æ€§:e.z.string().describe('å±æ€§'),æ•ˆ:e.z.string().describe('æ•ˆæœ')}),b=e.z.object({é˜¶:e.z.enum(['å‡¡å™¨','æ³•å™¨','çµå™¨','æ³•å®','çµå®','ä»™å™¨','åœ£å™¨','é“å™¨','æœ¬å‘½']),ç±»:e.z.string().describe('ç±»å‹'),æœ¬å‘½ç‰¹æ€§:e.z.string().optional().describe('æœ¬å‘½æ³•å®ç‹¬æœ‰ç‰¹æ€§'),å™¨çµ:e.z.string().optional().describe('å™¨çµåç§°')}).transform(e=>({...e,ç‰¹:'æœ¬å‘½'===e.é˜¶?'è‡³å°Š':'é“å™¨'===e.é˜¶?'è¶…å‡¡':'åœ£å™¨'===e.é˜¶?'æå“':'ä»™å™¨'===e.é˜¶?'é¡¶çº§':'çµå®'===e.é˜¶?'å¼º':'æ³•å®'===e.é˜¶?'ä¸­':'æ™®é€š'})),E=e.z.object({åŸŸ:e.z.enum(['å¤©å±‚','ç¥å·','ä¸œè‹','å—ç‚','è¥¿åºš','åŒ—å†¥','ä¸‹å±‚','å››æµ·']),ç±»:e.z.enum(['ç§˜å¢ƒ','åŸé•‡','å®—é—¨','ç¦åœ°','é—è¿¹','åœ°å½¢']),å±:e.z.coerce.number().transform(e=>_.clamp(e,0,100)),ç‰¹:e.z.string().describe('ç‰¹ç‚¹'),èµ„:e.z.union([e.z.array(e.z.string()),e.z.string().transform(e=>e?[e]:[])]).prefault([])}),d=e.z.object({è´¨:e.z.enum(['åŠ£','ä¸‹','ä¸­','ä¸Š','æ','å¤©','å¼‚']),æ€§:e.z.string().describe('å±æ€§'),ç¨€:e.z.enum(['å¸¸','å°‘','ç½•','ç¨€','ä¼ '])}).transform(e=>({...e,é€Ÿ:{åŠ£:'0.3å€',ä¸‹:'0.5å€',ä¸­:'1å€',ä¸Š:'2å€',æ:'3å€',å¤©:'5å€',å¼‚:'4å€'}[e.è´¨]||'1å€',ç‰¹:'å¤©'===e.è´¨?'å•ç³»é¡¶çº§':'å¼‚'===e.è´¨?'å˜å¼‚ç¨€æœ‰':'æ'===e.è´¨?'åŒç³»ä¼˜ç§€':'å¸¸è§„'})),h=e.z.object({è´¨:e.z.enum(['å‡¡','çµ','é“','åœ£','ç¥']),ç‰¹:e.z.string().describe('ç‰¹æ€§'),ç¨€:e.z.enum(['å¸¸','å°‘','ç½•','ç¨€','ä¼ '])}).transform(e=>({...e,ä¼˜:'ç¥'===e.è´¨?'è‡³é«˜':'åœ£'===e.è´¨?'æå¼º':'é“'===e.è´¨?'å¼º':'çµ'===e.è´¨?'ä¸­':'æ— '})),D=e.z.object({ä¸–ç•Œæ—¶é’Ÿ:e.z.object({çºªå…ƒ:e.z.string().prefault('æœ«æ³•æ—¶ä»£'),å¹´ä»½:e.z.coerce.number().prefault(1),æœˆä»½:e.z.coerce.number().transform(e=>_.clamp(e,1,12)).prefault(1),æ—¥æœŸ:e.z.coerce.number().transform(e=>_.clamp(e,1,30)).prefault(1),æ—¶è¾°:e.z.string().prefault('å­æ—¶')}).prefault({çºªå…ƒ:'æœ«æ³•æ—¶ä»£',å¹´ä»½:1,æœˆä»½:1,æ—¥æœŸ:1,æ—¶è¾°:'å­æ—¶'}),ä¸–ç•Œåœ°å›¾:e.z.record(e.z.string().describe('åŒºåŸŸå'),e.z.object({layer:e.z.enum(['å¤©å±‚','åœ°å±‚','ä¸‹å±‚']).prefault('åœ°å±‚'),danger:e.z.coerce.number().transform(e=>_.clamp(e,0,100)),desc:e.z.string().prefault(''),connections:e.z.array(e.z.string()).prefault([])})).prefault({}),ä¸–ç•Œå›¾å¿—:e.z.record(e.z.string().describe('äº‹ä»¶å'),e.z.object({çŠ¶æ€:e.z.string().prefault(''),äº‹ä»¶:e.z.string().prefault('')})).prefault({}),å®—é—¨åŠ¿åŠ›åº“:e.z.record(e.z.string().describe('å®—é—¨å'),p).prefault({å‰‘é˜:{åœ°:'ç¥å·å‰‘é—¨å…³',ç‰¹:'å‰‘é“æºå¤´',åŠ›:'æ¸¡åŠ«åæœŸ',è¥:'æ­£',æ¨¡:'è¶…å¤§'},ä¸‡æ³•å®—:{åœ°:'ç¥å·é—®é“å³°',ç‰¹:'ä¸‡æ³•æœ¬æº',åŠ›:'æ¸¡åŠ«åˆæœŸ',è¥:'æ­£',æ¨¡:'è¶…å¤§'},é‡‘åˆšå¯º:{åœ°:'è¥¿å¤©ä½›å±±',ç‰¹:'ä½›ä¿®ç‚¼ä½“',åŠ›:'å¤§ä¹˜ä¸­æœŸ',è¥:'æ­£',æ¨¡:'å¤§'},è¯ç‹è°·:{åœ°:'ç¥å†œæ¶',ç‰¹:'åŒ»ç‚¼ä¸¹è¯',åŠ›:'å¤§ä¹˜åˆæœŸ',è¥:'æ­£',æ¨¡:'å¤§'},å„’é—¨:{åœ°:'æ–‡åœ£å±±',ç‰¹:'æµ©ç„¶æ­£æ°”',åŠ›:'å¤§ä¹˜ä¸­æœŸ',è¥:'æ­£',æ¨¡:'å¤§'},é’é¾™æ®¿:{åœ°:'ä¸œè‹é’é¾™å±±',ç‰¹:'å®ˆæŠ¤é’å¸',åŠ›:'å¤§ä¹˜åˆæœŸ',è¥:'æ­£',æ¨¡:'å¤§'},ç„æ­¦å®—:{åœ°:'åŒ—å†¥ç„å†°å±±',ç‰¹:'é•‡å®ˆå½’å¢Ÿ',åŠ›:'å¤§ä¹˜åæœŸ',è¥:'æ­£',æ¨¡:'å¤§'},é’äº‘é—¨:{åœ°:'ç¥å·é’äº‘å±±',ç‰¹:'æ°´è„‰ä¸€ç³»',åŠ›:'å¤§ä¹˜åˆæœŸ',è¥:'æ­£',æ¨¡:'å¤§'},å»ºæœ¨å®—:{åœ°:'ä¸œè‹å»ºæœ¨æ ‘',ç‰¹:'æœ¨ç³»é“æ³•',åŠ›:'åˆä½“ä¸­æœŸ',è¥:'æ­£',æ¨¡:'å°'},ç™¾èŠ±è°·:{åœ°:'ç™¾èŠ±ç§˜å¢ƒ',ç‰¹:'å¥³ä¿®èŠ±é“',åŠ›:'åˆä½“åæœŸ',è¥:'æ­£',æ¨¡:'å°'},è¡€ç¥æ•™:{åœ°:'è¡€é­”æ¸Š',ç‰¹:'è¡€é“ç‚¼æ³•',åŠ›:'æ¸¡åŠ«ä¸­æœŸ',è¥:'é­”',æ¨¡:'è¶…å¤§'},å¤©é­”å®—:{åœ°:'å¤©é­”å±±',ç‰¹:'å¤©é­”å¤§é“',åŠ›:'å¤§ä¹˜ä¸­æœŸ',è¥:'é­”',æ¨¡:'å¤§'},å¦–ç›Ÿ:{åœ°:'ä¸‡å¦–æ£®æ—',ç‰¹:'å¦–æ—è”ç›Ÿ',åŠ›:'æ¸¡åŠ«ä¸­æœŸ',è¥:'ä¸­',æ¨¡:'è¶…å¤§'},å¤§å¤ç‹æœ:{åœ°:'ä¸­å·çš‡åŸ',ç‰¹:'ä¸–ä¿—ç»Ÿæ²»',åŠ›:'å¤§ä¹˜åˆæœŸ',è¥:'ä¸­',æ¨¡:'å¤§'},ä¹å·å•†ä¼š:{åœ°:'ä¹å¤§ä¸»åŸ',ç‰¹:'å•†ä¸šè”ç›Ÿ',åŠ›:'å¤§ä¹˜åˆæœŸ',è¥:'ä¸­',æ¨¡:'å¤§'},ç¦»ç«å®«:{åœ°:'å—ç‚ç«å±±',ç‰¹:'æœ±é›€ä¾›å¥‰',åŠ›:'åˆä½“åœ†æ»¡',è¥:'ä¸­',æ¨¡:'å°'},é“¸å‰‘å±±åº„:{åœ°:'å—ç‚åœ°ç«',ç‰¹:'ç‚¼å™¨ç¬¬ä¸€',åŠ›:'åˆä½“åæœŸ',è¥:'ä¸­',æ¨¡:'å°'}}),åŠŸæ³•åº“:e.z.record(e.z.string().describe('åŠŸæ³•å'),g).prefault({}),æ³•å®åº“:e.z.record(e.z.string().describe('æ³•å®å'),b).prefault({é•‡æ¸Šå‰‘:{é˜¶:'ä»™å™¨',ç±»:'å‰‘'},åŒé±¼ä½©:{é˜¶:'æœ¬å‘½',ç±»:'ç‰ä½©',æœ¬å‘½ç‰¹æ€§:'æºè¡€å¥‘çº¦ã€é˜´é˜³åŒç”Ÿã€å™¨çµåŒ–å½¢ã€ä¸ä¸»å…±ä¿®ã€ç”Ÿæ­»ç›¸ä¾ã€é”è¡€æŠ¤ä¸»',å™¨çµ:'è™æ±é¢œ'}}),åœ°ç‚¹åº“:e.z.record(e.z.string().describe('åœ°ç‚¹å'),E).prefault({å¤©æ¸Š:{åŸŸ:'å¤©å±‚',ç±»:'ç¦åœ°',å±:95,ç‰¹:'æ˜Ÿè¾°è£‚éš™',èµ„:['æ˜Ÿè¾°ç¢ç‰‡','é™¨é“']},ç½¡é£å¸¦:{åŸŸ:'å¤©å±‚',ç±»:'ç¦åœ°',å±:90,ç‰¹:'ç½¡é£å±éšœ',èµ„:['ç½¡é£ç²¾å']},é—®é“å³°:{åŸŸ:'ç¥å·',ç±»:'å®—é—¨',å±:10,ç‰¹:'ä¸‡æ³•å®—',èµ„:['åŠŸæ³•','çµè¯']},å‰‘é—¨å…³:{åŸŸ:'ç¥å·',ç±»:'å®—é—¨',å±:15,ç‰¹:'å‰‘é˜',èµ„:['å‰‘æ„','é£å‰‘']},è—ä¹¦é˜:{åŸŸ:'ç¥å·',ç±»:'å®—é—¨',å±:5,ç‰¹:'å¤ç±',èµ„:['åŠŸæ³•','ç§˜æœ¯']},é…†éƒ½åŸ:{åŸŸ:'ç¥å·',ç±»:'åŸé•‡',å±:30,ç‰¹:'é¬¼å¸‚',èµ„:['å¹½å†¥ææ–™']},é¾™é—¨ç€‘:{åŸŸ:'ç¥å·',ç±»:'ç§˜å¢ƒ',å±:40,ç‰¹:'åŒ–é¾™',èµ„:['é¾™æ°”']},å»ºæœ¨æ—:{åŸŸ:'ä¸œè‹',ç±»:'åœ°å½¢',å±:50,ç‰¹:'å¤æ ‘ç²¾',èµ„:['çµæœ¨','å¦–ä¸¹']},é’å¸é™µ:{åŸŸ:'ä¸œè‹',ç±»:'é—è¿¹',å±:85,ç‰¹:'é’å¸ä¼ æ‰¿',èµ„:['é’å¸ä¼ æ‰¿']},ç™¾èŠ±å¢ƒ:{åŸŸ:'ä¸œè‹',ç±»:'ç§˜å¢ƒ',å±:20,ç‰¹:'èŠ±æµ·',èµ„:['çµèŠ±']},ä¸ç­ç«å±±:{åŸŸ:'å—ç‚',ç±»:'åœ°å½¢',å±:80,ç‰¹:'æœ±é›€æ¶…æ§ƒ',èµ„:['æœ±é›€ç«']},æ¶…æ§ƒå°:{åŸŸ:'å—ç‚',ç±»:'é—è¿¹',å±:70,ç‰¹:'æ¶…æ§ƒ',èµ„:['æ¶…æ§ƒæ„Ÿæ‚Ÿ']},ä¸‡å‰‘å†¢:{åŸŸ:'è¥¿åºš',ç±»:'ç¦åœ°',å±:85,ç‰¹:'å‰‘æ„',èµ„:['å‰‘æ„','å¤å‰‘']},ç„å†°å±±:{åŸŸ:'åŒ—å†¥',ç±»:'å®—é—¨',å±:50,ç‰¹:'ç„æ­¦å®—',èµ„:['ç„å†°']},å½’å¢Ÿçœ¼:{åŸŸ:'åŒ—å†¥',ç±»:'ç¦åœ°',å±:99,ç‰¹:'å½’å¢Ÿ',èµ„:['å½’å¢Ÿæ„Ÿæ‚Ÿ']},é»„æ³‰è¿¹:{åŸŸ:'ä¸‹å±‚',ç±»:'é—è¿¹',å±:90,ç‰¹:'å¹½å†¥',èµ„:['é»„æ³‰æ°´']},ç‚æ¸Š:{åŸŸ:'ä¸‹å±‚',ç±»:'ç¦åœ°',å±:95,ç‰¹:'åœ°å¿ƒç«',èµ„:['åœ°å¿ƒç«']}}),çµæ ¹åº“:e.z.record(e.z.string().describe('çµæ ¹å'),d).prefault({}),ä½“è´¨åº“:e.z.record(e.z.string().describe('ä½“è´¨å'),h).prefault({}),æœ¬å°Š:e.z.object({ç­‰çº§:e.z.coerce.number().transform(e=>_.clamp(e,1,36)).prefault(1),ä¿®ä¸º:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),çµæ ¹:e.z.string().prefault('äº”è¡Œæ‚çµæ ¹'),ä½“è´¨:e.z.string().prefault('å‡¡ä½“'),åŠŸæ³•:e.z.string().prefault('æ— '),æœ¬å‘½å…µå™¨:e.z.string().prefault('æ— '),ç¥é€šåˆ—è¡¨:e.z.record(e.z.string().describe('ç¥é€šå'),e.z.object({åç§°:e.z.string().prefault(''),æè¿°:e.z.string().prefault(''),ç±»å‹:e.z.enum(['åŠŸæ³•','ç¥é€š','ç§˜æœ¯']).prefault('ç¥é€š'),å“é˜¶:e.z.string().transform(e=>({å‡¡:'å‡¡',å‡¡é˜¶:'å‡¡',å‡¡çº§:'å‡¡',å‡¡å“:'å‡¡',é»„:'é»„',é»„é˜¶:'é»„',é»„çº§:'é»„',é»„å“:'é»„',ç„:'ç„',ç„é˜¶:'ç„',ç„çº§:'ç„',ç„å“:'ç„',åœ°:'åœ°',åœ°é˜¶:'åœ°',åœ°çº§:'åœ°',åœ°å“:'åœ°',å¤©:'å¤©',å¤©é˜¶:'å¤©',å¤©çº§:'å¤©',å¤©å“:'å¤©',ä»™:'ä»™',ä»™é˜¶:'ä»™',ä»™çº§:'ä»™',ä»™å“:'ä»™',åœ£:'åœ£',åœ£é˜¶:'åœ£',åœ£çº§:'åœ£',åœ£å“:'åœ£',å…ˆå¤©:'å…ˆå¤©',å…ˆå¤©é˜¶:'å…ˆå¤©',å…ˆå¤©çº§:'å…ˆå¤©'}[e]||'å‡¡')).catch('å‡¡'),ç†Ÿç»ƒåº¦:e.z.string().transform(e=>({å…¥é—¨:'å…¥é—¨',åˆçº§:'å…¥é—¨',åˆå­¦:'å…¥é—¨',æ–°æ‰‹:'å…¥é—¨',ç†Ÿç»ƒ:'ç†Ÿç»ƒ',ä¸­çº§:'ç†Ÿç»ƒ',å¨´ç†Ÿ:'ç†Ÿç»ƒ',ç²¾é€š:'ç²¾é€š',é«˜çº§:'ç²¾é€š',ç²¾æ¹›:'ç²¾é€š',å¤§æˆ:'å¤§æˆ',å¤§å¸ˆ:'å¤§æˆ',å®—å¸ˆ:'å¤§æˆ',åœ†æ»¡:'åœ†æ»¡',å®Œç¾:'åœ†æ»¡',æè‡´:'åœ†æ»¡',åŒ–å¢ƒ:'åŒ–å¢ƒ',åŒ–ç¥:'åŒ–å¢ƒ',è¿”ç’å½’çœŸ:'åŒ–å¢ƒ',å‡ºç¥å…¥åŒ–:'åŒ–å¢ƒ'}[e]||'å…¥é—¨')).catch('å…¥é—¨'),é¢†æ‚Ÿæ—¶é—´:e.z.coerce.number().catch(()=>Date.now()),å¨åŠ›ç­‰çº§:e.z.coerce.number().optional()}).transform(e=>{if(!e.å¨åŠ›ç­‰çº§||0===e.å¨åŠ›ç­‰çº§){const r={å…¥é—¨:1,ç†Ÿç»ƒ:2,ç²¾é€š:3,å¤§æˆ:4,åœ†æ»¡:5,åŒ–å¢ƒ:6},t={å‡¡:1,é»„:2,ç„:3,åœ°:4,å¤©:5,ä»™:6,åœ£:7,å…ˆå¤©:8}[e.å“é˜¶]||1,n=r[e.ç†Ÿç»ƒåº¦]||1;return{...e,å¨åŠ›ç­‰çº§:10*t+n}}return e})).prefault({}),çµçŸ³:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),å·²æ´»å²æœˆ:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),å°è¯•çªç ´:e.z.boolean().prefault(!1),è¡Œè¸ª:e.z.object({å½“å‰åŒºåŸŸ:e.z.string().prefault('æœªçŸ¥ä¹‹åœ°'),æ‰€å±å±‚çº§:e.z.string().prefault('åœ°å±‚'),ç¯å¢ƒæè¿°:e.z.string().prefault(''),å±é™©åº¦:e.z.coerce.number().prefault(10),å¯ç”¨é€šé“:e.z.array(e.z.string()).prefault([]),å¯¼èˆªä¿¡æ¯:e.z.string().prefault('')}).prefault({å½“å‰åŒºåŸŸ:'æœªçŸ¥ä¹‹åœ°',æ‰€å±å±‚çº§:'åœ°å±‚',ç¯å¢ƒæè¿°:'',å±é™©åº¦:10,å¯ç”¨é€šé“:[],å¯¼èˆªä¿¡æ¯:''}),èº«ä»½:e.z.object({å§“å:e.z.string().prefault('æ— åæ°'),å®—é—¨:e.z.string().prefault('æ•£ä¿®'),å‡ºèº«:e.z.string().prefault('å‡¡äºº')}).prefault({å§“å:'æ— åæ°',å®—é—¨:'æ•£ä¿®',å‡ºèº«:'å‡¡äºº'}),èƒŒåŒ…:e.z.record(e.z.string().describe('ç‰©å“å'),m).prefault({}).transform(e=>_.pickBy(e,({æ•°é‡:e})=>e>0)),æ³•å®:e.z.record(e.z.string().describe('æ³•å®å'),m).prefault({}).transform(e=>_.pickBy(e,({æ•°é‡:e})=>e>0)),æ‚ç‰©è¢‹:e.z.record(e.z.string().describe('æ‚ç‰©å'),m).prefault({}).transform(e=>_.pickBy(e,({æ•°é‡:e})=>e>0)),æˆ˜æ–—çŠ¶æ€:e.z.object({æ­£åœ¨æˆ˜æ–—:e.z.boolean().prefault(!1),å½“å‰çŠ¶æ€:e.z.string().transform(e=>({éæˆ˜æ–—:'éæˆ˜æ–—',å’Œå¹³:'éæˆ˜æ–—',å®‰å…¨:'éæˆ˜æ–—',è„±æˆ˜:'éæˆ˜æ–—',å¯¹å³™:'å¯¹å³™',è­¦æˆ’:'å¯¹å³™',åƒµæŒ:'å¯¹å³™',å¯¹è§†:'å¯¹å³™',æ¿€æˆ˜:'æ¿€æˆ˜',æˆ˜æ–—:'æ¿€æˆ˜',äº¤æˆ˜:'æ¿€æˆ˜',å®æ€:'æ¿€æˆ˜',é‡ä¼¤:'é‡ä¼¤',è´Ÿä¼¤:'é‡ä¼¤',ä¼¤é‡:'é‡ä¼¤',æ¿’æ­»:'æ¿’æ­»',å°†æ­»:'æ¿’æ­»',å‚å±:'æ¿’æ­»',å±æ€¥:'æ¿’æ­»'}[e]||'éæˆ˜æ–—')).prefault('éæˆ˜æ–—'),çµåŠ›å€¼:e.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(100),ä¼¤åŠ¿ç­‰çº§:e.z.string().transform(e=>({æ— ä¼¤:'æ— ä¼¤',æ— :'æ— ä¼¤',å®Œå¥½:'æ— ä¼¤',å¥åº·:'æ— ä¼¤',è½»ä¼¤:'è½»ä¼¤',å°ä¼¤:'è½»ä¼¤',å¾®ä¼¤:'è½»ä¼¤',é‡ä¼¤:'é‡ä¼¤',ä¼¤é‡:'é‡ä¼¤',å¤§ä¼¤:'é‡ä¼¤',æ¿’æ­»:'æ¿’æ­»',å°†æ­»:'æ¿’æ­»',å‚å±:'æ¿’æ­»'}[e]||'æ— ä¼¤')).prefault('æ— ä¼¤'),å·²ç”¨åº•ç‰Œ:e.z.array(e.z.string()).prefault([]),æˆ˜æ–—å›åˆ:e.z.coerce.number().prefault(0)}).prefault({æ­£åœ¨æˆ˜æ–—:!1,å½“å‰çŠ¶æ€:'éæˆ˜æ–—',çµåŠ›å€¼:100,ä¼¤åŠ¿ç­‰çº§:'æ— ä¼¤',å·²ç”¨åº•ç‰Œ:[],æˆ˜æ–—å›åˆ:0}),å½“å‰æ•Œäºº:e.z.array(e.z.object({åç§°:e.z.string().prefault('æœªçŸ¥æ•Œäºº'),å¢ƒç•Œ:e.z.string().prefault('æœªçŸ¥'),æˆ˜åŠ›è¯„ä¼°:e.z.string().transform(e=>({ç¢¾å‹:'ç¢¾å‹',å‹å€’:'ç¢¾å‹',ç§’æ€:'ç¢¾å‹',åŠæ‰“:'ç¢¾å‹',ä¼˜åŠ¿:'ä¼˜åŠ¿',å ä¼˜:'ä¼˜åŠ¿',ä¸Šé£:'ä¼˜åŠ¿',æœ‰åˆ©:'ä¼˜åŠ¿',åŠ¿å‡åŠ›æ•Œ:'åŠ¿å‡åŠ›æ•Œ',å‡åŠ¿:'åŠ¿å‡åŠ›æ•Œ',å¹³æ‰‹:'åŠ¿å‡åŠ›æ•Œ',ç›¸å½“:'åŠ¿å‡åŠ›æ•Œ',æ——é¼“ç›¸å½“:'åŠ¿å‡åŠ›æ•Œ',åŠ£åŠ¿:'åŠ£åŠ¿',ä¸‹é£:'åŠ£åŠ¿',ä¸åˆ©:'åŠ£åŠ¿',è½å:'åŠ£åŠ¿',ç»æœ›:'ç»æœ›',å¿…æ­»:'ç»æœ›',ç¢¾å‹åŠ£åŠ¿:'ç»æœ›',æ— æœ›:'ç»æœ›'}[e]||'åŠ¿å‡åŠ›æ•Œ')).prefault('åŠ¿å‡åŠ›æ•Œ'),çŠ¶æ€:e.z.string().transform(e=>({å®Œå¥½:'å®Œå¥½',æ— ä¼¤:'å®Œå¥½',å¥åº·:'å®Œå¥½',å…¨ç››:'å®Œå¥½',è½»ä¼¤:'è½»ä¼¤',å°ä¼¤:'è½»ä¼¤',å¾®ä¼¤:'è½»ä¼¤',é‡ä¼¤:'é‡ä¼¤',ä¼¤é‡:'é‡ä¼¤',å¤§ä¼¤:'é‡ä¼¤',æ¿’æ­»:'æ¿’æ­»',å°†æ­»:'æ¿’æ­»',å‚å±:'æ¿’æ­»',å·²æ­»:'å·²æ­»',æ­»äº¡:'å·²æ­»',å‡»æ€:'å·²æ­»',é˜µäº¡:'å·²æ­»'}[e]||'å®Œå¥½')).prefault('å®Œå¥½'),ç‰¹ç‚¹:e.z.string().prefault('')})).prefault([]),æ¸¡åŠ«çŠ¶æ€:e.z.object({æ­£åœ¨æ¸¡åŠ«:e.z.boolean().prefault(!1),åŠ«ç§:e.z.string().transform(e=>({æ— :'æ— ','':'æ— ',æ— åŠ«:'æ— ',é›·åŠ«:'é›·åŠ«',å¤©é›·:'é›·åŠ«',é›·:'é›·åŠ«',å¿ƒåŠ«:'å¿ƒåŠ«',å¿ƒé­”:'å¿ƒåŠ«',é­”åŠ«:'å¿ƒåŠ«',å¤©åŠ«:'å¤©åŠ«',å¤§åŠ«:'å¤©åŠ«',æƒ…åŠ«:'æƒ…åŠ«',æƒ…å…³:'æƒ…åŠ«',å› æœåŠ«:'å› æœåŠ«',å› æœ:'å› æœåŠ«',çº¢å°˜åŠ«:'çº¢å°˜åŠ«',çº¢å°˜:'çº¢å°˜åŠ«',è½®å›åŠ«:'è½®å›åŠ«',è½®å›:'è½®å›åŠ«'}[e]||'æ— ')).prefault('æ— '),åŠ«éš¾ç­‰çº§:e.z.string().transform(e=>({å°åŠ«:'å°åŠ«',å°:'å°åŠ«',åˆçº§:'å°åŠ«',ä¸­åŠ«:'ä¸­åŠ«',ä¸­:'ä¸­åŠ«',ä¸­çº§:'ä¸­åŠ«',å¤§åŠ«:'å¤§åŠ«',å¤§:'å¤§åŠ«',é«˜çº§:'å¤§åŠ«',å¤©ç½š:'å¤©ç½š',å¤©:'å¤©ç½š',æ:'å¤©ç½š',å¤©é“:'å¤©ç½š'}[e]||'å°åŠ«')).prefault('å°åŠ«'),å½“å‰é˜¶æ®µ:e.z.coerce.number().transform(e=>_.clamp(e,0,9)).prefault(0),æ€»é˜¶æ®µæ•°:e.z.coerce.number().transform(e=>Math.max(1,e)).prefault(3),åŠ«åŠ›æ‰¿å—:e.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(100),å·²ç”¨æŠ¤é“:e.z.array(e.z.string()).prefault([]),åŠ«éš¾æè¿°:e.z.string().prefault(''),è§¦å‘åŸå› :e.z.string().prefault(''),ä¸Šæ¬¡æ¸¡åŠ«ç»“æœ:e.z.string().transform(e=>({æ— :'æ— ','':'æ— ',æœªæ¸¡åŠ«:'æ— ',æˆåŠŸ:'æˆåŠŸ',é€šè¿‡:'æˆåŠŸ',æ¸¡è¿‡:'æˆåŠŸ',å¤±è´¥:'å¤±è´¥',æœªè¿‡:'å¤±è´¥',å¤±:'å¤±è´¥'}[e]||'æ— ')).prefault('æ— '),æ¸¡åŠ«å†·å´:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),å¤±è´¥æƒ©ç½šè®°å½•:e.z.string().prefault('')}).prefault({æ­£åœ¨æ¸¡åŠ«:!1,åŠ«ç§:'æ— ',åŠ«éš¾ç­‰çº§:'å°åŠ«',å½“å‰é˜¶æ®µ:0,æ€»é˜¶æ®µæ•°:3,åŠ«åŠ›æ‰¿å—:100,å·²ç”¨æŠ¤é“:[],åŠ«éš¾æè¿°:'',è§¦å‘åŸå› :'',ä¸Šæ¬¡æ¸¡åŠ«ç»“æœ:'æ— ',æ¸¡åŠ«å†·å´:0,å¤±è´¥æƒ©ç½šè®°å½•:''})}).prefault({ç­‰çº§:1,ä¿®ä¸º:0,çµæ ¹:'äº”è¡Œæ‚çµæ ¹',ä½“è´¨:'å‡¡ä½“',åŠŸæ³•:'æ— ',æœ¬å‘½å…µå™¨:'æ— ',ç¥é€šåˆ—è¡¨:{},çµçŸ³:0,å·²æ´»å²æœˆ:0,å°è¯•çªç ´:!1,è¡Œè¸ª:{å½“å‰åŒºåŸŸ:'æœªçŸ¥ä¹‹åœ°',æ‰€å±å±‚çº§:'åœ°å±‚',ç¯å¢ƒæè¿°:'',å±é™©åº¦:10,å¯ç”¨é€šé“:[],å¯¼èˆªä¿¡æ¯:''},èº«ä»½:{å§“å:'æ— åæ°',å®—é—¨:'æ•£ä¿®',å‡ºèº«:'å‡¡äºº'},èƒŒåŒ…:{},æ³•å®:{},æ‚ç‰©è¢‹:{},æˆ˜æ–—çŠ¶æ€:{æ­£åœ¨æˆ˜æ–—:!1,å½“å‰çŠ¶æ€:'éæˆ˜æ–—',çµåŠ›å€¼:100,ä¼¤åŠ¿ç­‰çº§:'æ— ä¼¤',å·²ç”¨åº•ç‰Œ:[],æˆ˜æ–—å›åˆ:0},å½“å‰æ•Œäºº:[],æ¸¡åŠ«çŠ¶æ€:{æ­£åœ¨æ¸¡åŠ«:!1,åŠ«ç§:'æ— ',åŠ«éš¾ç­‰çº§:'å°åŠ«',å½“å‰é˜¶æ®µ:0,æ€»é˜¶æ®µæ•°:3,åŠ«åŠ›æ‰¿å—:100,å·²ç”¨æŠ¤é“:[],åŠ«éš¾æè¿°:'',è§¦å‘åŸå› :'',ä¸Šæ¬¡æ¸¡åŠ«ç»“æœ:'æ— ',æ¸¡åŠ«å†·å´:0,å¤±è´¥æƒ©ç½šè®°å½•:''}}).transform(e=>{const r=e.ç­‰çº§,t=i[r-1]??100,n=f[r-1]??100,a=Math.floor((r-1)/4),o=`${l[a]??'ç»ƒæ°”'}${u[(r-1)%4]??'åˆæœŸ'}`,s=`${e.å·²æ´»å²æœˆ}/${n}`,c=e.å°è¯•çªç ´?'çªç ´ä¸­':e.ä¿®ä¸º>=t?'ç“¶é¢ˆæœŸ':'ä¿®ç‚¼ä¸­',m=`${(e.ä¿®ä¸º/t*100).toFixed(1)}%`,p=function(e){const r=Math.floor((e-1)/4),t=(e-1)%4,n=Math.pow(10,r+1),a=.2*n*t;return Math.round(n+a)}(r),g=Object.values(e.ç¥é€šåˆ—è¡¨||{}),b=p+(g.length>0?Math.max(...g.map(e=>e.å¨åŠ›ç­‰çº§||0)):0)+(()=>{const r=e.ä½“è´¨||'';return r.includes('ç¥')?500:r.includes('åœ£')?200:r.includes('é“')?100:r.includes('çµ')?50:0})();return{...e,çªç ´é˜ˆå€¼:t,å¯¿å…ƒä¸Šé™:n,å¢ƒç•Œæè¿°:o,å¯¿å…ƒçŠ¶æ€:s,çŠ¶æ€:c,è¿›åº¦:m,æˆ˜åŠ›å€¼:b}}),çº¢é¢œè§’è‰²åº“:e.z.record(e.z.string().describe('è§’è‰²å'),e.z.object({çº§:e.z.coerce.number().transform(e=>_.clamp(e,1,36)),æ ¹:e.z.string().describe('çµæ ¹'),è´¨:e.z.string().describe('ä½“è´¨'),é¾„:e.z.string().describe('å¹´é¾„'),å±:e.z.string().describe('æ‰€å±'),æ³•:e.z.string().describe('åŠŸæ³•'),å™¨:e.z.string().describe('æœ¬å‘½å…µå™¨'),é€š:e.z.array(e.z.string()).prefault([])})).prefault({è®¸å¬é›¨:{çº§:33,æ ¹:'æ°´æœ¬æºå¤©',è´¨:'å½’å¢Ÿç¥ä½“',é¾„:'å¤–26å®12000',å±:'å½’å¢Ÿä¹‹ä¸»',æ³•:'ä¸‡æ°´å½’æºå…ˆå¤©',å™¨:'æ²§æµ·é—ç å…ˆå¤©',é€š:['å½’å¢Ÿæ­Œ','é€†æµè™šå¦„','å¯‚ç­æµ·åŸŸ','ä¸‡æ°´åŒæº']},è™æ±é¢œ:{çº§:12,æ ¹:'æ°´é˜´é˜³å¼‚',è´¨:'åŒé±¼ä½“',é¾„:'åŒ–å½¢0å¹´',å±:'{{user}}ç‰ä½©',æ³•:'åŒç”Ÿå¤©æ/é˜´é˜³',å™¨:'åŒé±¼ä½©æœ¬ä½“',é€š:['æ¯æœ¨æ˜¥','å¤ºå‘½å¦†','åŒé±¼æ¢¦']},ç™½æ¸…å¼¦:{çº§:29,æ ¹:'é‡‘å¤©æ ¹',è´¨:'å‰‘ä½“',é¾„:'å¤–30å®1000+',å±:'æ•£ä¿®å‰‘å®—å¸ˆ',æ³•:'å‰‘æ„ä»™/å¤©éŸ³å¤©',å™¨:'æ¸…å¼¦ç´å‰‘çµå®',é€š:['ç´å‰‘æ€','å‰‘æ„æ­Œ','ä¸‡å‰‘å¿ƒ']},å—å®«äº‘è£³:{çº§:16,æ ¹:'ç«å¤©æ ¹',è´¨:'ç¥å‡°é“ä½“',é¾„:'å¤–10å®118',å±:'å¤§å¤æ –å‡¤å®«ä¸»',æ³•:'ä¹è½¬æ¶…æ§ƒä»™',å™¨:'æ –æ¢§ç°ªçµå®',é€š:['å—æ˜ç¦»ç«','å‡°å¨é•‡ä¸–','ç¾½åŒ–è™šç©º']},æ¢¦æ³æ³ :{çº§:23,æ ¹:'ç‘å…½å¼‚æ ¹',è´¨:'ä¹˜é»„åœ£ä½“',é¾„:'å¤–8å®ä¸‡å¹´+',å±:'æ— (æœ«ä»£ä¹˜é»„)',æ³•:'ä¹˜é»„æœ¬æºå¤©',å™¨:'æ— ',é€š:['ç‘å…‰åº‡ä½‘','çµè§‰é€šæ˜','æœ¬æºçˆ†å‘']},å¹»åƒä¸:{çº§:13,æ ¹:'æš—å¹»åŒæ ¹',è´¨:'æ¢¦é­‡ä½“',é¾„:'å¤–20æœªçŸ¥',å±:'æ•£ä¿®å¹½å†¥',æ³•:'ç»‡æ¢¦å¤©',å™¨:'åƒä¸ç½‘çµå®',é€š:['ç»‡æ¢¦ç¬¼','å¿ƒé­”å¢ƒ','åƒä¸ç¼š']},æ™šæ£ :{çº§:15,æ ¹:'å¹½å†¥çµæ ¹',è´¨:'å™¬é­‚ä¹‹ä½“',é¾„:'æœªçŸ¥',å±:'æ•£ä¿®',æ³•:'å¹½å†¥å½’é­‚ç»å¤©',å™¨:'å¼•é­‚é“ƒçµå®',é€š:['å†¥æ²³æŒ‡å¼•','å†¥è²æ²‰æ¢¦','å½’é­‚æ‘†èˆŸ']}}),çº¢é¢œ:e.z.record(e.z.string().describe('çº¢é¢œå'),e.z.object({ç­‰çº§:e.z.coerce.number().transform(e=>_.clamp(e,1,36)).prefault(1),ä¿®ä¸º:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),çµæ ¹:e.z.string().prefault('äº”è¡Œæ‚çµæ ¹'),ä½“è´¨:e.z.string().prefault('å‡¡ä½“'),åŠŸæ³•:e.z.string().prefault('æ— '),æœ¬å‘½å…µå™¨:e.z.string().prefault('æ— '),ç¥é€šåˆ—è¡¨:e.z.record(e.z.string().describe('ç¥é€šå'),e.z.object({åç§°:e.z.string().prefault(''),æè¿°:e.z.string().prefault(''),ç±»å‹:e.z.enum(['åŠŸæ³•','ç¥é€š','ç§˜æœ¯']).prefault('ç¥é€š'),å“é˜¶:e.z.string().transform(e=>({å‡¡:'å‡¡',å‡¡é˜¶:'å‡¡',å‡¡çº§:'å‡¡',å‡¡å“:'å‡¡',é»„:'é»„',é»„é˜¶:'é»„',é»„çº§:'é»„',é»„å“:'é»„',ç„:'ç„',ç„é˜¶:'ç„',ç„çº§:'ç„',ç„å“:'ç„',åœ°:'åœ°',åœ°é˜¶:'åœ°',åœ°çº§:'åœ°',åœ°å“:'åœ°',å¤©:'å¤©',å¤©é˜¶:'å¤©',å¤©çº§:'å¤©',å¤©å“:'å¤©',ä»™:'ä»™',ä»™é˜¶:'ä»™',ä»™çº§:'ä»™',ä»™å“:'ä»™',åœ£:'åœ£',åœ£é˜¶:'åœ£',åœ£çº§:'åœ£',åœ£å“:'åœ£',å…ˆå¤©:'å…ˆå¤©',å…ˆå¤©é˜¶:'å…ˆå¤©',å…ˆå¤©çº§:'å…ˆå¤©'}[e]||'å‡¡')).catch('å‡¡'),ç†Ÿç»ƒåº¦:e.z.string().transform(e=>({å…¥é—¨:'å…¥é—¨',åˆçº§:'å…¥é—¨',åˆå­¦:'å…¥é—¨',æ–°æ‰‹:'å…¥é—¨',ç†Ÿç»ƒ:'ç†Ÿç»ƒ',ä¸­çº§:'ç†Ÿç»ƒ',å¨´ç†Ÿ:'ç†Ÿç»ƒ',ç²¾é€š:'ç²¾é€š',é«˜çº§:'ç²¾é€š',ç²¾æ¹›:'ç²¾é€š',å¤§æˆ:'å¤§æˆ',å¤§å¸ˆ:'å¤§æˆ',å®—å¸ˆ:'å¤§æˆ',åœ†æ»¡:'åœ†æ»¡',å®Œç¾:'åœ†æ»¡',æè‡´:'åœ†æ»¡',åŒ–å¢ƒ:'åŒ–å¢ƒ',åŒ–ç¥:'åŒ–å¢ƒ',è¿”ç’å½’çœŸ:'åŒ–å¢ƒ',å‡ºç¥å…¥åŒ–:'åŒ–å¢ƒ'}[e]||'å…¥é—¨')).catch('å…¥é—¨'),é¢†æ‚Ÿæ—¶é—´:e.z.coerce.number().catch(()=>Date.now()),å¨åŠ›ç­‰çº§:e.z.coerce.number().optional()}).transform(e=>{if(!e.å¨åŠ›ç­‰çº§||0===e.å¨åŠ›ç­‰çº§){const r={å…¥é—¨:1,ç†Ÿç»ƒ:2,ç²¾é€š:3,å¤§æˆ:4,åœ†æ»¡:5,åŒ–å¢ƒ:6},t={å‡¡:1,é»„:2,ç„:3,åœ°:4,å¤©:5,ä»™:6,åœ£:7,å…ˆå¤©:8}[e.å“é˜¶]||1,n=r[e.ç†Ÿç»ƒåº¦]||1;return{...e,å¨åŠ›ç­‰çº§:10*t+n}}return e})).prefault({}),çµçŸ³:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),å·²æ´»å²æœˆ:e.z.coerce.number().transform(e=>Math.max(0,e)).prefault(0),å°è¯•çªç ´:e.z.boolean().prefault(!1),å¥½æ„Ÿåº¦:e.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),å…³ç³»:e.z.string().prefault('é™Œç”Ÿäºº'),é‡è¦æ€§:e.z.string().prefault('è·¯äºº')}).prefault({ç­‰çº§:1,ä¿®ä¸º:0,çµæ ¹:'äº”è¡Œæ‚çµæ ¹',ä½“è´¨:'å‡¡ä½“',åŠŸæ³•:'æ— ',æœ¬å‘½å…µå™¨:'æ— ',ç¥é€šåˆ—è¡¨:{},çµçŸ³:0,å·²æ´»å²æœˆ:0,å°è¯•çªç ´:!1,å¥½æ„Ÿåº¦:0,å…³ç³»:'é™Œç”Ÿäºº',é‡è¦æ€§:'è·¯äºº'}).transform(e=>{const r=e.ç­‰çº§,t=i[r-1]??100,n=f[r-1]??100,a=Math.floor((r-1)/4),o=`${l[a]??'ç»ƒæ°”'}${u[(r-1)%4]??'åˆæœŸ'}`,s=`${e.å·²æ´»å²æœˆ}/${n}`,c=e.å°è¯•çªç ´?'çªç ´ä¸­':e.ä¿®ä¸º>=t?'ç“¶é¢ˆæœŸ':'ä¿®ç‚¼ä¸­',m=`${(e.ä¿®ä¸º/t*100).toFixed(1)}%`;return{...e,çªç ´é˜ˆå€¼:t,å¯¿å…ƒä¸Šé™:n,å¢ƒç•Œæè¿°:o,å¯¿å…ƒçŠ¶æ€:s,çŠ¶æ€:c,è¿›åº¦:m}})).prefault({}),NPCå›¾é‰´:e.z.record(e.z.string().describe('NPCå'),e.z.object({ç­‰çº§:e.z.coerce.number().transform(e=>_.clamp(e,1,36)).prefault(1),æ‰€åœ¨å®—é—¨:e.z.string().prefault('æ•£ä¿®'),å¤‡æ³¨:e.z.string().prefault('')})).prefault({}),ä»»åŠ¡åˆ—è¡¨:e.z.record(e.z.string().describe('ä»»åŠ¡ID'),e.z.object({åç§°:e.z.string().prefault(''),ç±»å‹:e.z.enum(['ä¸»çº¿','æ”¯çº¿','æ¯æ—¥','ä¸´å±å—å‘½','ç§˜å¢ƒæ¢ç´¢']).prefault('ä¸»çº¿'),ç›®æ ‡:e.z.string().prefault(''),çŠ¶æ€:e.z.enum(['è¿›è¡Œä¸­','å·²å®Œæˆ','å·²å¤±è´¥']).prefault('è¿›è¡Œä¸­'),ç§˜å¢ƒä¿¡æ¯:e.z.object({åŸŸ:e.z.enum(['å¤©å±‚','ç¥å·','ä¸œè‹','å—ç‚','è¥¿åºš','åŒ—å†¥','ä¸‹å±‚','å››æµ·']).optional(),å±:e.z.coerce.number().transform(e=>_.clamp(e,0,100)).optional(),ç‰¹:e.z.string().optional(),å¥–:e.z.union([e.z.array(e.z.string()),e.z.string().transform(e=>e?[e]:[])]).prefault([]),é™:e.z.string().optional()}).optional(),åˆ›å»ºæ—¶é—´:e.z.union([e.z.coerce.number(),e.z.string().transform(()=>Date.now())]).prefault(()=>Date.now())})).prefault({}),å£°æœ›ç³»ç»Ÿ:e.z.record(e.z.string().describe('åŠ¿åŠ›å'),e.z.object({å€¼:e.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),å…³ç³»:e.z.string().prefault('é™Œç”Ÿ'),æ›´æ–°æ—¶é—´:e.z.coerce.number().prefault(()=>Date.now())})).prefault({}).transform(e=>_(e).mapValues(e=>{const r=e.å€¼;let t;t=r>=80?'ç›Ÿå‹':r>=60?'å‹å–„':r>=30?'å‹å¥½':r>=10?'ä¸­ç«‹åå¥½':r>=-10?'ä¸­ç«‹':r>=-30?'ä¸­ç«‹åæ¶':r>=-60?'æ•Œå¯¹':r>=-80?'ä»‡æ¨':'ä¸æ­»ä¸ä¼‘';const n=e.å…³ç³»&&'é™Œç”Ÿ'!==e.å…³ç³»?e.å…³ç³»:t;return{...e,å…³ç³»:n}}).value()),æˆå°±ç³»ç»Ÿ:c,å¯å‚ä¸æœºé‡:e.z.array(e.z.object({åç§°:e.z.string().prefault(''),æ¥æº:e.z.string().prefault(''),ç±»å‹:e.z.enum(['æ¢ç´¢','ä»»åŠ¡','äº¤æ˜“','ç»“äº¤','äº‰å¤º','ä¿®ç‚¼','çº¢é¢œ','éšæœº']).prefault('æ¢ç´¢'),æè¿°:e.z.string().prefault(''),å›æŠ¥é¢„æœŸ:e.z.string().prefault(''),é£é™©è¯„ä¼°:e.z.string().prefault(''),æ—¶é™:e.z.string().optional(),å…³è”äº‹ä»¶:e.z.string().optional(),ä¼˜å…ˆçº§:e.z.coerce.number().transform(e=>_.clamp(e,1,5)).prefault(3)})).prefault([]),å½“å‰å¤„å¢ƒ:e.z.string().prefault('')});const M={WORLDBOOK_NAME:'current',DEBUG:!0,CONTEXT_WINDOW:2,STRATEGY:'balanced',MVU_INIT_TIMEOUT:3e3,DEBOUNCE_DELAY:500,CHARACTER_ALIASES:{è™æ±é¢œ:['è™æ±','è™é¢œ']},KEEP_ENABLED_AFTER_REPLY:[/^\[ç³»ç»Ÿ\]/,/^\[mvu_update\]/,/^\[mvu\]å˜é‡åˆ—è¡¨$/,/^\[çº¢é¢œç´¢å¼•\]$/,/^\[åœ°å›¾\]/,/^\[å¢ƒç•Œ\]/]},y={ç¥å·:['ç¥å·'],ä¸œè‹:['ä¸œè‹'],è¥¿åºš:['è¥¿åºš'],å—ç‚:['å—ç‚'],åŒ—å†¥:['åŒ—å†¥'],å››æµ·:['å››æµ·'],æ½®éŸ³æµ·:['å››æµ·'],é¾™çœ æµ·:['å››æµ·'],è“¬è±å¹»æµ·:['å››æµ·'],å½’å¢Ÿä¹‹æµ·:['å››æµ·','å½’å¢Ÿ'],å¤©æ¸Š:['å¤©æ¸Š'],ä¹å¤©ç½¡é£å¸¦:['å¤©æ¸Š'],å½’å¢Ÿ:['å½’å¢Ÿ'],é»„æ³‰å¤è¿¹:['é»„æ³‰å¤è¿¹'],æ— å°½ç‚æ¸Š:['æ— å°½ç‚æ¸Š'],é›·æš´æµ·:['é›·æš´æµ·'],é—®é“å³°:['ç¥å·'],è—ä¹¦é˜:['ç¥å·'],é…†éƒ½åŸ:['ç¥å·'],ä¹æ›²å¤©æ²³:['ç¥å·'],é¾™é—¨ç€‘å¸ƒ:['ç¥å·'],å‰‘é—¨å…³:['ç¥å·'],å»ºæœ¨æ£®æ—:['ä¸œè‹'],é’å¸é™µ:['ä¸œè‹'],ç™¾èŠ±ç§˜å¢ƒ:['ä¸œè‹'],ä¸‡å‰‘å†¢:['è¥¿åºš'],åºšé‡‘çŸ¿è„‰:['è¥¿åºš'],ç™½è™å³¡è°·:['è¥¿åºš'],ä¸ç­ç«å±±:['å—ç‚'],åœ°ç«çªŸ:['å—ç‚'],æ¶…æ§ƒå°:['å—ç‚'],ç„å†°å±±:['åŒ—å†¥'],å½’å¢Ÿæµ·çœ¼:['åŒ—å†¥','å½’å¢Ÿ'],å†¥æµ·:['åŒ—å†¥']},A={å¤©å±‚:'å¤©æ¸Š',åœ°å±‚:'ç¥å·',ä¸‹å±‚:'å½’å¢Ÿ'},U={å¤©å±‚:['å¤©æ¸Š'],ç¥å·:['ç¥å·'],ä¸œè‹:['ä¸œè‹'],å—ç‚:['å—ç‚'],è¥¿åºš:['è¥¿åºš'],åŒ—å†¥:['åŒ—å†¥'],å››æµ·:['å››æµ·']};let G=null;const B={ç„æ­¦:['åŒ—å†¥'],é²›äºº:['åŒ—å†¥'],å†¥èˆ¹:['åŒ—å†¥'],æœ±é›€:['å—ç‚'],ç¦»ç«å®«:['å—ç‚'],ç‚é­”:['å—ç‚'],é“¸å‰‘å±±åº„:['å—ç‚'],é’é¾™:['ä¸œè‹'],å»ºæœ¨:['ä¸œè‹'],æ‚¬ç©ºåŸ:['ä¸œè‹'],ç™½è™:['è¥¿åºš'],å…µå®¶:['è¥¿åºš'],æ…•å®¹ä¸–å®¶:['è¥¿åºš'],å½’å¢Ÿ:['å½’å¢Ÿ'],é»„æ³‰:['é»„æ³‰å¤è¿¹'],ç‚æ¸Š:['æ— å°½ç‚æ¸Š'],ç¥è:['æ— å°½ç‚æ¸Š'],é›·æš´:['é›·æš´æµ·'],å¤©æ¸Š:['å¤©æ¸Š'],æ˜Ÿè¾°ç¢ç‰‡:['å¤©æ¸Š'],é¾™å‡¤æˆ˜åœº:['å¤©æ¸Š']},w=[{entryPattern:/^\[ç³»ç»Ÿ\]/,shouldEnable:()=>!0,priority:100},{entryPattern:/^\[mvu_update\]/,shouldEnable:()=>!0,priority:100},{entryPattern:/^\[mvu\]å˜é‡åˆ—è¡¨$/,shouldEnable:()=>!0,priority:100},{entryPattern:'[åœ°å›¾] ä¸–ç•Œç©ºé—´ç»“æ„',shouldEnable:()=>!0,priority:100},{entryPattern:/^\[åœ°å›¾\]\s*(.+)$/,shouldEnable:(e,r)=>{if(!r)return!1;const t=r.match(/^\[åœ°å›¾\]\s*(.+)$/);if(!t)return!1;const n=t[1].trim();if('ä¸–ç•Œç©ºé—´ç»“æ„'===n)return!0;const a=new Set;if(e.currentLayer&&y[e.currentLayer]&&(y[e.currentLayer].forEach(e=>a.add(e)),M.DEBUG&&e.currentLayer!==e.currentRegion&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] æ‰€å±å±‚çº§åŒ¹é…: ${e.currentLayer} â†’ [${y[e.currentLayer].join(',')}]`)),e.currentRegion&&y[e.currentRegion]&&y[e.currentRegion].forEach(e=>a.add(e)),0===a.size&&e.currentRegion&&e.mvuData?.åœ°ç‚¹åº“){const r=e.mvuData.åœ°ç‚¹åº“[e.currentRegion];if(r?.åŸŸ){const t=U[r.åŸŸ];t&&(t.forEach(e=>a.add(e)),M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] åœ°ç‚¹åº“åŸŸåŒ¹é…: ${e.currentRegion} â†’ åŸŸ=${r.åŸŸ}`))}}if(0===a.size&&e.currentRegion)for(const[r,t]of Object.entries(y))if(e.currentRegion.startsWith(r)||r.startsWith(e.currentRegion)){t.forEach(e=>a.add(e)),M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] å‰ç¼€åŒ¹é…: ${e.currentRegion} â†” ${r}`);break}if(a.size>0&&(G=new Set(a)),0===a.size&&G&&G.size>0&&(G.forEach(e=>a.add(e)),M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] æƒ¯æ€§æ¨æ–­: æ²¿ç”¨ä¸Šæ¬¡åŒ¹é… [${[...G].join(',')}]`)),0===a.size&&e.mvuData?.æœ¬å°Š?.è¡Œè¸ª?.æ‰€å±å±‚çº§){const r=e.mvuData.æœ¬å°Š.è¡Œè¸ª.æ‰€å±å±‚çº§;A[r]&&a.add(A[r])}if(0===a.size)for(const[r,t]of Object.entries(B))e.recentMessages.some(e=>e.includes(r))&&t.forEach(e=>a.add(e));0===a.size&&a.add('ç¥å·');const o=a.has(n);return M.DEBUG&&o&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] åœ°å›¾åŒ¹é…æˆåŠŸ: ${n} (å½“å‰åŒºåŸŸ=${e.currentRegion}, å¯ç”¨é›†=[${[...a].join(',')}])`),o},priority:10},{entryPattern:/^\[è§’è‰²\]\s*(.+?)\s*-\s*(é™Œç”ŸæœŸ|å¥½æ„ŸæœŸ|å¿ƒåŠ¨æœŸ|ç¡®è®¤æœŸ|æ·±çˆ±æœŸ)$/,shouldEnable:(e,r)=>{if(!r)return!1;const t=r.match(/^\[è§’è‰²\]\s*(.+?)\s*-\s*(é™Œç”ŸæœŸ|å¥½æ„ŸæœŸ|å¿ƒåŠ¨æœŸ|ç¡®è®¤æœŸ|æ·±çˆ±æœŸ)$/);if(!t)return!1;const n=t[1].trim(),a=t[2],o=e.mvuData?.çº¢é¢œ?.[n];if(!o)return M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] è§’è‰²ä¸åœ¨çº¢é¢œåˆ—è¡¨ä¸­: ${n}`),!1;if(e.recentMessages.length>0){const r=[n];M.CHARACTER_ALIASES[n]&&r.push(...M.CHARACTER_ALIASES[n]);let t=!1;for(const a of r){const r=a.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'),o=new RegExp(`(?:^|[^\\p{Script=Han}\\w])(${r})(?:[^\\p{Script=Han}\\w]|$)`,'u');if(e.recentMessages.some(e=>o.test(e))){t=!0,M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] åŒ¹é…åˆ°åˆ«å: ${a} -> ${n}`);break}}if(!t)return M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] è§’è‰²æœªåœ¨è¿‘æœŸæ¶ˆæ¯ä¸­æåŠ: ${n} (å«åˆ«å)`),!1}else M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] å¼€å±€æ— æ¶ˆæ¯ï¼Œç›´æ¥æ ¹æ®å¥½æ„Ÿåº¦é˜¶æ®µå¼€å¯: ${n}`);const s={é™Œç”ŸæœŸ:[-100,20],å¥½æ„ŸæœŸ:[21,40],å¿ƒåŠ¨æœŸ:[41,60],ç¡®è®¤æœŸ:[61,80],æ·±çˆ±æœŸ:[81,100]}[a];if(!s)return!1;const c=o.å¥½æ„Ÿåº¦??0,l=c>=s[0]&&c<=s[1];return M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] è§’è‰²é˜¶æ®µåŒ¹é…: ${n} - ${a}, å¥½æ„Ÿåº¦=${c}, èŒƒå›´=[${s[0]}, ${s[1]}], åŒ¹é…=${l}`),l},priority:9},{entryPattern:/^\[è§’è‰²\]\s*([^-]+)$/,shouldEnable:(e,r)=>{if(!r)return!1;const t=r.match(/^\[è§’è‰²\]\s*([^-]+)$/);if(!t)return!1;const n=t[1].trim();M.DEBUG&&(console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] ğŸ” æ£€æŸ¥è§’è‰²: ${n}`),console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] ğŸ” æœ€è¿‘æ¶ˆæ¯ (${e.recentMessages.length}æ¡):`,e.recentMessages));let a=n,o=!1;for(const[e,r]of Object.entries(M.CHARACTER_ALIASES))if(r.includes(n)){a=e,o=!0,M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] ğŸ”— è¯†åˆ«åˆ°åˆ«åæ¡ç›®: ${n} -> ä¸»è§’è‰²: ${e}`);break}if(!(e.recentMessages.length>0)){const r=void 0!==e.mvuData?.çº¢é¢œ?.[a];return M.DEBUG&&(r?console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] âœ… å¼€å±€-åº”è¯¥å¼€å¯: ${n}${o?` (ä¸»è§’è‰²: ${a})`:''} (åœ¨çº¢é¢œåˆ—è¡¨ä¸­)`):console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] âŒ å¼€å±€-ä¸åº”å¼€å¯: ${n}${o?` (ä¸»è§’è‰²: ${a})`:''} (ä¸åœ¨çº¢é¢œåˆ—è¡¨ä¸­)`)),r}let s;o?s=[n]:(s=[n],M.CHARACTER_ALIASES[n]&&s.push(...M.CHARACTER_ALIASES[n]));let c=0;const l=[];for(const r of s){const t=r.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'),n=new RegExp(`(?:^|[^\\p{Script=Han}\\w])(${t})(?:[^\\p{Script=Han}\\w]|$)`,'u'),a=e.recentMessages.filter(e=>n.test(e)).length;a>0&&(c+=a,l.push(`${r}(${a}æ¬¡)`),M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] ğŸ” åŒ¹é…åˆ°: ${r}, æ­£åˆ™=${n}, æ¬¡æ•°=${a}`))}const u=c>=1;if(M.DEBUG){const e=o?` [åˆ«åæ¡ç›® -> ${a}]`:'',r=!o&&M.CHARACTER_ALIASES[n]?` [åˆ«å: ${M.CHARACTER_ALIASES[n].join(', ')}]`:'',t=l.length>0?` æåŠè¯¦æƒ…: ${l.join(', ')}`:'';u?console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] âœ… åº”è¯¥å¼€å¯: ${n}${e}${r}, ç´¯è®¡æåŠ=${c}æ¬¡${t}`):console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] âŒ ä¸åº”å¼€å¯: ${n}${e}${r}, ç´¯è®¡æåŠ=${c}æ¬¡ (éœ€â‰¥1æ¬¡)`)}return u},priority:8},{entryPattern:/^\[å¢ƒç•Œ\]\s*(.+)$/,shouldEnable:(e,r)=>{if(!r)return!1;const t=r.match(/^\[å¢ƒç•Œ\]\s*(.+)$/);if(!t)return!1;const n=t[1].trim(),a=e.mvuData?.æœ¬å°Š?.ç­‰çº§??1,o={ç»ƒæ°”:[1,4],ç­‘åŸº:[5,8],é‡‘ä¸¹:[9,12],å…ƒå©´:[13,16],åŒ–ç¥:[17,20],ç‚¼è™š:[21,24],åˆä½“:[25,28],å¤§ä¹˜:[29,32],æ¸¡åŠ«:[33,36]}[n];if(!o)return M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] æœªçŸ¥å¢ƒç•Œåç§°: ${n}`),!1;const s=a>=o[0]&&a<=o[1];return M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] å¢ƒç•ŒåŒ¹é…: ${n}, ç­‰çº§=${a}, èŒƒå›´=[${o[0]}, ${o[1]}], åŒ¹é…=${s}`),s},priority:7},{entryPattern:/^\[çº¢é¢œç´¢å¼•\]$/,shouldEnable:()=>!0,priority:100},{entryPattern:/^\[(ç‰©å“|æ³•å®|åŠŸæ³•|åŠ¿åŠ›|åœ°ç‚¹|çµæ ¹|ä½“è´¨)\]\s*(.+)$/,shouldEnable:(e,r)=>{if(!r)return!1;const t=r.match(/^\[(ç‰©å“|æ³•å®|åŠŸæ³•|åŠ¿åŠ›|åœ°ç‚¹|çµæ ¹|ä½“è´¨)\]\s*(.+)$/);if(!t)return!1;const n=t[1],a=t[2].trim(),o=a.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'),s=new RegExp(o,'u'),c=e.recentMessages.filter(e=>s.test(e)).length,l=c>=2;return M.DEBUG&&c>0&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] ${n}åŒ¹é…: ${a}, æåŠæ¬¡æ•°=${c}, å¯ç”¨=${l}`),l},priority:5}];let R=!1,T=0;async function v(){try{const e=new Promise(e=>{setTimeout(()=>e(!1),M.MVU_INIT_TIMEOUT)}),r=(async()=>(await waitGlobalInitialized('Mvu'),!0))();return await Promise.race([r,e])}catch(e){return console.warn('[åŠ¨æ€ä¸–ç•Œä¹¦] MVU åˆå§‹åŒ–ç­‰å¾…å¤±è´¥',e),!1}}async function x(e='enable'){const r=Date.now();if(r-T<M.DEBOUNCE_DELAY)M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] è§¦å‘è¿‡äºé¢‘ç¹,è·³è¿‡æœ¬æ¬¡æ›´æ–°');else if(T=r,R)M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] æ­£åœ¨å¤„ç†ä¸­ï¼Œè·³è¿‡æœ¬æ¬¡æ›´æ–°');else{R=!0;try{const r=await async function(){if(!await v())return M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] MVU æœªå°±ç»ª,è·³è¿‡æœ¬æ¬¡æ›´æ–°'),null;let e=[];try{const r=getLastMessageId();if(r>=0){const t=getChatMessages(`0-${r}`);t&&t.length>0&&(e=t.slice(-M.CONTEXT_WINDOW).map(e=>{let r=e.message||'';return r=r.replace(/\[åŠ¨æ€ä¸–ç•Œä¹¦\][^\n]*/g,''),r=r.replace(/ã€[^ã€‘]*ã€‘/g,''),r=r.replace(/<UpdateVariable>[\s\S]*?<\/UpdateVariable>/g,''),r=r.replace(/```mvu_update[\s\S]*?```/g,''),r=r.replace(/```[\s\S]*?```/g,''),r.trim()}).filter(e=>e.length>0),M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] ğŸ” è¿‡æ»¤åçš„æ¶ˆæ¯å†…å®¹:',e))}}catch(r){M.DEBUG&&console.warn('[åŠ¨æ€ä¸–ç•Œä¹¦] è·å–æ¶ˆæ¯å¤±è´¥',r),e=[]}let r=null;try{if(getLastMessageId()>=0){const e=getVariables({type:'message',message_id:-1}),t=_.get(e,'stat_data',null);t&&(r=D.parse(t))}if(!r)return M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] MVU æ•°æ®æœªå°±ç»ª,è·³è¿‡æœ¬æ¬¡æ›´æ–°'),null}catch(e){return console.warn('[åŠ¨æ€ä¸–ç•Œä¹¦] è·å– MVU æ•°æ®å¤±è´¥',e),null}const t=r?.æœ¬å°Š?.è¡Œè¸ª?.å½“å‰åŒºåŸŸ??'æœªçŸ¥',n=r?.æœ¬å°Š?.è¡Œè¸ª?.æ‰€å±å±‚çº§??'';return M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] ä¸Šä¸‹æ–‡: åŒºåŸŸ="${t}", å±‚çº§="${n}", æ¶ˆæ¯æ•°=${e.length}`),{currentRegion:t,currentLayer:n,recentMessages:e,mvuData:r}}();if(!r)return void(M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] ä¸Šä¸‹æ–‡æœªå°±ç»ª,è·³è¿‡æœ¬æ¬¡æ›´æ–°'));let t=M.WORLDBOOK_NAME;if('current'===t){const e=getCharWorldbookNames('current');if(t=e.primary||'',!t)return void console.warn('[åŠ¨æ€ä¸–ç•Œä¹¦] å½“å‰è§’è‰²å¡æ²¡æœ‰ç»‘å®šä¸»ä¸–ç•Œä¹¦')}let n=0,a=0,o=0;const s=[...w].sort((e,r)=>(r.priority??0)-(e.priority??0));if(await updateWorldbookWith(t,c=>{M.DEBUG&&(console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] å¼€å§‹å¤„ç†ä¸–ç•Œä¹¦ [${e}æ¨¡å¼]: ${t}, å…± ${c.length} ä¸ªæ¡ç›®`),console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] å½“å‰ä¸Šä¸‹æ–‡: åŒºåŸŸ="${r.currentRegion}", ç­‰çº§=${r.mvuData?.æœ¬å°Š?.ç­‰çº§??'æœªçŸ¥'}, æ¶ˆæ¯æ•°=${r.recentMessages.length}`));for(const t of c){if(!t.enabled)continue;const c=t.name||'';if(!c){M.DEBUG&&console.warn('[åŠ¨æ€ä¸–ç•Œä¹¦] å‘ç°æ— åç§°æ¡ç›®ï¼Œè·³è¿‡');continue}let l=null;for(const e of s){if('string'==typeof e.entryPattern?c.includes(e.entryPattern):e.entryPattern.test(c)){l=e;break}}if(!l)continue;const u=t.strategy.type;if('enable'===e){let e=!1;try{e=l.shouldEnable(r,c)}catch(e){console.error(`[åŠ¨æ€ä¸–ç•Œä¹¦] è¯„ä¼°æ¡ç›® "${c}" æ—¶å‡ºé”™:`,e);continue}const s=/^\[ç³»ç»Ÿ\]/.test(c)||/^\[mvu_update\]/.test(c)||/^\[mvu\]å˜é‡åˆ—è¡¨$/.test(c)||/^\[çº¢é¢œç´¢å¼•\]$/.test(c);e&&'constant'!==u?(t.strategy.type='constant',n++,o++,M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] âœ… å¼€å¯(ç»¿â†’è“): ${c}`)):e||'constant'!==u||s||(t.strategy.type='selective',a++,o++,M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] âš ï¸ å…³é—­(è“â†’ç»¿): ${c}`))}else if('constant'===u){let e=!1;e='conservative'===M.STRATEGY||('balanced'===M.STRATEGY?M.KEEP_ENABLED_AFTER_REPLY.some(e=>e.test(c)):/^\[ç³»ç»Ÿ\]/.test(c)||/^\[mvu_update\]/.test(c)||/^\[mvu\]å˜é‡åˆ—è¡¨$/.test(c)),e||(t.strategy.type='selective',a++,o++,M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] âš ï¸ æ”¹ä¸ºç»¿ç¯: ${c}`))}}return M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] å¤„ç†å®Œæˆ [${e}æ¨¡å¼]ï¼Œä¿®æ”¹ ${o} ä¸ªæ¡ç›® (å¯ç”¨ ${n} ä¸ª, ç¦ç”¨ ${a} ä¸ª)`),c}),n>0||a>0){const r=`${'enable'===e?'å‡†å¤‡AIå›å¤':'AIå›å¤å®Œæˆ'}: å¯ç”¨ ${n} ä¸ª, ç¦ç”¨ ${a} ä¸ª`;console.info(`[åŠ¨æ€ä¸–ç•Œä¹¦] ${r}`),M.DEBUG&&toastr.info(r,'åŠ¨æ€ä¸–ç•Œä¹¦')}else M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] æœ¬æ¬¡æ— éœ€æ›´æ–°æ¡ç›®çŠ¶æ€ [${e}æ¨¡å¼]`)}catch(e){e instanceof Error&&e.message.includes('MVU')||e instanceof Error&&e.message.includes('åˆå§‹åŒ–')?M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] MVU ç›¸å…³é”™è¯¯,å¯èƒ½æ˜¯æ­£åœ¨åˆå§‹åŒ–,è·³è¿‡'):(console.error('[åŠ¨æ€ä¸–ç•Œä¹¦] æ›´æ–°å¤±è´¥',e),M.DEBUG&&toastr.error(`æ›´æ–°å¤±è´¥: ${e instanceof Error?e.message:'æœªçŸ¥é”™è¯¯'}`,'åŠ¨æ€ä¸–ç•Œä¹¦'))}finally{R=!1}}}$(()=>{errorCatched(async()=>{console.info('[åŠ¨æ€ä¸–ç•Œä¹¦] è„šæœ¬å·²åŠ è½½'),console.info(`[åŠ¨æ€ä¸–ç•Œä¹¦] å½“å‰ç­–ç•¥: ${M.STRATEGY}`);const e=await v();e?(console.info('[åŠ¨æ€ä¸–ç•Œä¹¦] MVU æ¡†æ¶å·²åˆå§‹åŒ–'),await new Promise(e=>setTimeout(e,1500)),await x('enable'),console.info('[åŠ¨æ€ä¸–ç•Œä¹¦] åˆå§‹åŒ–æ£€æŸ¥å®Œæˆ')):console.warn('[åŠ¨æ€ä¸–ç•Œä¹¦] MVU åˆå§‹åŒ–è¶…æ—¶,å°†åœ¨åç»­äº‹ä»¶ä¸­å°è¯•'),eventOn(tavern_events.MESSAGE_SENT,async()=>{M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] ğŸŸ¢ ç”¨æˆ·å‘é€æ¶ˆæ¯ï¼Œå¯ç”¨ç›¸å…³ä¸–ç•Œä¹¦æ¡ç›®'),await x('enable')}),eventOn(tavern_events.MESSAGE_SWIPED,async e=>{M.DEBUG&&console.log(`[åŠ¨æ€ä¸–ç•Œä¹¦] ğŸ”„ æ¶ˆæ¯ #${e} é‡rollï¼Œå¯ç”¨ç›¸å…³ä¸–ç•Œä¹¦æ¡ç›®`),await new Promise(e=>setTimeout(e,300)),await x('enable')}),eventOn(tavern_events.MESSAGE_RECEIVED,async()=>{M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] ğŸ”´ AI å›å¤å®Œæˆï¼Œç¦ç”¨éæ ¸å¿ƒä¸–ç•Œä¹¦æ¡ç›®'),await new Promise(e=>setTimeout(e,200)),await x('disable')}),eventOn(tavern_events.CHAT_CHANGED,async()=>{M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] è§¦å‘äº‹ä»¶: CHAT_CHANGED'),await new Promise(e=>setTimeout(e,2e3)),await x('enable')}),eventOn(tavern_events.CHAT_CREATED,async()=>{M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] è§¦å‘äº‹ä»¶: CHAT_CREATED'),await new Promise(e=>setTimeout(e,2e3)),await x('enable')}),eventOn(tavern_events.CHARACTER_PAGE_LOADED,async()=>{M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] è§¦å‘äº‹ä»¶: CHARACTER_PAGE_LOADED'),await new Promise(e=>setTimeout(e,2e3)),await x('enable')}),e&&eventOn(Mvu.events.VARIABLE_UPDATE_ENDED,async()=>{M.DEBUG&&console.log('[åŠ¨æ€ä¸–ç•Œä¹¦] è§¦å‘äº‹ä»¶: VARIABLE_UPDATE_ENDED'),await new Promise(e=>setTimeout(e,100)),await x('enable')});const r='aggressive'===M.STRATEGY?'æ¿€è¿›æ¨¡å¼ï¼ˆæœ€çœtokenï¼‰':'balanced'===M.STRATEGY?'å¹³è¡¡æ¨¡å¼ï¼ˆæ¨èï¼‰':'ä¿å®ˆæ¨¡å¼ï¼ˆæœ€å®‰å…¨ï¼‰';console.info(`[åŠ¨æ€ä¸–ç•Œä¹¦] ç›‘å¬å™¨å·²è®¾ç½®ï¼Œç­–ç•¥ï¼š${r}`),e?toastr.success(`åŠ¨æ€ä¸–ç•Œä¹¦å·²å¯ç”¨ - ${r}`,'ç¯ç«é˜‘çŠ'):toastr.info('åŠ¨æ€ä¸–ç•Œä¹¦å·²åŠ è½½ï¼Œç­‰å¾…MVUåˆå§‹åŒ–...','ç¯ç«é˜‘çŠ')})()});
//# sourceMappingURL=index.js.map